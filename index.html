<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Rumah Data Kependudukan ‚Äì Kalurahan Kedungsari</title>
  <meta name="description" content="Rumah Data Kependudukan Kalurahan Kedungsari ‚Äì Pusat informasi data kependudukan, demografi, dan layanan administrasi warga secara transparan dan terbuka."/>
  <meta name="keywords" content="Rumah Data, Kependudukan, Kalurahan Kedungsari, Data Demografi, Administrasi Desa, Yogyakarta, Open Data"/>
  <meta name="author" content="Kalurahan Kedungsari"/>
  <meta name="robots" content="index, follow"/>
  <meta name="geo.region" content="ID-YO"/>
  <meta property="og:type" content="website"/>
  <meta property="og:title" content="Rumah Data Kependudukan ‚Äì Kalurahan Kedungsari"/>
  <meta property="og:description" content="Pusat informasi data kependudukan Kalurahan Kedungsari secara transparan dan terbuka."/>
  <meta property="og:locale" content="id_ID"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <link rel="canonical" href="https://kalurahan-kedungsari.github.io/rumah-data/"/>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"GovernmentOrganization","name":"Rumah Data Kependudukan Kalurahan Kedungsari","url":"https://kalurahan-kedungsari.github.io/rumah-data/","address":{"@type":"PostalAddress","addressLocality":"Kedungsari","addressRegion":"Yogyakarta","addressCountry":"ID"}}</script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500;600&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet"/>
<style>
:root{
  --cream:#F5EFE0;--parchment:#EDE3CC;--brown:#3D2B1F;--brown-mid:#6B4C35;
  --brown-lite:#A07850;--green:#2D5016;--green-mid:#4A7C28;--green-lite:#7FB347;
  --gold:#C8922A;--gold-lite:#E8B84B;--red:#8B2020;--teal:#1A5F6A;
  --white:#FDFAF4;--shadow:rgba(61,43,31,.18);
  --r-sm:6px;--r-md:12px;--r-lg:20px;--tr:all .28s cubic-bezier(.4,0,.2,1);
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:'DM Sans',sans-serif;background:var(--cream);color:var(--brown);overflow-x:hidden;min-height:100vh}
body::before{content:'';position:fixed;inset:0;background-image:radial-gradient(circle at 15% 15%,rgba(200,146,42,.08) 0%,transparent 55%),radial-gradient(circle at 85% 80%,rgba(45,80,22,.07) 0%,transparent 55%),url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23C8922A' fill-opacity='0.04'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/svg%3E");pointer-events:none;z-index:0}

/* HEADER */
header{position:relative;z-index:10;background:linear-gradient(135deg,var(--green) 0%,#1e3a0e 60%,var(--brown) 100%);overflow:hidden}
header::after{content:'';position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M40 0 L80 40 L40 80 L0 40 Z' fill='rgba(255,255,255,0.03)'/%3E%3C/svg%3E") repeat;pointer-events:none}
#adminTrigger{position:fixed;top:0;right:0;width:80px;height:80px;z-index:500;background:transparent;border:none;outline:none;cursor:default;-webkit-tap-highlight-color:transparent;user-select:none;touch-action:manipulation}
.header-inner{position:relative;z-index:2;max-width:1200px;margin:0 auto;padding:32px 24px 40px;display:flex;flex-direction:column;align-items:center;text-align:center;gap:16px}
.header-badge{display:inline-flex;align-items:center;gap:8px;background:rgba(200,146,42,.25);border:1px solid rgba(200,146,42,.5);border-radius:100px;padding:6px 16px;font-family:'DM Mono',monospace;font-size:.72rem;color:var(--gold-lite);letter-spacing:.1em;text-transform:uppercase;animation:fadeDown .6s ease both}
.header-logo{font-size:3.2rem;animation:fadeDown .5s .1s ease both}
.header-title{font-family:'Playfair Display',serif;font-weight:900;font-size:clamp(1.9rem,5vw,3.4rem);color:var(--white);line-height:1.12;animation:fadeDown .5s .2s ease both}
.header-title span{color:var(--gold-lite);display:block}
.header-subtitle{font-size:.95rem;color:rgba(253,250,244,.72);max-width:520px;line-height:1.65;animation:fadeDown .5s .3s ease both}
.header-stats-bar{display:flex;gap:24px;flex-wrap:wrap;justify-content:center;margin-top:8px;animation:fadeDown .5s .4s ease both}
.stat-chip{background:rgba(255,255,255,.1);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.15);border-radius:var(--r-md);padding:10px 18px;text-align:center}
.stat-chip .num{font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:700;color:var(--gold-lite);display:block}
.stat-chip .label{font-size:.72rem;color:rgba(253,250,244,.7);text-transform:uppercase;letter-spacing:.08em}

/* TICKER */
.ticker-bar{position:relative;z-index:10;background:var(--gold);padding:7px 0;overflow:hidden}
.ticker-content{display:flex;gap:64px;white-space:nowrap;animation:tickerScroll 28s linear infinite;font-family:'DM Mono',monospace;font-size:.75rem;color:var(--brown);font-weight:500;padding:0 24px}
@keyframes tickerScroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

/* MAIN */
main{position:relative;z-index:1;max-width:1280px;margin:0 auto;padding:40px 20px 60px}
.section-header{display:flex;align-items:baseline;gap:14px;margin-bottom:28px}
.section-title{font-family:'Playfair Display',serif;font-size:clamp(1.25rem,3vw,1.6rem);font-weight:700;color:var(--brown)}
.section-line{flex:1;height:2px;background:linear-gradient(to right,var(--brown-lite),transparent);border-radius:2px}
.section-tag{font-family:'DM Mono',monospace;font-size:.68rem;color:var(--brown-lite);text-transform:uppercase;letter-spacing:.12em}

/* DASHBOARD */
.dashboard-row{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;margin-bottom:64px}
.dash-card{background:var(--white);border-radius:var(--r-md);padding:22px 20px;border:1px solid rgba(61,43,31,.08);box-shadow:0 2px 8px var(--shadow);transition:var(--tr);position:relative;overflow:hidden}
.dash-card::after{content:attr(data-emoji);position:absolute;right:12px;bottom:8px;font-size:2.8rem;opacity:.12;pointer-events:none}
.dash-card:hover{transform:translateY(-2px);box-shadow:0 8px 24px var(--shadow)}
.dash-card .dc-label{font-size:.72rem;text-transform:uppercase;letter-spacing:.1em;color:var(--brown-lite);margin-bottom:6px}
.dash-card .dc-value{font-family:'Playfair Display',serif;font-size:2rem;font-weight:700;color:var(--brown);line-height:1}
.dash-card .dc-sub{font-size:.74rem;color:var(--brown-lite);margin-top:4px}
.dc-green{border-left:3px solid var(--green-mid)}.dc-gold{border-left:3px solid var(--gold)}.dc-red{border-left:3px solid var(--red)}.dc-teal{border-left:3px solid var(--teal)}

/* PHOTO WALL */
.photo-wall{columns:4 240px;gap:16px;margin-bottom:64px}
.photo-frame{break-inside:avoid;margin-bottom:16px;background:var(--white);border-radius:var(--r-md);overflow:hidden;box-shadow:0 2px 12px var(--shadow);cursor:pointer;transition:var(--tr);position:relative}
.photo-frame:hover{transform:translateY(-4px) scale(1.015);box-shadow:0 12px 32px var(--shadow),0 0 0 1px rgba(200,146,42,.25)}
.photo-frame:hover .frame-overlay{opacity:1}
.photo-img{width:100%;height:auto;display:block;object-fit:cover}
.emoji-frame{aspect-ratio:4/3;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;background:linear-gradient(135deg,var(--parchment),var(--cream));border:2px dashed rgba(160,120,80,.35)}
.emoji-frame .big-emoji{font-size:2.8rem;line-height:1}
.emoji-frame .frame-caption{font-size:.78rem;color:var(--brown-lite);text-align:center;padding:0 12px;font-style:italic}
.frame-overlay{position:absolute;inset:0;background:linear-gradient(to top,rgba(61,43,31,.82),transparent 55%);opacity:0;transition:var(--tr);display:flex;align-items:flex-end;padding:14px}
.frame-label{padding:10px 12px 12px;border-top:1px solid rgba(61,43,31,.06)}
.frame-label strong{display:block;font-size:.82rem;font-weight:600;color:var(--brown);margin-bottom:2px}
.frame-label span{font-size:.72rem;color:var(--brown-lite)}
.frame-tall .emoji-frame{aspect-ratio:3/4}

/* REPORTS */
.reports-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-bottom:64px}
.report-card{background:var(--white);border-radius:var(--r-md);border:1px solid rgba(61,43,31,.09);padding:20px;display:flex;flex-direction:column;gap:12px;box-shadow:0 2px 8px var(--shadow);transition:var(--tr);cursor:pointer;position:relative;overflow:hidden}
.report-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--green),var(--gold));transform:scaleX(0);transform-origin:left;transition:transform .3s ease}
.report-card:hover::before{transform:scaleX(1)}
.report-card:hover{transform:translateY(-3px);box-shadow:0 10px 28px var(--shadow)}
.report-icon{font-size:1.9rem}
.report-card h3{font-family:'Playfair Display',serif;font-size:1.05rem;color:var(--brown);font-weight:700}
.report-card p{font-size:.82rem;color:var(--brown-lite);line-height:1.6;flex:1}
.report-card .report-tag{font-size:.68rem;color:var(--green-mid);text-transform:uppercase;letter-spacing:.08em;font-weight:500}
.report-card .report-btn{align-self:flex-start;padding:8px 16px;background:linear-gradient(135deg,var(--green),var(--green-mid));color:var(--white);border:none;border-radius:var(--r-sm);font-size:.82rem;font-weight:500;cursor:pointer;transition:var(--tr)}
.report-card .report-btn:hover{background:linear-gradient(135deg,var(--green-mid),var(--green));transform:translateY(-1px)}

/* ACTIVITIES */
.activities-list{display:flex;flex-direction:column;gap:16px;margin-bottom:64px}
.activity-item{background:var(--white);border-radius:var(--r-md);padding:18px 20px;border-left:4px solid var(--teal);box-shadow:0 2px 8px var(--shadow);display:flex;align-items:center;gap:16px;transition:var(--tr);cursor:pointer}
.activity-item:hover{transform:translateX(4px);box-shadow:0 6px 20px var(--shadow)}
.activity-emoji{font-size:2rem;flex-shrink:0}
.activity-body{flex:1}
.activity-body strong{display:block;font-size:.95rem;color:var(--brown);margin-bottom:4px}
.activity-body span{font-size:.78rem;color:var(--brown-lite)}

/* FOOTER */
footer{background:linear-gradient(135deg,var(--brown) 0%,#2a1e14 100%);color:rgba(253,250,244,.8);padding:40px 20px 28px;position:relative;z-index:10}
.footer-inner{max-width:1200px;margin:0 auto;text-align:center}
.footer-logo{font-size:2.8rem;margin-bottom:12px}
.footer-title{font-family:'Playfair Display',serif;font-size:1.3rem;color:var(--gold-lite);margin-bottom:8px}
.footer-text{font-size:.82rem;line-height:1.7;margin-bottom:20px;max-width:600px;margin-left:auto;margin-right:auto}
.footer-links{display:flex;gap:24px;justify-content:center;flex-wrap:wrap;margin-bottom:24px}
.footer-links a{color:rgba(253,250,244,.7);font-size:.82rem;text-decoration:none;transition:var(--tr)}
.footer-links a:hover{color:var(--gold-lite)}
.footer-bottom{padding-top:20px;border-top:1px solid rgba(253,250,244,.15);font-size:.75rem;color:rgba(253,250,244,.6)}

/* BACK TO TOP */
#backToTop{position:fixed;bottom:24px;right:24px;width:52px;height:52px;background:linear-gradient(135deg,var(--gold),var(--gold-lite));border:none;border-radius:50%;color:var(--white);font-size:1.3rem;cursor:pointer;box-shadow:0 4px 16px rgba(200,146,42,.4);opacity:0;transform:translateY(20px) scale(.8);transition:var(--tr);z-index:100;display:flex;align-items:center;justify-content:center}
#backToTop.show{opacity:1;transform:translateY(0) scale(1)}
#backToTop:hover{transform:translateY(-4px) scale(1.08);box-shadow:0 8px 24px rgba(200,146,42,.6)}

/* LIGHTBOX */
.lightbox{position:fixed;inset:0;background:rgba(29,20,14,.94);z-index:9999;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .3s ease;backdrop-filter:blur(8px)}
.lightbox.active{opacity:1;pointer-events:all}
.lightbox-content{max-width:90%;max-height:90%;position:relative;animation:lbPop .35s cubic-bezier(.34,1.56,.64,1) both}
.lightbox-emoji{font-size:clamp(6rem,20vw,16rem);text-align:center;filter:drop-shadow(0 8px 32px rgba(0,0,0,.4))}
.lightbox-caption{margin-top:24px;text-align:center;font-size:.9rem;color:rgba(253,250,244,.85);line-height:1.6;max-width:500px}
.lightbox-close{position:absolute;top:20px;right:20px;width:48px;height:48px;background:rgba(255,255,255,.12);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.2);border-radius:50%;color:var(--white);font-size:1.6rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:var(--tr)}
.lightbox-close:hover{background:rgba(255,255,255,.2);transform:rotate(90deg)}
@keyframes lbPop{0%{transform:scale(.7);opacity:0}100%{transform:scale(1);opacity:1}}

/* ADMIN BADGE */
.admin-badge{position:fixed;top:18px;left:18px;z-index:999;background:linear-gradient(135deg,var(--red),#a82828);color:var(--white);padding:8px 16px;border-radius:var(--r-md);font-family:'DM Mono',monospace;font-size:.72rem;text-transform:uppercase;letter-spacing:.08em;box-shadow:0 4px 12px rgba(139,32,32,.4);opacity:0;pointer-events:none;transition:var(--tr)}
.admin-badge.visible{opacity:1;pointer-events:all}

/* ADMIN PANEL */
.admin-panel{position:fixed;inset:0;z-index:10000;background:rgba(29,20,14,.96);backdrop-filter:blur(12px);opacity:0;pointer-events:none;transition:opacity .3s ease;overflow:hidden}
.admin-panel.open{opacity:1;pointer-events:all}
.ap-container{max-width:1100px;height:100%;margin:0 auto;display:flex;flex-direction:column;animation:apSlide .4s cubic-bezier(.34,1.56,.64,1) both}
@keyframes apSlide{0%{transform:translateY(40px);opacity:0}100%{transform:translateY(0);opacity:1}}

/* AP HEADER */
.ap-header{background:linear-gradient(135deg,var(--brown),#2a1e14);padding:20px 24px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(255,255,255,.1)}
.ap-title{font-family:'Playfair Display',serif;font-size:1.5rem;color:var(--gold-lite);display:flex;align-items:center;gap:12px}
.ap-actions{display:flex;gap:12px}
.ap-actions button{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:var(--white);padding:8px 16px;border-radius:var(--r-sm);font-size:.82rem;cursor:pointer;transition:var(--tr)}
.ap-actions button:hover{background:rgba(255,255,255,.18)}

/* AP TABS */
.ap-tabs{display:flex;gap:8px;padding:16px 24px;background:rgba(61,43,31,.3);border-bottom:1px solid rgba(255,255,255,.08)}
.ap-tab{background:transparent;border:none;color:rgba(253,250,244,.6);padding:10px 18px;border-radius:var(--r-sm);font-size:.85rem;font-weight:500;cursor:pointer;transition:var(--tr)}
.ap-tab:hover{background:rgba(255,255,255,.08);color:rgba(253,250,244,.9)}
.ap-tab.active{background:var(--gold);color:var(--brown);font-weight:600}

/* AP BODY */
.ap-body{flex:1;overflow-y:auto;padding:28px 24px}
.ap-panel{display:none}
.ap-panel.active{display:block}
.ap-section{background:rgba(253,250,244,.06);border:1px solid rgba(255,255,255,.1);border-radius:var(--r-md);padding:24px;margin-bottom:24px}
.ap-section h3{font-family:'Playfair Display',serif;color:var(--gold-lite);font-size:1.15rem;margin-bottom:16px}
.ap-form-group{margin-bottom:16px}
.ap-form-group label{display:block;color:rgba(253,250,244,.8);font-size:.82rem;margin-bottom:6px;font-weight:500}
.ap-form-group input,.ap-form-group textarea{width:100%;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);color:var(--white);padding:10px 12px;border-radius:var(--r-sm);font-size:.85rem;font-family:'DM Sans',sans-serif}
.ap-form-group input:focus,.ap-form-group textarea:focus{outline:none;border-color:var(--gold);background:rgba(255,255,255,.12)}
.ap-form-group textarea{resize:vertical;min-height:80px}
.ap-form-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}
.ap-btn{background:var(--gold);color:var(--brown);border:none;padding:10px 20px;border-radius:var(--r-sm);font-size:.85rem;font-weight:600;cursor:pointer;transition:var(--tr)}
.ap-btn:hover{background:var(--gold-lite);transform:translateY(-1px)}
.ap-btn-sec{background:rgba(255,255,255,.1);color:var(--white);border:1px solid rgba(255,255,255,.2)}
.ap-btn-sec:hover{background:rgba(255,255,255,.18)}

/* AP LIST */
.ap-list-item{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:var(--r-sm);padding:14px 16px;margin-bottom:12px;display:flex;align-items:center;gap:14px}
.ap-list-body{flex:1}
.ap-list-body strong{display:block;color:var(--white);font-size:.9rem;margin-bottom:4px}
.ap-list-body span{font-size:.78rem;color:rgba(253,250,244,.65)}
.ap-list-actions{display:flex;gap:8px}
.ap-edit,.ap-del{padding:6px 12px;border:none;border-radius:var(--r-sm);font-size:.75rem;cursor:pointer;transition:var(--tr)}
.ap-edit{background:var(--teal);color:var(--white)}
.ap-edit:hover{background:#236d7a}
.ap-del{background:var(--red);color:var(--white)}
.ap-del:hover{background:#a82828}

/* AP FORM POPUP */
.ap-form-popup{display:none;background:rgba(253,250,244,.08);border:1px solid rgba(255,255,255,.15);border-radius:var(--r-md);padding:24px;margin-top:16px}
.ap-form-popup h4{color:var(--gold-lite);font-size:1.05rem;margin-bottom:16px}

/* PIN MODAL */
.pin-modal{position:fixed;inset:0;z-index:20000;background:rgba(29,20,14,.97);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .3s ease}
.pin-modal.active{opacity:1;pointer-events:all}
.pin-box{background:linear-gradient(135deg,rgba(61,43,31,.9),rgba(42,30,20,.9));padding:40px;border-radius:var(--r-lg);text-align:center;border:1px solid rgba(255,255,255,.1);box-shadow:0 12px 48px rgba(0,0,0,.5);max-width:380px;width:90%;animation:pinPop .4s cubic-bezier(.34,1.56,.64,1) both}
@keyframes pinPop{0%{transform:scale(.85);opacity:0}100%{transform:scale(1);opacity:1}}
.pin-title{font-family:'Playfair Display',serif;font-size:1.5rem;color:var(--gold-lite);margin-bottom:8px}
.pin-subtitle{font-size:.82rem;color:rgba(253,250,244,.65);margin-bottom:32px}
.pin-dots{display:flex;gap:12px;justify-content:center;margin-bottom:28px}
.pin-dot{width:16px;height:16px;border-radius:50%;border:2px solid rgba(255,255,255,.3);transition:var(--tr)}
.pin-dot.filled{background:var(--gold);border-color:var(--gold)}
.pin-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:20px}
.pin-btn{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);color:var(--white);padding:16px;border-radius:var(--r-md);font-size:1.3rem;font-weight:600;cursor:pointer;transition:var(--tr)}
.pin-btn:hover{background:rgba(255,255,255,.15);transform:scale(1.05)}
.pin-btn:active{transform:scale(.95)}
.pin-err{color:#ff6b6b;font-size:.8rem;min-height:20px}
.pin-close{position:absolute;top:20px;right:20px;width:40px;height:40px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);border-radius:50%;color:var(--white);font-size:1.3rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:var(--tr)}
.pin-close:hover{background:rgba(255,255,255,.15);transform:rotate(90deg)}

/* TOAST */
.toast{position:fixed;bottom:-100px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,var(--green),var(--green-mid));color:var(--white);padding:14px 24px;border-radius:var(--r-md);font-size:.85rem;font-weight:500;box-shadow:0 8px 24px rgba(0,0,0,.3);z-index:30000;transition:bottom .4s cubic-bezier(.34,1.56,.64,1);white-space:nowrap}
.toast.show{bottom:32px}

/* ANIMATIONS */
@keyframes fadeDown{0%{opacity:0;transform:translateY(-12px)}100%{opacity:1;transform:translateY(0)}}

/* RESPONSIVE */
@media(max-width:768px){
  .header-stats-bar{gap:12px}
  .stat-chip{padding:8px 14px}
  .stat-chip .num{font-size:1.2rem}
  .photo-wall{columns:2 200px}
  .reports-grid{grid-template-columns:1fr}
  .dashboard-row{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}
  .ap-tabs{flex-wrap:wrap}
  .ap-form-row{grid-template-columns:1fr}
}

/* Media Link Buttons */
.media-links {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
  flex-wrap: wrap;
}

.media-link-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: rgba(200,146,42,.15);
  border: 1px solid rgba(200,146,42,.3);
  border-radius: var(--r-sm);
  color: var(--brown);
  text-decoration: none;
  font-size: .75rem;
  font-weight: 500;
  transition: var(--tr);
}

.media-link-btn:hover {
  background: rgba(200,146,42,.25);
  border-color: rgba(200,146,42,.5);
  transform: translateY(-1px);
}

.media-link-btn span {
  font-size: 1rem;
}
</style>
</head>
<body>

<button id="adminTrigger" aria-label="Admin Access"></button>

<div class="admin-badge" id="adminBadge">üîí Mode Admin Aktif</div>

<header>
  <div class="header-inner">
    <div class="header-badge">üìä Open Data Portal</div>
    <div class="header-logo">üèõÔ∏è</div>
    <h1 class="header-title">
      Rumah Data Kependudukan
      <span>Kalurahan Kedungsari</span>
    </h1>
    <p class="header-subtitle">
      Pusat informasi data kependudukan, demografi, dan layanan administrasi warga yang transparan, terbuka, dan mudah diakses oleh seluruh masyarakat.
    </p>
    <div class="header-stats-bar">
      <div class="stat-chip">
        <span class="num" id="hPenduduk">‚Äî</span>
        <span class="label">Penduduk</span>
      </div>
      <div class="stat-chip">
        <span class="num" id="hKK">‚Äî</span>
        <span class="label">Kepala Keluarga</span>
      </div>
      <div class="stat-chip">
        <span class="num" id="hDusun">‚Äî</span>
        <span class="label">Dusun</span>
      </div>
    </div>
  </div>
</header>

<div class="ticker-bar">
  <div class="ticker-content" id="tickerContent">
    <span>üìç Kalurahan Kedungsari, Kapanewon Pengasih, Kabupaten Kulon Progo, Yogyakarta</span>
    <span>üìû Hubungi kami untuk informasi lebih lanjut</span>
    <span>üåê Data terbuka untuk transparansi dan partisipasi masyarakat</span>
    <span>üìç Kalurahan Kedungsari, Kapanewon Pengasih, Kabupaten Kulon Progo, Yogyakarta</span>
    <span>üìû Hubungi kami untuk informasi lebih lanjut</span>
    <span>üåê Data terbuka untuk transparansi dan partisipasi masyarakat</span>
  </div>
</div>

<main>
  <!-- DASHBOARD STATISTIK -->
  <section id="statistik" class="section-stagger">
    <div class="section-header">
      <h2 class="section-title">üìä Statistik Kependudukan</h2>
      <div class="section-line"></div>
      <span class="section-tag" id="tahunData">Tahun 2024</span>
    </div>
    <div class="dashboard-row">
      <div class="dash-card dc-green" data-emoji="üë®">
        <div class="dc-label">Laki-laki</div>
        <div class="dc-value" id="d1Val">‚Äî</div>
        <div class="dc-sub" id="d1Sub">‚Äî</div>
      </div>
      <div class="dash-card dc-green" data-emoji="üë©">
        <div class="dc-label">Perempuan</div>
        <div class="dc-value" id="d2Val">‚Äî</div>
        <div class="dc-sub" id="d2Sub">‚Äî</div>
      </div>
      <div class="dash-card dc-gold" data-emoji="üë∂">
        <div class="dc-label">Usia 0-17 Tahun</div>
        <div class="dc-value" id="d3Val">‚Äî</div>
        <div class="dc-sub" id="d3Sub">‚Äî</div>
      </div>
      <div class="dash-card dc-gold" data-emoji="üëî">
        <div class="dc-label">Usia 18-59 Tahun</div>
        <div class="dc-value" id="d4Val">‚Äî</div>
        <div class="dc-sub" id="d4Sub">‚Äî</div>
      </div>
      <div class="dash-card dc-red" data-emoji="üë¥">
        <div class="dc-label">Usia 60+ Tahun</div>
        <div class="dc-value" id="d5Val">‚Äî</div>
        <div class="dc-sub" id="d5Sub">‚Äî</div>
      </div>
      <div class="dash-card dc-teal" data-emoji="üéì">
        <div class="dc-label">Pendidikan Tinggi</div>
        <div class="dc-value" id="d6Val">‚Äî</div>
        <div class="dc-sub" id="d6Sub">‚Äî</div>
      </div>
    </div>
  </section>

  <!-- PHOTO WALL -->
  <section id="foto" class="section-stagger">
    <div class="section-header">
      <h2 class="section-title">üì∏ Dinding Foto & Dokumentasi</h2>
      <div class="section-line"></div>
      <span class="section-tag">Galeri Visual</span>
    </div>
    <div class="media-links">
      <a href="https://github.com/KDMP-Kedungsari/rumah-data/tree/main/assets/foto" target="_blank" class="media-link-btn">
        <span>üìÅ</span> Upload Foto
      </a>
      <a href="https://github.com/KDMP-Kedungsari/rumah-data/tree/main/assets/video" target="_blank" class="media-link-btn">
        <span>üé•</span> Upload Video
      </a>
    </div>
    <div class="photo-wall" id="photoWall">
      <div class="photo-frame" onclick="openLB('üì∏','Galeri Foto','Tambahkan foto dokumentasi kegiatan di sini')">
        <div class="emoji-frame">
          <div class="big-emoji">üì∏</div>
          <div class="frame-caption">Klik untuk melihat foto</div>
        </div>
      </div>
      <div class="photo-frame frame-tall" onclick="openLB('üéØ','Kegiatan Masyarakat','Dokumentasi berbagai kegiatan warga')">
        <div class="emoji-frame">
          <div class="big-emoji">üéØ</div>
          <div class="frame-caption">Kegiatan warga</div>
        </div>
      </div>
      <div class="photo-frame" onclick="openLB('üåæ','Pertanian','Aktivitas pertanian di Kalurahan')">
        <div class="emoji-frame">
          <div class="big-emoji">üåæ</div>
          <div class="frame-caption">Sektor pertanian</div>
        </div>
      </div>
    </div>
  </section>

  <!-- REPORTS -->
  <section id="laporan" class="section-stagger">
    <div class="section-header">
      <h2 class="section-title">üìÑ Laporan dan Dokumen</h2>
      <div class="section-line"></div>
      <span class="section-tag">Arsip Digital</span>
    </div>
    <div class="media-links">
      <a href="https://github.com/KDMP-Kedungsari/rumah-data/tree/main/assets/foto-laporan" target="_blank" class="media-link-btn">
        <span>üìÅ</span> Upload Foto
      </a>
      <a href="https://github.com/KDMP-Kedungsari/rumah-data/tree/main/assets/video-laporan" target="_blank" class="media-link-btn">
        <span>üé•</span> Upload Video
      </a>
    </div>
    <div class="reports-grid" id="reportsGrid">
      <div class="report-card">
        <div class="report-icon">üìä</div>
        <h3>Laporan Bulanan</h3>
        <p>Laporan kependudukan dan kegiatan bulanan Kalurahan</p>
        <span class="report-tag">Data Kependudukan</span>
        <button class="report-btn">Lihat Laporan</button>
      </div>
    </div>
  </section>

  <!-- ACTIVITIES -->
  <section id="kegiatan" class="section-stagger">
    <div class="section-header">
      <h2 class="section-title">üéâ Kegiatan Kalurahan</h2>
      <div class="section-line"></div>
      <span class="section-tag">Update Terkini</span>
    </div>
    <div class="media-links">
      <a href="https://github.com/KDMP-Kedungsari/rumah-data/tree/main/assets/foto-kegiatan" target="_blank" class="media-link-btn">
        <span>üìÅ</span> Upload Foto
      </a>
      <a href="https://github.com/KDMP-Kedungsari/rumah-data/tree/main/assets/video-kegiatan" target="_blank" class="media-link-btn">
        <span>üé•</span> Upload Video
      </a>
    </div>
    <div class="activities-list" id="activitiesList">
      <div class="activity-item">
        <div class="activity-emoji">üéä</div>
        <div class="activity-body">
          <strong>Contoh Kegiatan</strong>
          <span>Deskripsi singkat kegiatan yang dilaksanakan</span>
        </div>
      </div>
    </div>
  </section>
</main>

<footer>
  <div class="footer-inner">
    <div class="footer-logo">üèõÔ∏è</div>
    <h3 class="footer-title">Kalurahan Kedungsari</h3>
    <p class="footer-text">
      Rumah Data Kependudukan merupakan platform transparansi dan keterbukaan informasi publik Kalurahan Kedungsari, Kapanewon Pengasih, Kabupaten Kulon Progo, Daerah Istimewa Yogyakarta.
    </p>
    <div class="footer-links">
      <a href="#statistik">Statistik</a>
      <a href="#foto">Galeri</a>
      <a href="#laporan">Laporan</a>
      <a href="#kegiatan">Kegiatan</a>
    </div>
    <div class="footer-bottom">
      ¬© <span id="footerYear">2024</span> Kalurahan Kedungsari. Data untuk transparansi dan partisipasi masyarakat.
    </div>
  </div>
</footer>

<button id="backToTop" aria-label="Kembali ke atas">‚Üë</button>

<!-- LIGHTBOX -->
<div class="lightbox" id="lightbox" onclick="closeLB(event)">
  <button class="lightbox-close" onclick="closeLB(event)">√ó</button>
  <div class="lightbox-content">
    <div class="lightbox-emoji" id="lbEmoji">üì∏</div>
    <div class="lightbox-caption" id="lbCaption"></div>
  </div>
</div>

<!-- PIN MODAL -->
<div class="pin-modal" id="pinModal">
  <div class="pin-box">
    <button class="pin-close" onclick="closePIN()">√ó</button>
    <div class="pin-title">üîê Akses Admin</div>
    <div class="pin-subtitle">Masukkan PIN 4 digit</div>
    <div class="pin-dots">
      <div class="pin-dot" id="pd0"></div>
      <div class="pin-dot" id="pd1"></div>
      <div class="pin-dot" id="pd2"></div>
      <div class="pin-dot" id="pd3"></div>
    </div>
    <div class="pin-grid">
      <button class="pin-btn" onclick="pk('1')">1</button>
      <button class="pin-btn" onclick="pk('2')">2</button>
      <button class="pin-btn" onclick="pk('3')">3</button>
      <button class="pin-btn" onclick="pk('4')">4</button>
      <button class="pin-btn" onclick="pk('5')">5</button>
      <button class="pin-btn" onclick="pk('6')">6</button>
      <button class="pin-btn" onclick="pk('7')">7</button>
      <button class="pin-btn" onclick="pk('8')">8</button>
      <button class="pin-btn" onclick="pk('9')">9</button>
      <button class="pin-btn" onclick="pk('clr')">‚Ü∫</button>
      <button class="pin-btn" onclick="pk('0')">0</button>
      <button class="pin-btn" onclick="pk('back')">‚å´</button>
    </div>
    <div class="pin-err" id="pinErr"></div>
  </div>
</div>

<!-- ADMIN PANEL -->
<div class="admin-panel" id="adminPanel">
  <div class="ap-container">
    <div class="ap-header">
      <div class="ap-title">
        <span>‚öôÔ∏è</span> Panel Admin
      </div>
      <div class="ap-actions">
        <button onclick="adminLogout()">Keluar</button>
        <button onclick="closeAdmin()">Tutup Panel</button>
      </div>
    </div>

    <div class="ap-tabs">
      <button class="ap-tab active" onclick="swTab('stat',this)">üìä Statistik</button>
      <button class="ap-tab" onclick="swTab('lap',this)">üìÑ Laporan</button>
      <button class="ap-tab" onclick="swTab('keg',this)">üéâ Kegiatan</button>
    </div>

    <div class="ap-body">
      <!-- TAB STATISTIK -->
      <div class="ap-panel active" id="tab-stat">
        <div class="ap-section">
          <h3>Data Umum</h3>
          <div class="ap-form-row">
            <div class="ap-form-group">
              <label>Jumlah Penduduk</label>
              <input type="text" id="f_p" placeholder="mis. 5.234">
            </div>
            <div class="ap-form-group">
              <label>Jumlah KK</label>
              <input type="text" id="f_kk" placeholder="mis. 1.456">
            </div>
            <div class="ap-form-group">
              <label>Jumlah Dusun</label>
              <input type="text" id="f_ds" placeholder="mis. 12">
            </div>
            <div class="ap-form-group">
              <label>Tahun Data</label>
              <input type="text" id="f_thn" placeholder="mis. 2024">
            </div>
          </div>
        </div>

        <div class="ap-section">
          <h3>Data Detail</h3>
          <div class="ap-form-row">
            <div class="ap-form-group">
              <label>Laki-laki (Jumlah)</label>
              <input type="text" id="f_d1" placeholder="mis. 2.600">
            </div>
            <div class="ap-form-group">
              <label>Laki-laki (Sub-label)</label>
              <input type="text" id="f_d1s" placeholder="mis. 49.7% dari total">
            </div>
          </div>
          <div class="ap-form-row">
            <div class="ap-form-group">
              <label>Perempuan (Jumlah)</label>
              <input type="text" id="f_d2" placeholder="mis. 2.634">
            </div>
            <div class="ap-form-group">
              <label>Perempuan (Sub-label)</label>
              <input type="text" id="f_d2s" placeholder="mis. 50.3% dari total">
            </div>
          </div>
          <div class="ap-form-row">
            <div class="ap-form-group">
              <label>Usia 0-17 (Jumlah)</label>
              <input type="text" id="f_d3">
            </div>
            <div class="ap-form-group">
              <label>Usia 0-17 (Sub)</label>
              <input type="text" id="f_d3s">
            </div>
          </div>
          <div class="ap-form-row">
            <div class="ap-form-group">
              <label>Usia 18-59 (Jumlah)</label>
              <input type="text" id="f_d4">
            </div>
            <div class="ap-form-group">
              <label>Usia 18-59 (Sub)</label>
              <input type="text" id="f_d4s">
            </div>
          </div>
          <div class="ap-form-row">
            <div class="ap-form-group">
              <label>Usia 60+ (Jumlah)</label>
              <input type="text" id="f_d5">
            </div>
            <div class="ap-form-group">
              <label>Usia 60+ (Sub)</label>
              <input type="text" id="f_d5s">
            </div>
          </div>
          <div class="ap-form-row">
            <div class="ap-form-group">
              <label>Pendidikan Tinggi (Jumlah)</label>
              <input type="text" id="f_d6">
            </div>
            <div class="ap-form-group">
              <label>Pendidikan Tinggi (Sub)</label>
              <input type="text" id="f_d6s">
            </div>
          </div>
        </div>

        <div class="ap-section">
          <h3>Ticker (6 item)</h3>
          <div class="ap-form-group">
            <label>Item 1</label>
            <input type="text" id="f_tk1" placeholder="mis. üìç Alamat kalurahan">
          </div>
          <div class="ap-form-group">
            <label>Item 2</label>
            <input type="text" id="f_tk2">
          </div>
          <div class="ap-form-group">
            <label>Item 3</label>
            <input type="text" id="f_tk3">
          </div>
          <div class="ap-form-group">
            <label>Item 4</label>
            <input type="text" id="f_tk4">
          </div>
          <div class="ap-form-group">
            <label>Item 5</label>
            <input type="text" id="f_tk5">
          </div>
          <div class="ap-form-group">
            <label>Item 6</label>
            <input type="text" id="f_tk6">
          </div>
        </div>

        <button class="ap-btn" onclick="saveStat()">üíæ Simpan Semua Statistik</button>
      </div>

      <!-- TAB LAPORAN -->
      <div class="ap-panel" id="tab-lap">
        <div class="ap-section">
          <h3>Daftar Laporan</h3>
          <div id="lList"></div>
          <button class="ap-btn" onclick="addL()" style="margin-top:12px">+ Tambah Laporan</button>
        </div>

        <div class="ap-form-popup" id="lForm">
          <h4 id="lLbl">Tambah Laporan</h4>
          <input type="hidden" id="lIdx" value="-1">
          <div class="ap-form-group">
            <label>Emoji/Ikon</label>
            <input type="text" id="lE" placeholder="üìÑ">
          </div>
          <div class="ap-form-group">
            <label>Judul Laporan</label>
            <input type="text" id="lJ" placeholder="Nama laporan">
          </div>
          <div class="ap-form-group">
            <label>Deskripsi</label>
            <textarea id="lD" placeholder="Deskripsi singkat"></textarea>
          </div>
          <div class="ap-form-group">
            <label>Tag/Kategori</label>
            <input type="text" id="lT" placeholder="mis. Data Kependudukan">
          </div>
          <div class="ap-form-group">
            <label>Teks Tombol</label>
            <input type="text" id="lB" placeholder="Unduh PDF">
          </div>
          <div class="ap-form-group">
            <label>URL Dokumen/Foto/Video (opsional)</label>
            <input type="text" id="lU" placeholder="https://github.com/...">
          </div>
          <div style="display:flex;gap:8px">
            <button class="ap-btn" onclick="saveL()">üíæ Simpan</button>
            <button class="ap-btn ap-btn-sec" onclick="cancelL()">Batal</button>
          </div>
        </div>
      </div>

      <!-- TAB KEGIATAN -->
      <div class="ap-panel" id="tab-keg">
        <div class="ap-section">
          <h3>Daftar Kegiatan</h3>
          <div id="kList"></div>
          <button class="ap-btn" onclick="addK()" style="margin-top:12px">+ Tambah Kegiatan</button>
        </div>

        <div class="ap-form-popup" id="kForm">
          <h4 id="kLbl">Tambah Kegiatan</h4>
          <input type="hidden" id="kIdx" value="-1">
          <div class="ap-form-group">
            <label>Emoji/Ikon</label>
            <input type="text" id="kE" placeholder="üéâ">
          </div>
          <div class="ap-form-group">
            <label>Nama Kegiatan</label>
            <input type="text" id="kJ" placeholder="Nama kegiatan">
          </div>
          <div class="ap-form-group">
            <label>Tanggal/Waktu</label>
            <input type="text" id="kT" placeholder="12 Februari 2025">
          </div>
          <div style="display:flex;gap:8px">
            <button class="ap-btn" onclick="saveK()">üíæ Simpan</button>
            <button class="ap-btn ap-btn-sec" onclick="cancelK()">Batal</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script>
const LS_KEY='kdmpData';
const g=id=>document.getElementById(id);
const esc=s=>s.replace(/</g,'&lt;').replace(/>/g,'&gt;');

/* DATA DEFAULT */
let D={
  s:{p:'5.234',kk:'1.456',ds:'12',thn:'2024',d1:'2.600',d1s:'49.7% dari total',d2:'2.634',d2s:'50.3% dari total',d3:'1.234',d3s:'Anak & remaja',d4:'3.200',d4s:'Usia produktif',d5:'800',d5s:'Lansia',d6:'456',d6s:'S1/S2/S3',tk1:'üìç Kalurahan Kedungsari, Kapanewon Pengasih, Kabupaten Kulon Progo, Yogyakarta',tk2:'üìû Hubungi kami untuk informasi lebih lanjut',tk3:'üåê Data terbuka untuk transparansi dan partisipasi masyarakat',tk4:'üìç Kalurahan Kedungsari, Kapanewon Pengasih, Kabupaten Kulon Progo, Yogyakarta',tk5:'üìû Hubungi kami untuk informasi lebih lanjut',tk6:'üåê Data terbuka untuk transparansi dan partisipasi masyarakat'},
  l:[{e:'üìä',j:'Laporan Bulanan',d:'Laporan kependudukan dan kegiatan bulanan Kalurahan',t:'Data Kependudukan',b:'Lihat Laporan',u:''}],
  k:[{e:'üéä',j:'Contoh Kegiatan',t:'Deskripsi singkat kegiatan yang dilaksanakan'}]
};

/* LOAD/SAVE */
function load(){const s=localStorage.getItem(LS_KEY);if(s)try{D=JSON.parse(s)}catch(e){}}
function store(d){localStorage.setItem(LS_KEY,JSON.stringify(d))}

/* TOAST */
function showToast(msg){const t=g('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2800);}

/* SCROLL KE FORM */
function scrollToForm(id){setTimeout(()=>{const el=g(id);if(el)el.scrollIntoView({behavior:'smooth',block:'center'});},100);}

/* RENDER */
function renderStat(){
  const s=D.s;
  g('hPenduduk').textContent=s.p||'‚Äî';
  g('hKK').textContent=s.kk||'‚Äî';
  g('hDusun').textContent=s.ds||'‚Äî';
  g('tahunData').textContent='Tahun '+(s.thn||'2024');
  g('d1Val').textContent=s.d1||'‚Äî';g('d1Sub').textContent=s.d1s||'‚Äî';
  g('d2Val').textContent=s.d2||'‚Äî';g('d2Sub').textContent=s.d2s||'‚Äî';
  g('d3Val').textContent=s.d3||'‚Äî';g('d3Sub').textContent=s.d3s||'‚Äî';
  g('d4Val').textContent=s.d4||'‚Äî';g('d4Sub').textContent=s.d4s||'‚Äî';
  g('d5Val').textContent=s.d5||'‚Äî';g('d5Sub').textContent=s.d5s||'‚Äî';
  g('d6Val').textContent=s.d6||'‚Äî';g('d6Sub').textContent=s.d6s||'‚Äî';
  const tc=g('tickerContent');
  tc.innerHTML=[s.tk1,s.tk2,s.tk3,s.tk4,s.tk5,s.tk6].filter(Boolean).map(t=>`<span>${esc(t)}</span>`).join('');
}

function renderLaporan(){
  const c=g('reportsGrid');
  if(!c)return;
  c.innerHTML=D.l.map(l=>`<div class="report-card"><div class="report-icon">${l.e}</div><h3>${esc(l.j)}</h3><p>${esc(l.d)}</p><span class="report-tag">${esc(l.t)}</span><button class="report-btn"${l.u?' onclick="window.open(\''+l.u+'\',\'_blank\')"':''}>${esc(l.b)}</button></div>`).join('');
}

function renderKegiatan(){
  const c=g('activitiesList');
  if(!c)return;
  c.innerHTML=D.k.map(k=>`<div class="activity-item"><div class="activity-emoji">${k.e}</div><div class="activity-body"><strong>${esc(k.j)}</strong><span>${esc(k.t)}</span></div></div>`).join('');
}

/* RENDER ADMIN LISTS */
function renderLList(){const c=g('lList');if(!c)return;c.innerHTML=D.l.map((l,i)=>`<div class="ap-list-item"><span style="font-size:1.3rem;flex-shrink:0">${l.e}</span><div class="ap-list-body"><strong>${esc(l.j)}</strong><span>${esc(l.d)}</span></div><div class="ap-list-actions"><button class="ap-edit" onclick="editL(${i})">Edit</button><button class="ap-del" onclick="delL(${i})">Hapus</button></div></div>`).join('');}

function renderKList(){const c=g('kList');if(!c)return;c.innerHTML=D.k.map((k,i)=>`<div class="ap-list-item"><span style="font-size:1.3rem;flex-shrink:0">${k.e}</span><div class="ap-list-body"><strong>${esc(k.j)}</strong><span>${esc(k.t)}</span></div><div class="ap-list-actions"><button class="ap-edit" onclick="editK(${i})">Edit</button><button class="ap-del" onclick="delK(${i})">Hapus</button></div></div>`).join('');}

/* SAVE STATISTIK */
function saveStat(){
  const flds=['p','kk','ds','thn','d1','d1s','d2','d2s','d3','d3s','d4','d4s','d5','d5s','d6','d6s','tk1','tk2','tk3','tk4','tk5','tk6'];
  flds.forEach(k=>{const e=g('f_'+k);if(e&&e.value.trim())D.s[k]=e.value.trim();});
  store(D);renderStat();showToast('‚úÖ Statistik berhasil disimpan');
}

/* LAPORAN */
function addL(){g('lIdx').value=-1;g('lE').value='üìÑ';g('lJ').value='';g('lD').value='';g('lT').value='';g('lB').value='Unduh PDF';g('lU').value='';g('lLbl').textContent='Tambah Laporan';g('lForm').style.display='block';scrollToForm('lForm');}
function editL(i){const l=D.l[i];g('lIdx').value=i;g('lE').value=l.e;g('lJ').value=l.j;g('lD').value=l.d;g('lT').value=l.t;g('lB').value=l.b;g('lU').value=l.u||'';g('lLbl').textContent='Edit Laporan';g('lForm').style.display='block';scrollToForm('lForm');}
function saveL(){const o={e:g('lE').value||'üìÑ',j:g('lJ').value,d:g('lD').value,t:g('lT').value,b:g('lB').value||'Lihat',u:g('lU').value};if(!o.j){alert('Judul tidak boleh kosong');return;}const idx=parseInt(g('lIdx').value);if(idx===-1)D.l.push(o);else D.l[idx]=o;store(D);renderLaporan();renderLList();g('lForm').style.display='none';showToast('‚úÖ Laporan berhasil disimpan');}
function delL(i){if(!confirm('Hapus laporan ini?'))return;D.l.splice(i,1);store(D);renderLaporan();renderLList();showToast('üóëÔ∏è Laporan dihapus');}
function cancelL(){g('lForm').style.display='none';}

/* KEGIATAN */
function addK(){g('kIdx').value=-1;g('kE').value='üéâ';g('kJ').value='';g('kT').value='';g('kLbl').textContent='Tambah Kegiatan';g('kForm').style.display='block';scrollToForm('kForm');}
function editK(i){const k=D.k[i];g('kIdx').value=i;g('kE').value=k.e;g('kJ').value=k.j;g('kT').value=k.t;g('kLbl').textContent='Edit Kegiatan';g('kForm').style.display='block';scrollToForm('kForm');}
function saveK(){const o={e:g('kE').value||'üéâ',j:g('kJ').value,t:g('kT').value};if(!o.j){alert('Nama kegiatan tidak boleh kosong');return;}const idx=parseInt(g('kIdx').value);if(idx===-1)D.k.unshift(o);else D.k[idx]=o;store(D);renderKegiatan();renderKList();g('kForm').style.display='none';showToast('‚úÖ Kegiatan berhasil disimpan');}
function delK(i){if(!confirm('Hapus kegiatan ini?'))return;D.k.splice(i,1);store(D);renderKegiatan();renderKList();showToast('üóëÔ∏è Kegiatan dihapus');}
function cancelK(){g('kForm').style.display='none';}

/* PIN */
const PIN='1234'; /* ‚Üê Ganti PIN di sini */
let pinBuf='';
function openPIN(){pinBuf='';updDots();g('pinErr').textContent='';g('pinModal').classList.add('active');}
function closePIN(){g('pinModal').classList.remove('active');pinBuf='';}
function pk(v){
  if(v==='back'){pinBuf=pinBuf.slice(0,-1);updDots();return;}
  if(v==='clr'){pinBuf='';updDots();return;}
  if(pinBuf.length>=4)return;
  pinBuf+=v;updDots();
  if(pinBuf.length===4)setTimeout(checkPIN,160);
}
function updDots(){for(let i=0;i<4;i++)g('pd'+i).classList.toggle('filled',i<pinBuf.length);}
function checkPIN(){
  if(pinBuf===PIN){closePIN();openAdmin();}
  else{
    g('pinErr').textContent='‚ùå PIN salah, coba lagi';
    const b=document.querySelector('.pin-box');
    b.style.transition='none';b.style.transform='translateX(-8px)';
    setTimeout(()=>{b.style.transition='transform .1s';b.style.transform='translateX(8px)';},80);
    setTimeout(()=>{b.style.transform='translateX(0)';pinBuf='';updDots();},180);
  }
}

/* ADMIN PANEL */
function openAdmin(){
  const s=D.s;
  ['p','kk','ds','thn','d1','d1s','d2','d2s','d3','d3s','d4','d4s','d5','d5s','d6','d6s','tk1','tk2','tk3','tk4','tk5','tk6'].forEach(k=>{const e=g('f_'+k);if(e)e.value=s[k]||'';});
  renderLList();renderKList();
  g('adminPanel').classList.add('open');
  g('adminBadge').classList.add('visible');
  document.body.style.overflow='hidden';
}
function closeAdmin(){g('adminPanel').classList.remove('open');document.body.style.overflow='';}
function adminLogout(){closeAdmin();g('adminBadge').classList.remove('visible');showToast('üëã Keluar dari mode admin');}
function swTab(name,btn){
  document.querySelectorAll('.ap-tab').forEach(t=>t.classList.remove('active'));
  document.querySelectorAll('.ap-panel').forEach(p=>p.classList.remove('active'));
  btn.classList.add('active');g('tab-'+name).classList.add('active');
  document.querySelector('.ap-body').scrollTop=0;
}

/* HIDDEN TRIGGER: ketuk 5√ó pojok kanan atas header */
let tc=0,tt=null;
function triggerHit(){
  tc++;clearTimeout(tt);tt=setTimeout(()=>tc=0,2500);
  if(tc>=5){tc=0;openPIN();}
}
g('adminTrigger').addEventListener('click',triggerHit);
g('adminTrigger').addEventListener('touchstart',function(e){e.preventDefault();triggerHit();},{passive:false});

/* LIGHTBOX */
function openLB(e,ti,d){g('lbEmoji').textContent=e;g('lbCaption').innerHTML='<strong style="color:#FDFAF4;font-size:1rem">'+ti+'</strong><br>'+d;g('lightbox').classList.add('active');document.body.style.overflow='hidden';}
function closeLB(ev){if(!ev||ev.target===g('lightbox')||(ev.currentTarget&&ev.currentTarget.classList.contains('lightbox-close'))){g('lightbox').classList.remove('active');document.body.style.overflow='';}}

/* BACK TO TOP */
const btt=g('backToTop');
window.addEventListener('scroll',()=>btt.classList.toggle('show',scrollY>320));
btt.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));

/* ESC KEY */
document.addEventListener('keydown',e=>{if(e.key==='Escape'){closeLB({target:g('lightbox')});closePIN();closeAdmin();}});

/* INIT */
load();renderStat();renderLaporan();renderKegiatan();g('footerYear').textContent=new Date().getFullYear();

/* Stagger animasi per section */
const sections=document.querySelectorAll('.section-stagger');
const obs=new IntersectionObserver(es=>{es.forEach(e=>{if(e.isIntersecting){e.target.style.animation='fadeDown .6s ease both';obs.unobserve(e.target);}})},{threshold:.1});
sections.forEach(s=>obs.observe(s));
</script>

</body>
</html>
