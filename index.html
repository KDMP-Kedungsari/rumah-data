<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rumah Data Kependudukan â€“ Kalurahan Kedungsari</title>

  <!-- SEO META -->
  <meta name="description" content="Rumah Data Kependudukan Kalurahan Kedungsari â€“ Pusat informasi data kependudukan, demografi, dan layanan administrasi warga secara transparan dan terbuka." />
  <meta name="keywords" content="Rumah Data, Kependudukan, Kalurahan Kedungsari, Data Demografi, Administrasi Desa, Yogyakarta, Open Data" />
  <meta name="author" content="Kalurahan Kedungsari" />
  <meta name="robots" content="index, follow" />
  <meta name="language" content="Indonesian" />
  <meta name="geo.region" content="ID-YO" />
  <meta name="geo.placename" content="Kedungsari, Yogyakarta" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Rumah Data Kependudukan â€“ Kalurahan Kedungsari" />
  <meta property="og:description" content="Pusat informasi data kependudukan dan layanan administrasi warga Kalurahan Kedungsari secara transparan dan terbuka." />
  <meta property="og:locale" content="id_ID" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="canonical" href="https://kalurahan-kedungsari.github.io/" />
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"GovernmentOrganization","name":"Rumah Data Kependudukan Kalurahan Kedungsari","description":"Pusat informasi data kependudukan Kalurahan Kedungsari","url":"https://kalurahan-kedungsari.github.io/","address":{"@type":"PostalAddress","addressLocality":"Kedungsari","addressRegion":"Yogyakarta","addressCountry":"ID"}}</script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500;600&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet" />

  <style>
    /* â”€â”€ VARIABLES â”€â”€ */
    :root {
      --cream:#F5EFE0; --parchment:#EDE3CC; --brown:#3D2B1F; --brown-mid:#6B4C35;
      --brown-lite:#A07850; --green:#2D5016; --green-mid:#4A7C28; --green-lite:#7FB347;
      --gold:#C8922A; --gold-lite:#E8B84B; --red:#8B2020; --teal:#1A5F6A;
      --white:#FDFAF4; --shadow:rgba(61,43,31,.18);
      --r-sm:6px; --r-md:12px; --r-lg:20px; --tr:all .28s cubic-bezier(.4,0,.2,1);
    }
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{font-family:'DM Sans',sans-serif;background:var(--cream);color:var(--brown);overflow-x:hidden;min-height:100vh}
    body::before{content:'';position:fixed;inset:0;background-image:radial-gradient(circle at 15% 15%,rgba(200,146,42,.08) 0%,transparent 55%),radial-gradient(circle at 85% 80%,rgba(45,80,22,.07) 0%,transparent 55%),url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23C8922A' fill-opacity='0.04'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/svg%3E");pointer-events:none;z-index:0}

    /* â”€â”€ HEADER â”€â”€ */
    header{position:relative;z-index:10;background:linear-gradient(135deg,var(--green) 0%,#1e3a0e 60%,var(--brown) 100%);overflow:hidden}
    header::after{content:'';position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M40 0 L80 40 L40 80 L0 40 Z' fill='rgba(255,255,255,0.03)'/%3E%3Ccircle cx='40' cy='40' r='15' fill='none' stroke='rgba(200,146,42,0.1)' stroke-width='1'/%3E%3C/svg%3E") repeat;pointer-events:none}
    .header-inner{position:relative;z-index:2;max-width:1200px;margin:0 auto;padding:32px 24px 40px;display:flex;flex-direction:column;align-items:center;text-align:center;gap:16px}
    .header-badge{display:inline-flex;align-items:center;gap:8px;background:rgba(200,146,42,.25);border:1px solid rgba(200,146,42,.5);border-radius:100px;padding:6px 16px;font-family:'DM Mono',monospace;font-size:.72rem;color:var(--gold-lite);letter-spacing:.1em;text-transform:uppercase;animation:fadeDown .6s ease both}
    .header-logo{font-size:3.2rem;animation:fadeDown .5s .1s ease both}
    .header-title{font-family:'Playfair Display',serif;font-weight:900;font-size:clamp(1.9rem,5vw,3.4rem);color:var(--white);line-height:1.12;animation:fadeDown .5s .2s ease both}
    .header-title span{color:var(--gold-lite);display:block}
    .header-subtitle{font-size:.95rem;color:rgba(253,250,244,.72);max-width:520px;line-height:1.65;animation:fadeDown .5s .3s ease both}
    .header-stats-bar{display:flex;gap:24px;flex-wrap:wrap;justify-content:center;margin-top:8px;animation:fadeDown .5s .4s ease both}
    .stat-chip{background:rgba(255,255,255,.1);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.15);border-radius:var(--r-md);padding:10px 18px;text-align:center}
    .stat-chip .num{font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:700;color:var(--gold-lite);display:block}
    .stat-chip .label{font-size:.72rem;color:rgba(253,250,244,.7);text-transform:uppercase;letter-spacing:.08em}

    /* â”€â”€ TICKER â”€â”€ */
    .ticker-bar{position:relative;z-index:10;background:var(--gold);padding:7px 0;overflow:hidden}
    .ticker-content{display:flex;gap:64px;white-space:nowrap;animation:tickerScroll 28s linear infinite;font-family:'DM Mono',monospace;font-size:.75rem;color:var(--brown);font-weight:500;padding:0 24px}
    @keyframes tickerScroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

    /* â”€â”€ ADMIN TRIGGER (logo area â€“ hidden) â”€â”€ */
    #adminTrigger{position:absolute;top:0;right:0;width:60px;height:60px;z-index:20;cursor:default;background:transparent;border:none;outline:none}

    /* â”€â”€ MAIN â”€â”€ */
    main{position:relative;z-index:1;max-width:1280px;margin:0 auto;padding:40px 20px 60px}
    .section-header{display:flex;align-items:baseline;gap:14px;margin-bottom:28px}
    .section-title{font-family:'Playfair Display',serif;font-size:clamp(1.25rem,3vw,1.6rem);font-weight:700;color:var(--brown)}
    .section-line{flex:1;height:2px;background:linear-gradient(to right,var(--brown-lite),transparent);border-radius:2px}
    .section-tag{font-family:'DM Mono',monospace;font-size:.68rem;color:var(--brown-lite);text-transform:uppercase;letter-spacing:.12em}

    /* â”€â”€ DASHBOARD â”€â”€ */
    .dashboard-row{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;margin-bottom:64px}
    .dash-card{background:var(--white);border-radius:var(--r-md);padding:22px 20px;border:1px solid rgba(61,43,31,.08);box-shadow:0 2px 8px var(--shadow);transition:var(--tr);position:relative;overflow:hidden}
    .dash-card::after{content:attr(data-emoji);position:absolute;right:12px;bottom:8px;font-size:2.8rem;opacity:.12;pointer-events:none}
    .dash-card:hover{transform:translateY(-2px);box-shadow:0 8px 24px var(--shadow)}
    .dash-card .dc-label{font-size:.72rem;text-transform:uppercase;letter-spacing:.1em;color:var(--brown-lite);margin-bottom:6px}
    .dash-card .dc-value{font-family:'Playfair Display',serif;font-size:2rem;font-weight:700;color:var(--brown);line-height:1}
    .dash-card .dc-sub{font-size:.74rem;color:var(--brown-lite);margin-top:4px}
    .dc-green{border-left:3px solid var(--green-mid)}.dc-gold{border-left:3px solid var(--gold)}.dc-red{border-left:3px solid var(--red)}.dc-teal{border-left:3px solid var(--teal)}

    /* â”€â”€ PHOTO WALL â”€â”€ */
    .photo-wall{columns:4 240px;gap:16px;margin-bottom:64px}
    .photo-frame{break-inside:avoid;margin-bottom:16px;background:var(--white);border-radius:var(--r-md);overflow:hidden;box-shadow:0 2px 12px var(--shadow),0 0 0 1px rgba(61,43,31,.07);cursor:pointer;transition:var(--tr);position:relative}
    .photo-frame:hover{transform:translateY(-4px) scale(1.015);box-shadow:0 12px 32px var(--shadow),0 0 0 1px rgba(200,146,42,.25)}
    .photo-frame:hover .frame-overlay{opacity:1}
    .emoji-frame{aspect-ratio:4/3;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;background:linear-gradient(135deg,var(--parchment),var(--cream));border:2px dashed rgba(160,120,80,.35)}
    .emoji-frame .big-emoji{font-size:2.8rem;line-height:1}
    .emoji-frame .frame-caption{font-size:.78rem;color:var(--brown-lite);text-align:center;padding:0 12px;font-style:italic}
    .frame-overlay{position:absolute;inset:0;background:linear-gradient(to top,rgba(61,43,31,.82) 0%,transparent 55%);opacity:0;transition:var(--tr);display:flex;align-items:flex-end;padding:14px}
    .frame-overlay-text{color:var(--white);font-size:.78rem;font-weight:500}
    .frame-label{padding:10px 12px 12px;border-top:1px solid rgba(61,43,31,.06)}
    .frame-label strong{display:block;font-size:.82rem;font-weight:600;color:var(--brown);margin-bottom:2px}
    .frame-label span{font-size:.72rem;color:var(--brown-lite)}
    .frame-tall .emoji-frame{aspect-ratio:3/4}

    /* â”€â”€ REPORTS â”€â”€ */
    .reports-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-bottom:64px}
    .report-card{background:var(--white);border-radius:var(--r-md);border:1px solid rgba(61,43,31,.09);padding:20px;display:flex;flex-direction:column;gap:12px;box-shadow:0 2px 8px var(--shadow);transition:var(--tr);cursor:pointer;position:relative;overflow:hidden}
    .report-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--green),var(--gold));transform:scaleX(0);transform-origin:left;transition:transform .3s ease}
    .report-card:hover::before{transform:scaleX(1)}
    .report-card:hover{transform:translateY(-3px);box-shadow:0 10px 28px var(--shadow)}
    .report-icon{font-size:1.9rem}
    .report-card h3{font-family:'Playfair Display',serif;font-size:1.05rem;color:var(--brown);font-weight:700}
    .report-card p{font-size:.82rem;color:var(--brown-lite);line-height:1.6;flex:1}
    .report-meta{display:flex;justify-content:space-between;align-items:center;padding-top:12px;border-top:1px solid rgba(61,43,31,.07)}
    .report-date{font-family:'DM Mono',monospace;font-size:.7rem;color:var(--brown-lite)}
    .report-btn{font-size:.74rem;font-weight:600;color:var(--green);background:rgba(45,80,22,.08);border:none;padding:5px 12px;border-radius:100px;cursor:pointer;transition:var(--tr)}
    .report-btn:hover{background:var(--green);color:var(--white)}

    /* â”€â”€ KEGIATAN â”€â”€ */
    .kegiatan-strip{display:flex;gap:16px;overflow-x:auto;padding-bottom:12px;margin-bottom:64px;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch}
    .kegiatan-strip::-webkit-scrollbar{height:5px}.kegiatan-strip::-webkit-scrollbar-track{background:rgba(61,43,31,.07);border-radius:4px}.kegiatan-strip::-webkit-scrollbar-thumb{background:var(--brown-lite);border-radius:4px}
    .kegiatan-card{flex:0 0 260px;scroll-snap-align:start;background:var(--white);border-radius:var(--r-md);overflow:hidden;box-shadow:0 2px 10px var(--shadow);transition:var(--tr);cursor:pointer}
    .kegiatan-card:hover{transform:translateY(-3px) scale(1.015);box-shadow:0 10px 28px var(--shadow)}
    .kegiatan-img{height:160px;background:linear-gradient(135deg,var(--parchment),var(--cream));display:flex;align-items:center;justify-content:center;font-size:3rem;border-bottom:2px dashed rgba(160,120,80,.3)}
    .kegiatan-info{padding:14px}
    .kegiatan-info h4{font-weight:600;font-size:.88rem;color:var(--brown);margin-bottom:4px}
    .kegiatan-info span{font-size:.74rem;color:var(--brown-lite)}

    /* â”€â”€ PENGUMUMAN â”€â”€ */
    .pengumuman-list{display:flex;flex-direction:column;gap:14px;margin-bottom:64px}
    .pengumuman-item{background:var(--white);border-radius:var(--r-md);padding:16px 20px;display:flex;gap:16px;align-items:flex-start;box-shadow:0 2px 8px var(--shadow);border:1px solid rgba(61,43,31,.07);transition:var(--tr);cursor:pointer}
    .pengumuman-item:hover{transform:translateX(4px);border-left:3px solid var(--gold)}
    .pengumuman-emoji{font-size:1.6rem;flex-shrink:0;margin-top:2px}
    .pengumuman-body h4{font-weight:600;font-size:.9rem;color:var(--brown);margin-bottom:4px}
    .pengumuman-body p{font-size:.8rem;color:var(--brown-lite);line-height:1.55}
    .pengumuman-date{font-family:'DM Mono',monospace;font-size:.68rem;color:var(--brown-lite);white-space:nowrap;margin-left:auto;flex-shrink:0}

    /* â”€â”€ LIGHTBOX â”€â”€ */
    .lightbox{display:none;position:fixed;inset:0;z-index:9999;background:rgba(20,12,5,.9);backdrop-filter:blur(10px);align-items:center;justify-content:center;padding:24px}
    .lightbox.active{display:flex}
    .lightbox-inner{max-width:900px;max-height:90vh;width:100%;position:relative;animation:lightboxIn .25s ease}
    @keyframes lightboxIn{from{transform:scale(.88);opacity:0}to{transform:scale(1);opacity:1}}
    .lightbox-emoji-big{width:100%;min-height:320px;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:6rem;gap:16px;background:rgba(245,239,224,.05);border-radius:var(--r-md)}
    .lightbox-emoji-big p{font-size:1.1rem;color:rgba(253,250,244,.75);text-align:center;max-width:360px}
    .lightbox-close{position:absolute;top:-14px;right:-14px;width:40px;height:40px;background:var(--gold);color:var(--brown);border:none;border-radius:50%;font-size:1.1rem;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:700;transition:var(--tr);box-shadow:0 4px 12px rgba(0,0,0,.35)}
    .lightbox-close:hover{background:var(--gold-lite);transform:rotate(90deg)}

    /* â”€â”€ FOOTER â”€â”€ */
    footer{position:relative;z-index:10;background:linear-gradient(160deg,var(--brown) 0%,#1c110a 100%);color:rgba(253,250,244,.75);overflow:hidden}
    footer::before{content:'';position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M40 0 L80 40 L40 80 L0 40 Z' fill='rgba(200,146,42,0.05)'/%3E%3C/svg%3E") repeat;pointer-events:none}
    .footer-inner{position:relative;max-width:1200px;margin:0 auto;padding:48px 24px 0}
    .footer-top{display:grid;grid-template-columns:1.5fr 1fr 1fr;gap:40px;margin-bottom:40px}
    .footer-brand h2{font-family:'Playfair Display',serif;font-size:1.25rem;color:var(--white);margin-bottom:10px}
    .footer-brand p{font-size:.82rem;line-height:1.7;color:rgba(253,250,244,.6);max-width:300px}
    .footer-col h4{font-size:.8rem;text-transform:uppercase;letter-spacing:.12em;color:var(--gold-lite);margin-bottom:14px;font-weight:600}
    .footer-col ul{list-style:none;display:flex;flex-direction:column;gap:8px}
    .footer-col ul li a{color:rgba(253,250,244,.6);text-decoration:none;font-size:.82rem;transition:var(--tr);display:inline-flex;align-items:center;gap:6px}
    .footer-col ul li a:hover{color:var(--gold-lite);transform:translateX(3px)}
    .quick-access{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:var(--r-lg);padding:28px;margin-bottom:28px}
    .qa-title{font-size:.78rem;text-transform:uppercase;letter-spacing:.12em;color:var(--gold-lite);margin-bottom:18px;font-weight:600}
    .qa-buttons{display:flex;flex-wrap:wrap;gap:10px}
    .qa-btn{display:inline-flex;align-items:center;gap:8px;padding:10px 18px;border-radius:100px;border:none;font-family:'DM Sans',sans-serif;font-size:.82rem;font-weight:600;cursor:pointer;text-decoration:none;transition:var(--tr)}
    .qa-btn.primary{background:var(--gold);color:var(--brown)}.qa-btn.primary:hover{background:var(--gold-lite);transform:translateY(-2px)}
    .qa-btn.secondary{background:rgba(255,255,255,.08);color:var(--white);border:1px solid rgba(255,255,255,.14)}.qa-btn.secondary:hover{background:rgba(255,255,255,.15);transform:translateY(-2px)}
    .qa-btn.green{background:rgba(45,80,22,.7);color:var(--green-lite);border:1px solid rgba(127,179,71,.25)}.qa-btn.green:hover{background:var(--green-mid);color:var(--white);transform:translateY(-2px)}
    .qa-btn.teal{background:rgba(26,95,106,.6);color:#7dd3dc;border:1px solid rgba(26,95,106,.8)}.qa-btn.teal:hover{background:var(--teal);color:var(--white);transform:translateY(-2px)}
    .footer-bottom{border-top:1px solid rgba(255,255,255,.08);padding:18px 0;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px}
    .footer-bottom p{font-size:.75rem;color:rgba(253,250,244,.4)}
    .footer-bottom p span{color:var(--gold-lite)}
    .footer-badge{display:inline-flex;align-items:center;gap:6px;font-family:'DM Mono',monospace;font-size:.68rem;color:rgba(253,250,244,.35);border:1px solid rgba(255,255,255,.1);padding:4px 10px;border-radius:100px}

    /* â”€â”€ BACK TO TOP â”€â”€ */
    #backToTop{position:fixed;bottom:28px;right:24px;width:46px;height:46px;background:var(--green);color:var(--white);border:none;border-radius:50%;font-size:1.1rem;cursor:pointer;box-shadow:0 4px 16px rgba(0,0,0,.28);display:flex;align-items:center;justify-content:center;opacity:0;transform:translateY(10px);transition:var(--tr);z-index:999}
    #backToTop.show{opacity:1;transform:translateY(0)}
    #backToTop:hover{background:var(--green-mid);transform:translateY(-2px)}

    @keyframes fadeDown{from{transform:translateY(-14px);opacity:0}to{transform:translateY(0);opacity:1}}
    .fade-in{opacity:0;transform:translateY(18px);transition:opacity .55s ease,transform .55s ease}
    .fade-in.visible{opacity:1;transform:translateY(0)}

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ADMIN PANEL STYLES
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    /* PIN Modal */
    #pinModal{display:none;position:fixed;inset:0;z-index:99999;background:rgba(20,12,5,.92);backdrop-filter:blur(12px);align-items:center;justify-content:center}
    #pinModal.active{display:flex}
    .pin-box{background:var(--white);border-radius:var(--r-lg);padding:40px 36px;width:min(360px,92vw);text-align:center;box-shadow:0 32px 80px rgba(0,0,0,.5);animation:lightboxIn .25s ease}
    .pin-box h2{font-family:'Playfair Display',serif;font-size:1.4rem;color:var(--brown);margin-bottom:6px}
    .pin-box p{font-size:.82rem;color:var(--brown-lite);margin-bottom:28px}
    .pin-dots{display:flex;justify-content:center;gap:12px;margin-bottom:24px}
    .pin-dot{width:14px;height:14px;border-radius:50%;background:rgba(61,43,31,.15);transition:var(--tr)}
    .pin-dot.filled{background:var(--green)}
    .pin-pad{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:16px}
    .pin-key{background:var(--parchment);border:1px solid rgba(61,43,31,.12);border-radius:var(--r-md);padding:16px;font-family:'Playfair Display',serif;font-size:1.3rem;font-weight:700;color:var(--brown);cursor:pointer;transition:var(--tr)}
    .pin-key:hover{background:var(--gold);color:var(--white);border-color:var(--gold)}
    .pin-key.del{font-size:1rem;font-family:'DM Sans',sans-serif}
    .pin-error{font-size:.8rem;color:#c0392b;min-height:20px;transition:var(--tr)}
    .pin-close-btn{margin-top:12px;background:none;border:none;font-size:.8rem;color:var(--brown-lite);cursor:pointer;text-decoration:underline}

    /* Admin Panel Drawer */
    #adminPanel{position:fixed;top:0;right:0;width:min(480px,100vw);height:100vh;background:var(--brown);z-index:88888;transform:translateX(100%);transition:transform .38s cubic-bezier(.4,0,.2,1);box-shadow:-8px 0 40px rgba(0,0,0,.4);display:flex;flex-direction:column;overflow:hidden}
    #adminPanel.open{transform:translateX(0)}
    .ap-header{background:linear-gradient(135deg,var(--green),#1e3a0e);padding:20px 24px;display:flex;align-items:center;justify-content:space-between;flex-shrink:0}
    .ap-header h2{font-family:'Playfair Display',serif;color:var(--white);font-size:1.15rem}
    .ap-header-right{display:flex;gap:10px;align-items:center}
    .ap-close{background:rgba(255,255,255,.1);border:none;color:var(--white);width:34px;height:34px;border-radius:50%;cursor:pointer;font-size:1.1rem;transition:var(--tr);display:flex;align-items:center;justify-content:center}
    .ap-close:hover{background:rgba(255,255,255,.25)}
    .ap-logout{background:rgba(139,32,32,.5);border:1px solid rgba(139,32,32,.7);color:#ffaaaa;font-size:.72rem;padding:5px 12px;border-radius:100px;cursor:pointer;font-family:'DM Sans',sans-serif;transition:var(--tr)}
    .ap-logout:hover{background:var(--red);color:var(--white)}

    /* Tab bar */
    .ap-tabs{display:flex;background:rgba(0,0,0,.25);flex-shrink:0}
    .ap-tab{flex:1;padding:11px 6px;background:none;border:none;color:rgba(253,250,244,.5);font-family:'DM Sans',sans-serif;font-size:.78rem;font-weight:600;cursor:pointer;transition:var(--tr);border-bottom:2px solid transparent}
    .ap-tab.active{color:var(--gold-lite);border-bottom-color:var(--gold-lite);background:rgba(200,146,42,.08)}

    /* Content area */
    .ap-content{flex:1;overflow-y:auto;padding:20px}
    .ap-content::-webkit-scrollbar{width:5px}.ap-content::-webkit-scrollbar-track{background:rgba(255,255,255,.04)}.ap-content::-webkit-scrollbar-thumb{background:var(--brown-lite);border-radius:4px}
    .ap-panel{display:none}.ap-panel.active{display:block}

    /* Form groups */
    .ap-group{margin-bottom:20px}
    .ap-label{display:block;font-size:.72rem;text-transform:uppercase;letter-spacing:.1em;color:var(--gold-lite);margin-bottom:7px;font-weight:600}
    .ap-input{width:100%;background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.14);border-radius:var(--r-sm);padding:10px 12px;color:var(--white);font-family:'DM Sans',sans-serif;font-size:.88rem;transition:var(--tr)}
    .ap-input:focus{outline:none;border-color:var(--gold-lite);background:rgba(255,255,255,.1)}
    .ap-input::placeholder{color:rgba(253,250,244,.3)}
    .ap-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .ap-save-btn{width:100%;padding:12px;background:linear-gradient(135deg,var(--green),var(--green-mid));color:var(--white);border:none;border-radius:var(--r-md);font-family:'DM Sans',sans-serif;font-size:.9rem;font-weight:700;cursor:pointer;transition:var(--tr);margin-top:8px}
    .ap-save-btn:hover{background:linear-gradient(135deg,var(--green-mid),var(--green-lite));transform:translateY(-1px)}
    .ap-save-btn:active{transform:translateY(0)}

    /* List items in admin */
    .ap-list-item{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:var(--r-sm);padding:12px 14px;margin-bottom:10px;display:flex;gap:10px;align-items:flex-start}
    .ap-list-body{flex:1;min-width:0}
    .ap-list-body strong{display:block;font-size:.85rem;color:var(--white);margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .ap-list-body span{font-size:.74rem;color:rgba(253,250,244,.5)}
    .ap-list-actions{display:flex;gap:6px;flex-shrink:0}
    .ap-btn-edit,.ap-btn-del{padding:5px 10px;border:none;border-radius:var(--r-sm);font-size:.72rem;cursor:pointer;font-family:'DM Sans',sans-serif;font-weight:600;transition:var(--tr)}
    .ap-btn-edit{background:rgba(200,146,42,.25);color:var(--gold-lite)}.ap-btn-edit:hover{background:var(--gold);color:var(--brown)}
    .ap-btn-del{background:rgba(139,32,32,.25);color:#ffaaaa}.ap-btn-del:hover{background:var(--red);color:var(--white)}
    .ap-add-btn{width:100%;padding:10px;background:rgba(200,146,42,.12);border:1px dashed rgba(200,146,42,.4);border-radius:var(--r-md);color:var(--gold-lite);font-family:'DM Sans',sans-serif;font-size:.84rem;cursor:pointer;transition:var(--tr);margin-bottom:16px}
    .ap-add-btn:hover{background:rgba(200,146,42,.22)}
    .ap-divider{height:1px;background:rgba(255,255,255,.08);margin:20px 0}
    .ap-section-label{font-size:.78rem;font-weight:600;color:rgba(253,250,244,.6);text-transform:uppercase;letter-spacing:.08em;margin-bottom:12px}

    /* Saved toast */
    #toast{position:fixed;bottom:80px;left:50%;transform:translateX(-50%) translateY(10px);background:var(--green);color:var(--white);padding:10px 24px;border-radius:100px;font-size:.84rem;font-weight:600;z-index:99999;opacity:0;transition:all .3s ease;pointer-events:none;white-space:nowrap}
    #toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

    /* Admin indicator badge */
    #adminBadge{display:none;position:fixed;top:12px;left:12px;z-index:88887;background:rgba(200,146,42,.9);color:var(--brown);padding:5px 14px;border-radius:100px;font-size:.72rem;font-weight:700;backdrop-filter:blur(6px)}
    #adminBadge.visible{display:flex;align-items:center;gap:6px}

    /* â”€â”€ RESPONSIVE â”€â”€ */
    @media(max-width:900px){.photo-wall{columns:3 180px}.footer-top{grid-template-columns:1fr 1fr}.footer-brand{grid-column:1/-1}}
    @media(max-width:600px){.header-inner{padding:24px 16px 32px}.header-stats-bar{gap:12px}.stat-chip{padding:8px 14px}.stat-chip .num{font-size:1.2rem}.photo-wall{columns:2 140px;gap:10px}.reports-grid{grid-template-columns:1fr}.dashboard-row{grid-template-columns:1fr 1fr}.footer-top{grid-template-columns:1fr;gap:24px}.qa-buttons{gap:8px}.qa-btn{font-size:.78rem;padding:9px 14px}main{padding:24px 14px 48px}.footer-inner{padding:32px 16px 0}#adminPanel{width:100vw}.ap-row{grid-template-columns:1fr}}
    @media(max-width:400px){.photo-wall{columns:2 120px;gap:8px}.dashboard-row{grid-template-columns:1fr}}
  </style>
</head>
<body>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HEADER
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <header role="banner">
    <!-- Hidden admin trigger â€“ 5x click on top-right corner -->
    <button id="adminTrigger" aria-hidden="true" tabindex="-1"></button>
    <div class="header-inner">
      <div class="header-badge">ğŸ‡®ğŸ‡© &nbsp; Kalurahan Kedungsari &nbsp;Â·&nbsp; Pemerintahan Desa</div>
      <div class="header-logo">ğŸ›ï¸</div>
      <h1 class="header-title">Rumah Data<span>Kependudukan</span></h1>
      <p class="header-subtitle">Pusat informasi data kependudukan, demografi, dan layanan administrasi warga Kalurahan Kedungsari yang transparan, terbuka, dan mudah diakses.</p>
      <div class="header-stats-bar">
        <div class="stat-chip">
          <span class="num" id="hTotalPenduduk">3.847</span>
          <span class="label">Total Penduduk</span>
        </div>
        <div class="stat-chip">
          <span class="num" id="hTotalKK">1.142</span>
          <span class="label">Kepala Keluarga</span>
        </div>
        <div class="stat-chip">
          <span class="num" id="hTotalDusun">5</span>
          <span class="label">Dusun</span>
        </div>
        <div class="stat-chip">
          <span class="num" id="hTahunData">2025</span>
          <span class="label">Tahun Data</span>
        </div>
      </div>
    </div>
  </header>

  <!-- TICKER -->
  <div class="ticker-bar" aria-hidden="true">
    <div class="ticker-content" id="tickerContent">
      <span>ğŸ“… Data diperbarui: <span id="tk1">Januari 2025</span></span>
      <span>ğŸ‘¥ Penduduk Laki-laki: <span id="tk2">1.921</span> | Perempuan: <span id="tk3">1.926</span></span>
      <span>ğŸ“Š Kepadatan: <span id="tk4">485</span> jiwa/kmÂ²</span>
      <span>ğŸ“ Angka Melek Huruf: <span id="tk5">98,4</span>%</span>
      <span>ğŸ’¼ Tingkat Partisipasi Kerja: <span id="tk6">72,1</span>%</span>
      <span>ğŸ“… Data diperbarui: <span id="tk1b">Januari 2025</span></span>
      <span>ğŸ‘¥ Penduduk Laki-laki: <span id="tk2b">1.921</span> | Perempuan: <span id="tk3b">1.926</span></span>
      <span>ğŸ“Š Kepadatan: <span id="tk4b">485</span> jiwa/kmÂ²</span>
      <span>ğŸ“ Angka Melek Huruf: <span id="tk5b">98,4</span>%</span>
      <span>ğŸ’¼ Tingkat Partisipasi Kerja: <span id="tk6b">72,1</span>%</span>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MAIN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <main id="main">

    <!-- DASHBOARD -->
    <section aria-labelledby="stats-title" class="fade-in">
      <div class="section-header">
        <h2 class="section-title" id="stats-title">ğŸ“ˆ Statistik Kependudukan</h2>
        <div class="section-line"></div>
        <span class="section-tag">Live Data</span>
      </div>
      <div class="dashboard-row" id="dashboardRow">
        <div class="dash-card dc-green" data-emoji="ğŸ‘¨">
          <div class="dc-label">Penduduk Laki-laki</div>
          <div class="dc-value" id="d1">1.921</div>
          <div class="dc-sub" id="d1s">49,9% dari total</div>
        </div>
        <div class="dash-card dc-red" data-emoji="ğŸ‘©">
          <div class="dc-label">Penduduk Perempuan</div>
          <div class="dc-value" id="d2">1.926</div>
          <div class="dc-sub" id="d2s">50,1% dari total</div>
        </div>
        <div class="dash-card dc-gold" data-emoji="ğŸ§’">
          <div class="dc-label">Usia 0â€“14 tahun</div>
          <div class="dc-value" id="d3">812</div>
          <div class="dc-sub" id="d3s">21,1% dari total</div>
        </div>
        <div class="dash-card dc-teal" data-emoji="ğŸ‘´">
          <div class="dc-label">Usia 60+ tahun</div>
          <div class="dc-value" id="d4">348</div>
          <div class="dc-sub" id="d4s">9,0% dari total</div>
        </div>
        <div class="dash-card dc-green" data-emoji="ğŸ’">
          <div class="dc-label">Status Kawin</div>
          <div class="dc-value" id="d5">2.104</div>
          <div class="dc-sub" id="d5s">warga berstatus menikah</div>
        </div>
        <div class="dash-card dc-gold" data-emoji="ğŸ“">
          <div class="dc-label">Lulus SMA/SMK</div>
          <div class="dc-value" id="d6">1.238</div>
          <div class="dc-sub" id="d6s">pendidikan terakhir</div>
        </div>
      </div>
    </section>

    <!-- PHOTO WALL -->
    <section id="foto" aria-labelledby="foto-title" class="fade-in">
      <div class="section-header">
        <h2 class="section-title" id="foto-title">ğŸ–¼ï¸ Dinding Foto</h2>
        <div class="section-line"></div>
        <span class="section-tag">Klik untuk Perbesar</span>
      </div>
      <div class="photo-wall" id="photoWall">
        <div class="photo-frame" onclick="openLightbox('ğŸ›ï¸','Balai Kalurahan Kedungsari','Pusat administrasi dan pelayanan warga')">
          <div class="emoji-frame"><span class="big-emoji">ğŸ›ï¸</span><span class="frame-caption">Balai Kalurahan Kedungsari</span></div>
          <div class="frame-label"><strong>Balai Kalurahan</strong><span>Pusat Administrasi</span></div>
        </div>
        <div class="photo-frame frame-tall" onclick="openLightbox('ğŸ¤','Musyawarah Kalurahan','Musyawarah perencanaan pembangunan warga')">
          <div class="emoji-frame"><span class="big-emoji">ğŸ¤</span><span class="frame-caption">Musyawarah Perencanaan</span></div>
          <div class="frame-label"><strong>Musrenbang 2025</strong><span>Maret 2025</span></div>
        </div>
        <div class="photo-frame" onclick="openLightbox('ğŸ‘¶','Kegiatan Posyandu','Pemeriksaan rutin balita dan ibu hamil')">
          <div class="emoji-frame"><span class="big-emoji">ğŸ‘¶</span><span class="frame-caption">Posyandu Balita</span></div>
          <div class="frame-label"><strong>Posyandu Aktif</strong><span>4 pos tersebar</span></div>
        </div>
        <div class="photo-frame" onclick="openLightbox('ğŸ› ï¸','Gotong Royong','Kegiatan kebersihan lingkungan bersama warga')">
          <div class="emoji-frame"><span class="big-emoji">ğŸ› ï¸</span><span class="frame-caption">Gotong Royong Rutin</span></div>
          <div class="frame-label"><strong>Kerja Bakti</strong><span>Setiap Minggu Ke-3</span></div>
        </div>
        <div class="photo-frame frame-tall" onclick="openLightbox('ğŸ—ºï¸','Peta Wilayah Kalurahan','Pemetaan wilayah dan batas administrasi')">
          <div class="emoji-frame"><span class="big-emoji">ğŸ—ºï¸</span><span class="frame-caption">Peta Wilayah Kalurahan</span></div>
          <div class="frame-label"><strong>Peta Desa</strong><span>5 Dusun</span></div>
        </div>
        <div class="photo-frame" onclick="openLightbox('ğŸ«','Sarana Pendidikan','SD, SMP, dan PAUD di wilayah kalurahan')">
          <div class="emoji-frame"><span class="big-emoji">ğŸ«</span><span class="frame-caption">Sarana Pendidikan</span></div>
          <div class="frame-label"><strong>Sekolah & PAUD</strong><span>3 unit pendidikan</span></div>
        </div>
        <div class="photo-frame" onclick="openLightbox('ğŸªª','Pelayanan Administrasi KTP','Layanan pembuatan dan perpanjangan KTP')">
          <div class="emoji-frame"><span class="big-emoji">ğŸªª</span><span class="frame-caption">Layanan KTP & KK</span></div>
          <div class="frame-label"><strong>Adminduk Online</strong><span>Senin â€“ Jumat</span></div>
        </div>
        <div class="photo-frame frame-tall" onclick="openLightbox('ğŸŒ¾','Lahan Pertanian','Sebagian wilayah masih berupa lahan pertanian produktif')">
          <div class="emoji-frame"><span class="big-emoji">ğŸŒ¾</span><span class="frame-caption">Lahan Pertanian Desa</span></div>
          <div class="frame-label"><strong>Pertanian Aktif</strong><span>Â±12 ha lahan produktif</span></div>
        </div>
        <div class="photo-frame" onclick="openLightbox('ğŸ›’','UMKM Warga','Pameran dan pemberdayaan UMKM lokal')">
          <div class="emoji-frame"><span class="big-emoji">ğŸ›’</span><span class="frame-caption">UMKM Kalurahan</span></div>
          <div class="frame-label"><strong>85 UMKM Aktif</strong><span>Berbagai sektor usaha</span></div>
        </div>
        <div class="photo-frame" onclick="openLightbox('âš½','Karang Taruna','Kegiatan kepemudaan dan olahraga')">
          <div class="emoji-frame"><span class="big-emoji">âš½</span><span class="frame-caption">Karang Taruna Aktif</span></div>
          <div class="frame-label"><strong>Karang Taruna</strong><span>Kegiatan Kepemudaan</span></div>
        </div>
        <div class="photo-frame frame-tall" onclick="openLightbox('ğŸ•Œ','Sarana Ibadah','Masjid dan mushola sebagai pusat kegiatan keagamaan')">
          <div class="emoji-frame"><span class="big-emoji">ğŸ•Œ</span><span class="frame-caption">Sarana Ibadah</span></div>
          <div class="frame-label"><strong>7 Masjid/Mushola</strong><span>Tersebar di tiap dusun</span></div>
        </div>
        <div class="photo-frame" onclick="openLightbox('ğŸ’°','BUMKal Kedungsari','Badan Usaha Milik Kalurahan yang mengelola aset desa')">
          <div class="emoji-frame"><span class="big-emoji">ğŸ’°</span><span class="frame-caption">BUMKal Kedungsari</span></div>
          <div class="frame-label"><strong>BUMKal Aktif</strong><span>Pengelola Aset Desa</span></div>
        </div>
      </div>
    </section>

    <!-- LAPORAN -->
    <section id="laporan" aria-labelledby="laporan-title" class="fade-in">
      <div class="section-header">
        <h2 class="section-title" id="laporan-title">ğŸ“‹ Laporan & Dokumen</h2>
        <div class="section-line"></div>
        <span class="section-tag">Unduh</span>
      </div>
      <div class="reports-grid" id="reportsGrid"></div>
    </section>

    <!-- KEGIATAN -->
    <section id="kegiatan" aria-labelledby="kegiatan-title" class="fade-in">
      <div class="section-header">
        <h2 class="section-title" id="kegiatan-title">ğŸ‰ Kegiatan Kalurahan</h2>
        <div class="section-line"></div>
        <span class="section-tag">Terbaru</span>
      </div>
      <div class="kegiatan-strip" id="kegiatanStrip"></div>
    </section>

    <!-- PENGUMUMAN -->
    <section id="pengumuman" aria-labelledby="pengumuman-title" class="fade-in">
      <div class="section-header">
        <h2 class="section-title" id="pengumuman-title">ğŸ“¢ Pengumuman</h2>
        <div class="section-line"></div>
        <span class="section-tag">Terkini</span>
      </div>
      <div class="pengumuman-list" id="pengumumanList"></div>
    </section>

  </main>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FOOTER
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <footer id="kontak" role="contentinfo">
    <div class="footer-inner">
      <div class="quick-access">
        <div class="qa-title">âš¡ Akses Cepat &amp; Layanan</div>
        <div class="qa-buttons">
          <a href="https://script.google.com/macros/s/AKfycbyhv7MKIv9XXb_h7X0uUMPuXpWZeX9W1NEhLnHVQmN3tYVO-kN28igOeyN5H6OugjSv/exec" class="qa-btn primary">ğŸ“Š Laporan Data</a>
          <a href="#foto" class="qa-btn secondary">ğŸ–¼ï¸ Galeri Foto</a>
          <a href="#pengumuman" class="qa-btn secondary">ğŸ“¢ Pengumuman</a>
          <a href="#kegiatan" class="qa-btn secondary">ğŸ‰ Kegiatan</a>
          <a href="https://dukcapil.jogjaprov.go.id/" target="_blank" rel="noopener noreferrer" class="qa-btn green">ğŸªª Adminduk Online</a>
          <a href="https://sid.kemendesa.go.id/" target="_blank" rel="noopener noreferrer" class="qa-btn green">ğŸ—‚ï¸ SID Kemendes</a>
          <a href="https://wa.me/628123456789" target="_blank" rel="noopener noreferrer" class="qa-btn teal">ğŸ’¬ WhatsApp Desa</a>
          <a href="mailto:kedungsari@desa.id" class="qa-btn teal">âœ‰ï¸ Surel Kalurahan</a>
        </div>
      </div>
      <div class="footer-top">
        <div class="footer-brand">
          <h2>ğŸ›ï¸ Rumah Data Kependudukan<br>Kalurahan Kedungsari</h2>
          <p>Kami berkomitmen menyajikan data kependudukan yang akurat, transparan, dan mudah diakses oleh seluruh warga demi terwujudnya pemerintahan desa yang bersih dan melayani.</p>
        </div>
        <div class="footer-col">
          <h4>Navigasi</h4>
          <ul>
            <li><a href="#">ğŸ  Beranda</a></li>
            <li><a href="#foto">ğŸ–¼ï¸ Galeri Foto</a></li>
            <li><a href="#laporan">ğŸ“‹ Laporan</a></li>
            <li><a href="#kegiatan">ğŸ‰ Kegiatan</a></li>
            <li><a href="#pengumuman">ğŸ“¢ Pengumuman</a></li>
            <li><a href="#kontak">ğŸ“ Kontak</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Info Kontak</h4>
          <ul>
            <li><a href="#">ğŸ“ Jl. Raya Kedungsari No. 1, Yogyakarta</a></li>
            <li><a href="tel:+6274123456">ğŸ“ (0274) 123-4567</a></li>
            <li><a href="mailto:kedungsari@desa.id">âœ‰ï¸ kedungsari@desa.id</a></li>
            <li><a href="#">ğŸ• Seninâ€“Kamis, 08.00â€“14.00</a></li>
            <li><a href="#">ğŸŒ kalurahan-kedungsari.github.io</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>Â© 2025 Kalurahan Kedungsari Â· Dibuat dengan â¤ï¸ untuk <span>transparansi data</span> desa</p>
        <div class="footer-badge">ğŸ‡®ğŸ‡© &nbsp; Open Data &nbsp;Â·&nbsp; v2.0</div>
      </div>
    </div>
  </footer>

  <!-- BACK TO TOP -->
  <button id="backToTop" aria-label="Kembali ke atas">â†‘</button>

  <!-- LIGHTBOX -->
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" onclick="closeLightbox(event)">
    <div class="lightbox-inner">
      <button class="lightbox-close" onclick="closeLightbox()" aria-label="Tutup">âœ•</button>
      <div class="lightbox-emoji-big">
        <span id="lightboxEmoji"></span>
        <p id="lightboxCaption"></p>
      </div>
    </div>
  </div>

  <!-- ADMIN BADGE -->
  <div id="adminBadge">âš™ï¸ Mode Admin</div>

  <!-- TOAST -->
  <div id="toast">âœ… Data berhasil disimpan!</div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PIN MODAL
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="pinModal" role="dialog" aria-modal="true" aria-label="Login Admin">
    <div class="pin-box">
      <h2>ğŸ” Admin Panel</h2>
      <p>Masukkan PIN 4 digit untuk mengakses panel pengelola data</p>
      <div class="pin-dots" id="pinDots">
        <div class="pin-dot" id="pd0"></div>
        <div class="pin-dot" id="pd1"></div>
        <div class="pin-dot" id="pd2"></div>
        <div class="pin-dot" id="pd3"></div>
      </div>
      <div class="pin-pad">
        <button class="pin-key" onclick="pinInput('1')">1</button>
        <button class="pin-key" onclick="pinInput('2')">2</button>
        <button class="pin-key" onclick="pinInput('3')">3</button>
        <button class="pin-key" onclick="pinInput('4')">4</button>
        <button class="pin-key" onclick="pinInput('5')">5</button>
        <button class="pin-key" onclick="pinInput('6')">6</button>
        <button class="pin-key" onclick="pinInput('7')">7</button>
        <button class="pin-key" onclick="pinInput('8')">8</button>
        <button class="pin-key" onclick="pinInput('9')">9</button>
        <button class="pin-key del" onclick="pinInput('clr')">Hapus</button>
        <button class="pin-key" onclick="pinInput('0')">0</button>
        <button class="pin-key del" onclick="pinInput('back')">âŒ«</button>
      </div>
      <div class="pin-error" id="pinError"></div>
      <button class="pin-close-btn" onclick="closePinModal()">Batal</button>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ADMIN PANEL DRAWER
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="adminPanel" role="complementary" aria-label="Panel Admin">
    <div class="ap-header">
      <h2>âš™ï¸ Panel Pengelola Data</h2>
      <div class="ap-header-right">
        <button class="ap-logout" onclick="adminLogout()">Keluar</button>
        <button class="ap-close" onclick="closeAdmin()" aria-label="Tutup panel">âœ•</button>
      </div>
    </div>
    <div class="ap-tabs">
      <button class="ap-tab active" onclick="switchTab('statistik',this)">ğŸ“Š Statistik</button>
      <button class="ap-tab" onclick="switchTab('pengumuman',this)">ğŸ“¢ Pengumuman</button>
      <button class="ap-tab" onclick="switchTab('laporan',this)">ğŸ“‹ Laporan</button>
      <button class="ap-tab" onclick="switchTab('kegiatan',this)">ğŸ‰ Kegiatan</button>
    </div>
    <div class="ap-content">

      <!-- TAB: STATISTIK -->
      <div class="ap-panel active" id="tab-statistik">
        <div class="ap-section-label">Header Utama</div>
        <div class="ap-row">
          <div class="ap-group">
            <label class="ap-label">Total Penduduk</label>
            <input class="ap-input" id="f_totalPenduduk" type="text" placeholder="3.847">
          </div>
          <div class="ap-group">
            <label class="ap-label">Total KK</label>
            <input class="ap-input" id="f_totalKK" type="text" placeholder="1.142">
          </div>
        </div>
        <div class="ap-row">
          <div class="ap-group">
            <label class="ap-label">Jumlah Dusun</label>
            <input class="ap-input" id="f_totalDusun" type="text" placeholder="5">
          </div>
          <div class="ap-group">
            <label class="ap-label">Tahun Data</label>
            <input class="ap-input" id="f_tahunData" type="text" placeholder="2025">
          </div>
        </div>
        <div class="ap-divider"></div>
        <div class="ap-section-label">Kartu Dashboard</div>
        <div class="ap-row">
          <div class="ap-group">
            <label class="ap-label">Laki-laki</label>
            <input class="ap-input" id="f_d1" type="text" placeholder="1.921">
          </div>
          <div class="ap-group">
            <label class="ap-label">Ket. Laki-laki</label>
            <input class="ap-input" id="f_d1s" type="text" placeholder="49,9% dari total">
          </div>
        </div>
        <div class="ap-row">
          <div class="ap-group">
            <label class="ap-label">Perempuan</label>
            <input class="ap-input" id="f_d2" type="text" placeholder="1.926">
          </div>
          <div class="ap-group">
            <label class="ap-label">Ket. Perempuan</label>
            <input class="ap-input" id="f_d2s" type="text" placeholder="50,1% dari total">
          </div>
        </div>
        <div class="ap-row">
          <div class="ap-group">
            <label class="ap-label">Usia 0â€“14 th</label>
            <input class="ap-input" id="f_d3" type="text" placeholder="812">
          </div>
          <div class="ap-group">
            <label class="ap-label">Ket.</label>
            <input class="ap-input" id="f_d3s" type="text" placeholder="21,1% dari total">
          </div>
        </div>
        <div class="ap-row">
          <div class="ap-group">
            <label class="ap-label">Usia 60+ th</label>
            <input class="ap-input" id="f_d4" type="text" placeholder="348">
          </div>
          <div class="ap-group">
            <label class="ap-label">Ket.</label>
            <input class="ap-input" id="f_d4s" type="text" placeholder="9,0% dari total">
          </div>
        </div>
        <div class="ap-row">
          <div class="ap-group">
            <label class="ap-label">Status Kawin</label>
            <input class="ap-input" id="f_d5" type="text" placeholder="2.104">
          </div>
          <div class="ap-group">
            <label class="ap-label">Ket.</label>
            <input class="ap-input" id="f_d5s" type="text" placeholder="warga berstatus menikah">
          </div>
        </div>
        <div class="ap-row">
          <div class="ap-group">
            <label class="ap-label">Lulus SMA/SMK</label>
            <input class="ap-input" id="f_d6" type="text" placeholder="1.238">
          </div>
          <div class="ap-group">
            <label class="ap-label">Ket.</label>
            <input class="ap-input" id="f_d6s" type="text" placeholder="pendidikan terakhir">
          </div>
        </div>
        <div class="ap-divider"></div>
        <div class="ap-section-label">Ticker Berjalan</div>
        <div class="ap-group">
          <label class="ap-label">Tanggal Pembaruan</label>
          <input class="ap-input" id="f_tk1" type="text" placeholder="Januari 2025">
        </div>
        <div class="ap-row">
          <div class="ap-group">
            <label class="ap-label">Laki-laki (ticker)</label>
            <input class="ap-input" id="f_tk2" type="text" placeholder="1.921">
          </div>
          <div class="ap-group">
            <label class="ap-label">Perempuan (ticker)</label>
            <input class="ap-input" id="f_tk3" type="text" placeholder="1.926">
          </div>
        </div>
        <div class="ap-row">
          <div class="ap-group">
            <label class="ap-label">Kepadatan (jiwa/kmÂ²)</label>
            <input class="ap-input" id="f_tk4" type="text" placeholder="485">
          </div>
          <div class="ap-group">
            <label class="ap-label">Melek Huruf (%)</label>
            <input class="ap-input" id="f_tk5" type="text" placeholder="98,4">
          </div>
        </div>
        <div class="ap-group">
          <label class="ap-label">Partisipasi Kerja (%)</label>
          <input class="ap-input" id="f_tk6" type="text" placeholder="72,1">
        </div>
        <button class="ap-save-btn" onclick="saveStatistik()">ğŸ’¾ Simpan Statistik</button>
      </div>

      <!-- TAB: PENGUMUMAN -->
      <div class="ap-panel" id="tab-pengumuman">
        <button class="ap-add-btn" onclick="addPengumuman()">ï¼‹ Tambah Pengumuman Baru</button>
        <div id="pengumumanAdminList"></div>
        <div id="pengumumanForm" style="display:none">
          <div class="ap-divider"></div>
          <div class="ap-section-label" id="pengFormLabel">Tambah Pengumuman</div>
          <input type="hidden" id="f_pIdx" value="-1">
          <div class="ap-group">
            <label class="ap-label">Emoji</label>
            <input class="ap-input" id="f_pEmoji" type="text" placeholder="ğŸ“£" maxlength="4">
          </div>
          <div class="ap-group">
            <label class="ap-label">Judul</label>
            <input class="ap-input" id="f_pJudul" type="text" placeholder="Jadwal Pelayanan...">
          </div>
          <div class="ap-group">
            <label class="ap-label">Isi Pengumuman</label>
            <textarea class="ap-input" id="f_pIsi" rows="3" placeholder="Deskripsi pengumuman..."></textarea>
          </div>
          <div class="ap-group">
            <label class="ap-label">Tanggal</label>
            <input class="ap-input" id="f_pTgl" type="text" placeholder="06 Jan 2025">
          </div>
          <div style="display:flex;gap:10px">
            <button class="ap-save-btn" onclick="savePengumuman()">ğŸ’¾ Simpan</button>
            <button class="ap-save-btn" style="background:rgba(255,255,255,.1);flex:0 0 auto;padding:12px 18px" onclick="cancelPengumuman()">Batal</button>
          </div>
        </div>
      </div>

      <!-- TAB: LAPORAN -->
      <div class="ap-panel" id="tab-laporan">
        <button class="ap-add-btn" onclick="addLaporan()">ï¼‹ Tambah Laporan Baru</button>
        <div id="laporanAdminList"></div>
        <div id="laporanForm" style="display:none">
          <div class="ap-divider"></div>
          <div class="ap-section-label" id="lapFormLabel">Tambah Laporan</div>
          <input type="hidden" id="f_lIdx" value="-1">
          <div class="ap-row">
            <div class="ap-group">
              <label class="ap-label">Emoji/Ikon</label>
              <input class="ap-input" id="f_lEmoji" type="text" placeholder="ğŸ“Š" maxlength="4">
            </div>
            <div class="ap-group">
              <label class="ap-label">Tanggal</label>
              <input class="ap-input" id="f_lTgl" type="text" placeholder="Des 2024">
            </div>
          </div>
          <div class="ap-group">
            <label class="ap-label">Judul Laporan</label>
            <input class="ap-input" id="f_lJudul" type="text" placeholder="Laporan Kependudukan...">
          </div>
          <div class="ap-group">
            <label class="ap-label">Deskripsi</label>
            <textarea class="ap-input" id="f_lDesc" rows="3" placeholder="Deskripsi singkat..."></textarea>
          </div>
          <div class="ap-group">
            <label class="ap-label">Label Tombol (mis: Unduh PDF)</label>
            <input class="ap-input" id="f_lBtn" type="text" placeholder="Unduh PDF">
          </div>
          <div class="ap-group">
            <label class="ap-label">Link URL (kosongkan jika belum ada)</label>
            <input class="ap-input" id="f_lUrl" type="text" placeholder="https://...">
          </div>
          <div style="display:flex;gap:10px">
            <button class="ap-save-btn" onclick="saveLaporan()">ğŸ’¾ Simpan</button>
            <button class="ap-save-btn" style="background:rgba(255,255,255,.1);flex:0 0 auto;padding:12px 18px" onclick="cancelLaporan()">Batal</button>
          </div>
        </div>
      </div>

      <!-- TAB: KEGIATAN -->
      <div class="ap-panel" id="tab-kegiatan">
        <button class="ap-add-btn" onclick="addKegiatan()">ï¼‹ Tambah Kegiatan Baru</button>
        <div id="kegiatanAdminList"></div>
        <div id="kegiatanForm" style="display:none">
          <div class="ap-divider"></div>
          <div class="ap-section-label" id="kegFormLabel">Tambah Kegiatan</div>
          <input type="hidden" id="f_kIdx" value="-1">
          <div class="ap-row">
            <div class="ap-group">
              <label class="ap-label">Emoji</label>
              <input class="ap-input" id="f_kEmoji" type="text" placeholder="ğŸŒ¾" maxlength="4">
            </div>
            <div class="ap-group">
              <label class="ap-label">Tanggal/Keterangan</label>
              <input class="ap-input" id="f_kTgl" type="text" placeholder="April 2025 Â· Kelompok Tani">
            </div>
          </div>
          <div class="ap-group">
            <label class="ap-label">Nama Kegiatan</label>
            <input class="ap-input" id="f_kJudul" type="text" placeholder="Panen Raya Bersama">
          </div>
          <div style="display:flex;gap:10px">
            <button class="ap-save-btn" onclick="saveKegiatan()">ğŸ’¾ Simpan</button>
            <button class="ap-save-btn" style="background:rgba(255,255,255,.1);flex:0 0 auto;padding:12px 18px" onclick="cancelKegiatan()">Batal</button>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       JAVASCRIPT
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script>
  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     DEFAULT DATA
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  const DEFAULT_DATA = {
    statistik: {
      totalPenduduk:'3.847', totalKK:'1.142', totalDusun:'5', tahunData:'2025',
      d1:'1.921', d1s:'49,9% dari total', d2:'1.926', d2s:'50,1% dari total',
      d3:'812', d3s:'21,1% dari total', d4:'348', d4s:'9,0% dari total',
      d5:'2.104', d5s:'warga berstatus menikah', d6:'1.238', d6s:'pendidikan terakhir',
      tk1:'Januari 2025', tk2:'1.921', tk3:'1.926', tk4:'485', tk5:'98,4', tk6:'72,1'
    },
    pengumuman: [
      {emoji:'ğŸ“£', judul:'Jadwal Pelayanan Adminduk Terbaru 2025', isi:'Mulai Januari 2025, pelayanan administrasi kependudukan (KTP, KK, Akta) dapat dilakukan setiap hari Seninâ€“Kamis pukul 08.00â€“14.00 WIB di Balai Kalurahan.', tgl:'06 Jan 2025'},
      {emoji:'ğŸ’°', judul:'Penyaluran BLT Dana Desa Tahap I Tahun 2025', isi:'Penyaluran Bantuan Langsung Tunai (BLT) Dana Desa tahap pertama dijadwalkan mulai 15 Januari 2025. Warga penerima harap mempersiapkan dokumen yang diperlukan.', tgl:'03 Jan 2025'},
      {emoji:'ğŸš°', judul:'Pembangunan Jaringan Air Bersih Dusun Karangan', isi:'Proyek pembangunan jaringan air bersih di Dusun Karangan telah memasuki tahap akhir dan diperkirakan selesai pada akhir Februari 2025.', tgl:'29 Des 2024'},
      {emoji:'ğŸ“‹', judul:'Pemutakhiran Data DTKS Semester I 2025', isi:'Bagi warga yang ingin didata atau mengusulkan perubahan data DTKS dapat menghubungi Petugas RT/RW setempat hingga 31 Maret 2025.', tgl:'27 Des 2024'}
    ],
    laporan: [
      {emoji:'ğŸ“Š', judul:'Laporan Kependudukan Tahunan', desc:'Rekapitulasi data kependudukan Kalurahan Kedungsari tahun 2024 meliputi jumlah jiwa, KK, mutasi, dan demografi.', tgl:'Des 2024', btn:'Unduh PDF', url:''},
      {emoji:'ğŸ˜ï¸', judul:'Profil Kalurahan 2025', desc:'Dokumen profil lengkap meliputi potensi wilayah, sumber daya alam, infrastruktur, dan data sosial ekonomi.', tgl:'Jan 2025', btn:'Unduh PDF', url:''},
      {emoji:'ğŸ’µ', judul:'APBKal Tahun 2025', desc:'Anggaran Pendapatan dan Belanja Kalurahan tahun anggaran 2025 secara transparan dan akuntabel.', tgl:'Jan 2025', btn:'Lihat Detail', url:''},
      {emoji:'ğŸ¥', judul:'Data DTKS 2024', desc:'Data Terpadu Kesejahteraan Sosial â€“ daftar warga penerima manfaat berbagai program bantuan sosial.', tgl:'Nov 2024', btn:'Unduh', url:''},
      {emoji:'ğŸ—“ï¸', judul:'RPJMKal 2022â€“2028', desc:'Rencana Pembangunan Jangka Menengah Kalurahan periode 2022â€“2028 sebagai panduan arah pembangunan desa.', tgl:'2022', btn:'Lihat', url:''},
      {emoji:'ğŸ“', judul:'Monografi Kalurahan', desc:'Rekaman sejarah, potensi, dan perkembangan Kalurahan Kedungsari dari masa ke masa secara komprehensif.', tgl:'2024', btn:'Baca', url:''}
    ],
    kegiatan: [
      {emoji:'ğŸŒ¾', judul:'Panen Raya Bersama', tgl:'April 2025 Â· Kelompok Tani'},
      {emoji:'ğŸ’‰', judul:'Vaksinasi Polio', tgl:'Maret 2025 Â· Puskesmas'},
      {emoji:'ğŸ­', judul:'Festival Budaya Desa', tgl:'Feb 2025 Â· Tahunan'},
      {emoji:'ğŸ“š', judul:'Sosialisasi Adminduk', tgl:'Jan 2025 Â· Online'},
      {emoji:'ğŸ“', judul:'Pelatihan UMKM Digital', tgl:'Des 2024 Â· Balai Desa'},
      {emoji:'ğŸ†', judul:'Lomba Desa Sehat', tgl:'Nov 2024 Â· Kecamatan'}
    ]
  };

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     STORAGE HELPERS
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  const STORE_KEY = 'rumahData_kedungsari_v2';
  function loadData() {
    try {
      const raw = localStorage.getItem(STORE_KEY);
      return raw ? JSON.parse(raw) : JSON.parse(JSON.stringify(DEFAULT_DATA));
    } catch(e) { return JSON.parse(JSON.stringify(DEFAULT_DATA)); }
  }
  function saveData(d) {
    localStorage.setItem(STORE_KEY, JSON.stringify(d));
    showToast('âœ… Data berhasil disimpan!');
  }
  let DATA = loadData();

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     RENDER FUNCTIONS
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  function renderAll() {
    renderStatistik();
    renderPengumuman();
    renderLaporan();
    renderKegiatan();
  }

  function renderStatistik() {
    const s = DATA.statistik;
    setTxt('hTotalPenduduk', s.totalPenduduk);
    setTxt('hTotalKK', s.totalKK);
    setTxt('hTotalDusun', s.totalDusun);
    setTxt('hTahunData', s.tahunData);
    setTxt('d1', s.d1); setTxt('d1s', s.d1s);
    setTxt('d2', s.d2); setTxt('d2s', s.d2s);
    setTxt('d3', s.d3); setTxt('d3s', s.d3s);
    setTxt('d4', s.d4); setTxt('d4s', s.d4s);
    setTxt('d5', s.d5); setTxt('d5s', s.d5s);
    setTxt('d6', s.d6); setTxt('d6s', s.d6s);
    ['tk1','tk1b','tk2','tk2b','tk3','tk3b','tk4','tk4b','tk5','tk5b','tk6','tk6b'].forEach(id => {
      const base = id.replace('b','');
      const el = document.getElementById(id);
      if(el) el.textContent = s[base] || '';
    });
  }

  function renderPengumuman() {
    const list = document.getElementById('pengumumanList');
    if(!list) return;
    list.innerHTML = DATA.pengumuman.map(p => `
      <div class="pengumuman-item" tabindex="0">
        <div class="pengumuman-emoji">${p.emoji}</div>
        <div class="pengumuman-body">
          <h4>${escHtml(p.judul)}</h4>
          <p>${escHtml(p.isi)}</p>
        </div>
        <span class="pengumuman-date">${escHtml(p.tgl)}</span>
      </div>`).join('');
    renderPengumumanAdmin();
  }

  function renderLaporan() {
    const grid = document.getElementById('reportsGrid');
    if(!grid) return;
    grid.innerHTML = DATA.laporan.map(l => `
      <div class="report-card" tabindex="0" ${l.url?'onclick="window.open(\''+l.url+'\',\'_blank\')"':''}>
        <div class="report-icon">${l.emoji}</div>
        <h3>${escHtml(l.judul)}</h3>
        <p>${escHtml(l.desc)}</p>
        <div class="report-meta">
          <span class="report-date">${escHtml(l.tgl)}</span>
          <button class="report-btn">${escHtml(l.btn)}</button>
        </div>
      </div>`).join('');
    renderLaporanAdmin();
  }

  function renderKegiatan() {
    const strip = document.getElementById('kegiatanStrip');
    if(!strip) return;
    strip.innerHTML = DATA.kegiatan.map(k => `
      <div class="kegiatan-card" onclick="openLightbox('${k.emoji}','${escHtml(k.judul)}','${escHtml(k.tgl)}')">
        <div class="kegiatan-img">${k.emoji}</div>
        <div class="kegiatan-info">
          <h4>${escHtml(k.judul)}</h4>
          <span>${escHtml(k.tgl)}</span>
        </div>
      </div>`).join('');
    renderKegiatanAdmin();
  }

  function setTxt(id, val) {
    const el = document.getElementById(id);
    if(el) el.textContent = val || '';
  }
  function escHtml(s) {
    return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     ADMIN LIST RENDERS
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  function renderPengumumanAdmin() {
    const el = document.getElementById('pengumumanAdminList');
    if(!el) return;
    el.innerHTML = DATA.pengumuman.map((p,i)=>`
      <div class="ap-list-item">
        <span style="font-size:1.4rem;flex-shrink:0">${p.emoji}</span>
        <div class="ap-list-body"><strong>${escHtml(p.judul)}</strong><span>${escHtml(p.tgl)}</span></div>
        <div class="ap-list-actions">
          <button class="ap-btn-edit" onclick="editPengumuman(${i})">Edit</button>
          <button class="ap-btn-del" onclick="delPengumuman(${i})">Hapus</button>
        </div>
      </div>`).join('');
  }
  function renderLaporanAdmin() {
    const el = document.getElementById('laporanAdminList');
    if(!el) return;
    el.innerHTML = DATA.laporan.map((l,i)=>`
      <div class="ap-list-item">
        <span style="font-size:1.4rem;flex-shrink:0">${l.emoji}</span>
        <div class="ap-list-body"><strong>${escHtml(l.judul)}</strong><span>${escHtml(l.tgl)}</span></div>
        <div class="ap-list-actions">
          <button class="ap-btn-edit" onclick="editLaporan(${i})">Edit</button>
          <button class="ap-btn-del" onclick="delLaporan(${i})">Hapus</button>
        </div>
      </div>`).join('');
  }
  function renderKegiatanAdmin() {
    const el = document.getElementById('kegiatanAdminList');
    if(!el) return;
    el.innerHTML = DATA.kegiatan.map((k,i)=>`
      <div class="ap-list-item">
        <span style="font-size:1.4rem;flex-shrink:0">${k.emoji}</span>
        <div class="ap-list-body"><strong>${escHtml(k.judul)}</strong><span>${escHtml(k.tgl)}</span></div>
        <div class="ap-list-actions">
          <button class="ap-btn-edit" onclick="editKegiatan(${i})">Edit</button>
          <button class="ap-btn-del" onclick="delKegiatan(${i})">Hapus</button>
        </div>
      </div>`).join('');
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     SAVE STATISTIK
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  function saveStatistik() {
    const fields = ['totalPenduduk','totalKK','totalDusun','tahunData','d1','d1s','d2','d2s','d3','d3s','d4','d4s','d5','d5s','d6','d6s','tk1','tk2','tk3','tk4','tk5','tk6'];
    fields.forEach(k => {
      const el = document.getElementById('f_'+k);
      if(el && el.value.trim()) DATA.statistik[k] = el.value.trim();
    });
    saveData(DATA);
    renderStatistik();
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     PENGUMUMAN CRUD
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  function addPengumuman() {
    document.getElementById('f_pIdx').value = -1;
    document.getElementById('f_pEmoji').value = 'ğŸ“£';
    document.getElementById('f_pJudul').value = '';
    document.getElementById('f_pIsi').value = '';
    document.getElementById('f_pTgl').value = '';
    document.getElementById('pengFormLabel').textContent = 'Tambah Pengumuman Baru';
    document.getElementById('pengumumanForm').style.display = 'block';
  }
  function editPengumuman(i) {
    const p = DATA.pengumuman[i];
    document.getElementById('f_pIdx').value = i;
    document.getElementById('f_pEmoji').value = p.emoji;
    document.getElementById('f_pJudul').value = p.judul;
    document.getElementById('f_pIsi').value = p.isi;
    document.getElementById('f_pTgl').value = p.tgl;
    document.getElementById('pengFormLabel').textContent = 'Edit Pengumuman';
    document.getElementById('pengumumanForm').style.display = 'block';
  }
  function savePengumuman() {
    const idx = parseInt(document.getElementById('f_pIdx').value);
    const obj = {
      emoji: document.getElementById('f_pEmoji').value || 'ğŸ“£',
      judul: document.getElementById('f_pJudul').value,
      isi:   document.getElementById('f_pIsi').value,
      tgl:   document.getElementById('f_pTgl').value
    };
    if(!obj.judul) { alert('Judul tidak boleh kosong'); return; }
    if(idx === -1) DATA.pengumuman.unshift(obj);
    else DATA.pengumuman[idx] = obj;
    saveData(DATA); renderPengumuman();
    document.getElementById('pengumumanForm').style.display = 'none';
  }
  function delPengumuman(i) {
    if(!confirm('Hapus pengumuman ini?')) return;
    DATA.pengumuman.splice(i,1);
    saveData(DATA); renderPengumuman();
  }
  function cancelPengumuman() { document.getElementById('pengumumanForm').style.display='none'; }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     LAPORAN CRUD
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  function addLaporan() {
    document.getElementById('f_lIdx').value = -1;
    document.getElementById('f_lEmoji').value = 'ğŸ“„';
    document.getElementById('f_lJudul').value = '';
    document.getElementById('f_lDesc').value = '';
    document.getElementById('f_lTgl').value = '';
    document.getElementById('f_lBtn').value = 'Unduh PDF';
    document.getElementById('f_lUrl').value = '';
    document.getElementById('lapFormLabel').textContent = 'Tambah Laporan Baru';
    document.getElementById('laporanForm').style.display = 'block';
  }
  function editLaporan(i) {
    const l = DATA.laporan[i];
    document.getElementById('f_lIdx').value = i;
    document.getElementById('f_lEmoji').value = l.emoji;
    document.getElementById('f_lJudul').value = l.judul;
    document.getElementById('f_lDesc').value = l.desc;
    document.getElementById('f_lTgl').value = l.tgl;
    document.getElementById('f_lBtn').value = l.btn;
    document.getElementById('f_lUrl').value = l.url||'';
    document.getElementById('lapFormLabel').textContent = 'Edit Laporan';
    document.getElementById('laporanForm').style.display = 'block';
  }
  function saveLaporan() {
    const idx = parseInt(document.getElementById('f_lIdx').value);
    const obj = {
      emoji: document.getElementById('f_lEmoji').value||'ğŸ“„',
      judul: document.getElementById('f_lJudul').value,
      desc:  document.getElementById('f_lDesc').value,
      tgl:   document.getElementById('f_lTgl').value,
      btn:   document.getElementById('f_lBtn').value||'Lihat',
      url:   document.getElementById('f_lUrl').value
    };
    if(!obj.judul) { alert('Judul tidak boleh kosong'); return; }
    if(idx===-1) DATA.laporan.push(obj);
    else DATA.laporan[idx] = obj;
    saveData(DATA); renderLaporan();
    document.getElementById('laporanForm').style.display = 'none';
  }
  function delLaporan(i) {
    if(!confirm('Hapus laporan ini?')) return;
    DATA.laporan.splice(i,1);
    saveData(DATA); renderLaporan();
  }
  function cancelLaporan() { document.getElementById('laporanForm').style.display='none'; }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     KEGIATAN CRUD
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  function addKegiatan() {
    document.getElementById('f_kIdx').value = -1;
    document.getElementById('f_kEmoji').value = 'ğŸ‰';
    document.getElementById('f_kJudul').value = '';
    document.getElementById('f_kTgl').value = '';
    document.getElementById('kegFormLabel').textContent = 'Tambah Kegiatan Baru';
    document.getElementById('kegiatanForm').style.display = 'block';
  }
  function editKegiatan(i) {
    const k = DATA.kegiatan[i];
    document.getElementById('f_kIdx').value = i;
    document.getElementById('f_kEmoji').value = k.emoji;
    document.getElementById('f_kJudul').value = k.judul;
    document.getElementById('f_kTgl').value = k.tgl;
    document.getElementById('kegFormLabel').textContent = 'Edit Kegiatan';
    document.getElementById('kegiatanForm').style.display = 'block';
  }
  function saveKegiatan() {
    const idx = parseInt(document.getElementById('f_kIdx').value);
    const obj = {
      emoji: document.getElementById('f_kEmoji').value||'ğŸ‰',
      judul: document.getElementById('f_kJudul').value,
      tgl:   document.getElementById('f_kTgl').value
    };
    if(!obj.judul) { alert('Nama kegiatan tidak boleh kosong'); return; }
    if(idx===-1) DATA.kegiatan.unshift(obj);
    else DATA.kegiatan[idx] = obj;
    saveData(DATA); renderKegiatan();
    document.getElementById('kegiatanForm').style.display = 'none';
  }
  function delKegiatan(i) {
    if(!confirm('Hapus kegiatan ini?')) return;
    DATA.kegiatan.splice(i,1);
    saveData(DATA); renderKegiatan();
  }
  function cancelKegiatan() { document.getElementById('kegiatanForm').style.display='none'; }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     PIN SYSTEM
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  const ADMIN_PIN = '1234'; // â† Ganti PIN di sini
  let pinBuffer = '';

  function openPinModal() {
    pinBuffer = '';
    updatePinDots();
    document.getElementById('pinError').textContent = '';
    document.getElementById('pinModal').classList.add('active');
  }
  function closePinModal() {
    pinBuffer = '';
    document.getElementById('pinModal').classList.remove('active');
  }
  function pinInput(val) {
    if(val === 'back') { pinBuffer = pinBuffer.slice(0,-1); updatePinDots(); return; }
    if(val === 'clr')  { pinBuffer = ''; updatePinDots(); return; }
    if(pinBuffer.length >= 4) return;
    pinBuffer += val;
    updatePinDots();
    if(pinBuffer.length === 4) setTimeout(checkPin, 150);
  }
  function updatePinDots() {
    for(let i=0;i<4;i++) {
      document.getElementById('pd'+i).classList.toggle('filled', i < pinBuffer.length);
    }
  }
  function checkPin() {
    if(pinBuffer === ADMIN_PIN) {
      closePinModal();
      openAdmin();
    } else {
      document.getElementById('pinError').textContent = 'âŒ PIN salah. Coba lagi.';
      pinBuffer = '';
      updatePinDots();
      // shake animation
      const box = document.querySelector('.pin-box');
      box.style.transform = 'translateX(-6px)';
      setTimeout(()=>box.style.transform='translateX(6px)',80);
      setTimeout(()=>box.style.transform='translateX(0)',160);
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     ADMIN PANEL
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  function openAdmin() {
    // Fill forms with current data
    const s = DATA.statistik;
    ['totalPenduduk','totalKK','totalDusun','tahunData','d1','d1s','d2','d2s','d3','d3s','d4','d4s','d5','d5s','d6','d6s','tk1','tk2','tk3','tk4','tk5','tk6'].forEach(k => {
      const el = document.getElementById('f_'+k);
      if(el) el.value = s[k]||'';
    });
    renderPengumumanAdmin();
    renderLaporanAdmin();
    renderKegiatanAdmin();
    document.getElementById('adminPanel').classList.add('open');
    document.getElementById('adminBadge').classList.add('visible');
    document.body.style.overflow = 'hidden';
  }
  function closeAdmin() {
    document.getElementById('adminPanel').classList.remove('open');
    document.body.style.overflow = '';
  }
  function adminLogout() {
    closeAdmin();
    document.getElementById('adminBadge').classList.remove('visible');
    showToast('ğŸ‘‹ Berhasil keluar dari mode admin');
  }
  function switchTab(name, btn) {
    document.querySelectorAll('.ap-tab').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('.ap-panel').forEach(p=>p.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('tab-'+name).classList.add('active');
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     HIDDEN TRIGGER: 5 clicks top-right
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  let triggerCount = 0, triggerTimer;
  document.getElementById('adminTrigger').addEventListener('click', function() {
    triggerCount++;
    clearTimeout(triggerTimer);
    triggerTimer = setTimeout(()=>triggerCount=0, 2000);
    if(triggerCount >= 5) { triggerCount=0; openPinModal(); }
  });

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     TOAST
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  function showToast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(()=>t.classList.remove('show'), 2500);
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     LIGHTBOX
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  function openLightbox(emoji, title, desc) {
    document.getElementById('lightboxEmoji').textContent = emoji;
    document.getElementById('lightboxCaption').innerHTML = '<strong style="color:#FDFAF4;font-size:1rem">'+title+'</strong><br>'+desc;
    document.getElementById('lightbox').classList.add('active');
    document.body.style.overflow = 'hidden';
  }
  function closeLightbox(e) {
    if(!e || e.target===document.getElementById('lightbox') || (e.currentTarget&&e.currentTarget.classList.contains('lightbox-close'))) {
      document.getElementById('lightbox').classList.remove('active');
      document.body.style.overflow = '';
    }
  }
  document.addEventListener('keydown', e=>{
    if(e.key==='Escape') {
      closeLightbox({target:document.getElementById('lightbox')});
      closePinModal();
      closeAdmin();
    }
  });

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     BACK TO TOP
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  const btt = document.getElementById('backToTop');
  window.addEventListener('scroll', ()=>btt.classList.toggle('show', scrollY>320));
  btt.addEventListener('click', ()=>window.scrollTo({top:0,behavior:'smooth'}));

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     FADE IN OBSERVER
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  const obs = new IntersectionObserver(entries=>{
    entries.forEach(e=>{ if(e.isIntersecting){e.target.classList.add('visible');obs.unobserve(e.target);} });
  },{threshold:.08});
  document.querySelectorAll('.fade-in').forEach(el=>obs.observe(el));

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     PHOTO FRAMES KEYBOARD
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  document.querySelectorAll('.photo-frame').forEach(f=>{
    f.setAttribute('tabindex','0');f.setAttribute('role','button');
    f.addEventListener('keydown',e=>{ if(e.key==='Enter'||e.key===' '){e.preventDefault();f.click();} });
  });

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     INIT
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  renderAll();

  </script>
</body>
</html>
