<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Rumah Data Kependudukan â€“ Kalurahan Kedungsari</title>
  <meta name="description" content="Rumah Data Kependudukan Kalurahan Kedungsari â€“ Pusat informasi data kependudukan, demografi, dan layanan administrasi warga secara transparan dan terbuka."/>
  <meta name="keywords" content="Rumah Data, Kependudukan, Kalurahan Kedungsari, Data Demografi, Administrasi Desa, Yogyakarta, Open Data"/>
  <meta name="author" content="Kalurahan Kedungsari"/>
  <meta name="robots" content="index, follow"/>
  <meta name="geo.region" content="ID-YO"/>
  <meta property="og:type" content="website"/>
  <meta property="og:title" content="Rumah Data Kependudukan â€“ Kalurahan Kedungsari"/>
  <meta property="og:description" content="Pusat informasi data kependudukan Kalurahan Kedungsari secara transparan dan terbuka."/>
  <meta property="og:locale" content="id_ID"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <link rel="canonical" href="https://kalurahan-kedungsari.github.io/"/>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"GovernmentOrganization","name":"Rumah Data Kependudukan Kalurahan Kedungsari","url":"https://kalurahan-kedungsari.github.io/","address":{"@type":"PostalAddress","addressLocality":"Kedungsari","addressRegion":"Yogyakarta","addressCountry":"ID"}}</script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500;600&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet"/>
<style>
:root{
  --cream:#F5EFE0;--parchment:#EDE3CC;--brown:#3D2B1F;--brown-mid:#6B4C35;
  --brown-lite:#A07850;--green:#2D5016;--green-mid:#4A7C28;--green-lite:#7FB347;
  --gold:#C8922A;--gold-lite:#E8B84B;--red:#8B2020;--teal:#1A5F6A;
  --white:#FDFAF4;--shadow:rgba(61,43,31,.18);
  --r-sm:6px;--r-md:12px;--r-lg:20px;--tr:all .28s cubic-bezier(.4,0,.2,1);
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:'DM Sans',sans-serif;background:var(--cream);color:var(--brown);overflow-x:hidden;min-height:100vh}
body::before{content:'';position:fixed;inset:0;background-image:radial-gradient(circle at 15% 15%,rgba(200,146,42,.08) 0%,transparent 55%),radial-gradient(circle at 85% 80%,rgba(45,80,22,.07) 0%,transparent 55%),url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23C8922A' fill-opacity='0.04'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/svg%3E");pointer-events:none;z-index:0}

/* HEADER */
header{position:relative;z-index:10;background:linear-gradient(135deg,var(--green) 0%,#1e3a0e 60%,var(--brown) 100%);overflow:hidden}
header::after{content:'';position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M40 0 L80 40 L40 80 L0 40 Z' fill='rgba(255,255,255,0.03)'/%3E%3C/svg%3E") repeat;pointer-events:none}
/* FIXED bukan absolute - agar tidak dipotong overflow:hidden dari header */
#adminTrigger{position:fixed;top:0;right:0;width:80px;height:80px;z-index:500;background:transparent;border:none;outline:none;cursor:default;-webkit-tap-highlight-color:transparent;user-select:none;touch-action:manipulation}
.header-inner{position:relative;z-index:2;max-width:1200px;margin:0 auto;padding:32px 24px 40px;display:flex;flex-direction:column;align-items:center;text-align:center;gap:16px}
.header-badge{display:inline-flex;align-items:center;gap:8px;background:rgba(200,146,42,.25);border:1px solid rgba(200,146,42,.5);border-radius:100px;padding:6px 16px;font-family:'DM Mono',monospace;font-size:.72rem;color:var(--gold-lite);letter-spacing:.1em;text-transform:uppercase;animation:fadeDown .6s ease both}
.header-logo{font-size:3.2rem;animation:fadeDown .5s .1s ease both}
.header-title{font-family:'Playfair Display',serif;font-weight:900;font-size:clamp(1.9rem,5vw,3.4rem);color:var(--white);line-height:1.12;animation:fadeDown .5s .2s ease both}
.header-title span{color:var(--gold-lite);display:block}
.header-subtitle{font-size:.95rem;color:rgba(253,250,244,.72);max-width:520px;line-height:1.65;animation:fadeDown .5s .3s ease both}
.header-stats-bar{display:flex;gap:24px;flex-wrap:wrap;justify-content:center;margin-top:8px;animation:fadeDown .5s .4s ease both}
.stat-chip{background:rgba(255,255,255,.1);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.15);border-radius:var(--r-md);padding:10px 18px;text-align:center}
.stat-chip .num{font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:700;color:var(--gold-lite);display:block}
.stat-chip .label{font-size:.72rem;color:rgba(253,250,244,.7);text-transform:uppercase;letter-spacing:.08em}

/* TICKER */
.ticker-bar{position:relative;z-index:10;background:var(--gold);padding:7px 0;overflow:hidden}
.ticker-content{display:flex;gap:64px;white-space:nowrap;animation:tickerScroll 28s linear infinite;font-family:'DM Mono',monospace;font-size:.75rem;color:var(--brown);font-weight:500;padding:0 24px}
@keyframes tickerScroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

/* MAIN */
main{position:relative;z-index:1;max-width:1280px;margin:0 auto;padding:40px 20px 60px}
.section-header{display:flex;align-items:baseline;gap:14px;margin-bottom:28px}
.section-title{font-family:'Playfair Display',serif;font-size:clamp(1.25rem,3vw,1.6rem);font-weight:700;color:var(--brown)}
.section-line{flex:1;height:2px;background:linear-gradient(to right,var(--brown-lite),transparent);border-radius:2px}
.section-tag{font-family:'DM Mono',monospace;font-size:.68rem;color:var(--brown-lite);text-transform:uppercase;letter-spacing:.12em}

/* DASHBOARD */
.dashboard-row{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;margin-bottom:64px}
.dash-card{background:var(--white);border-radius:var(--r-md);padding:22px 20px;border:1px solid rgba(61,43,31,.08);box-shadow:0 2px 8px var(--shadow);transition:var(--tr);position:relative;overflow:hidden}
.dash-card::after{content:attr(data-emoji);position:absolute;right:12px;bottom:8px;font-size:2.8rem;opacity:.12;pointer-events:none}
.dash-card:hover{transform:translateY(-2px);box-shadow:0 8px 24px var(--shadow)}
.dash-card .dc-label{font-size:.72rem;text-transform:uppercase;letter-spacing:.1em;color:var(--brown-lite);margin-bottom:6px}
.dash-card .dc-value{font-family:'Playfair Display',serif;font-size:2rem;font-weight:700;color:var(--brown);line-height:1}
.dash-card .dc-sub{font-size:.74rem;color:var(--brown-lite);margin-top:4px}
.dc-green{border-left:3px solid var(--green-mid)}.dc-gold{border-left:3px solid var(--gold)}.dc-red{border-left:3px solid var(--red)}.dc-teal{border-left:3px solid var(--teal)}

/* PHOTO WALL */
.photo-wall{columns:4 240px;gap:16px;margin-bottom:64px}
.photo-frame{break-inside:avoid;margin-bottom:16px;background:var(--white);border-radius:var(--r-md);overflow:hidden;box-shadow:0 2px 12px var(--shadow);cursor:pointer;transition:var(--tr);position:relative}
.photo-frame:hover{transform:translateY(-4px) scale(1.015);box-shadow:0 12px 32px var(--shadow),0 0 0 1px rgba(200,146,42,.25)}
.photo-frame:hover .frame-overlay{opacity:1}
.emoji-frame{aspect-ratio:4/3;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;background:linear-gradient(135deg,var(--parchment),var(--cream));border:2px dashed rgba(160,120,80,.35)}
.emoji-frame .big-emoji{font-size:2.8rem;line-height:1}
.emoji-frame .frame-caption{font-size:.78rem;color:var(--brown-lite);text-align:center;padding:0 12px;font-style:italic}
.frame-overlay{position:absolute;inset:0;background:linear-gradient(to top,rgba(61,43,31,.82),transparent 55%);opacity:0;transition:var(--tr);display:flex;align-items:flex-end;padding:14px}
.frame-label{padding:10px 12px 12px;border-top:1px solid rgba(61,43,31,.06)}
.frame-label strong{display:block;font-size:.82rem;font-weight:600;color:var(--brown);margin-bottom:2px}
.frame-label span{font-size:.72rem;color:var(--brown-lite)}
.frame-tall .emoji-frame{aspect-ratio:3/4}

/* REPORTS */
.reports-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-bottom:64px}
.report-card{background:var(--white);border-radius:var(--r-md);border:1px solid rgba(61,43,31,.09);padding:20px;display:flex;flex-direction:column;gap:12px;box-shadow:0 2px 8px var(--shadow);transition:var(--tr);cursor:pointer;position:relative;overflow:hidden}
.report-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--green),var(--gold));transform:scaleX(0);transform-origin:left;transition:transform .3s ease}
.report-card:hover::before{transform:scaleX(1)}
.report-card:hover{transform:translateY(-3px);box-shadow:0 10px 28px var(--shadow)}
.report-icon{font-size:1.9rem}
.report-card h3{font-family:'Playfair Display',serif;font-size:1.05rem;color:var(--brown);font-weight:700}
.report-card p{font-size:.82rem;color:var(--brown-lite);line-height:1.6;flex:1}
.report-meta{display:flex;justify-content:space-between;align-items:center;padding-top:12px;border-top:1px solid rgba(61,43,31,.07)}
.report-date{font-family:'DM Mono',monospace;font-size:.7rem;color:var(--brown-lite)}
.report-btn{font-size:.74rem;font-weight:600;color:var(--green);background:rgba(45,80,22,.08);border:none;padding:5px 12px;border-radius:100px;cursor:pointer;transition:var(--tr)}
.report-btn:hover{background:var(--green);color:var(--white)}

/* KEGIATAN */
.kegiatan-strip{display:flex;gap:16px;overflow-x:auto;padding-bottom:12px;margin-bottom:64px;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch}
.kegiatan-strip::-webkit-scrollbar{height:5px}.kegiatan-strip::-webkit-scrollbar-track{background:rgba(61,43,31,.07);border-radius:4px}.kegiatan-strip::-webkit-scrollbar-thumb{background:var(--brown-lite);border-radius:4px}
.kegiatan-card{flex:0 0 260px;scroll-snap-align:start;background:var(--white);border-radius:var(--r-md);overflow:hidden;box-shadow:0 2px 10px var(--shadow);transition:var(--tr);cursor:pointer}
.kegiatan-card:hover{transform:translateY(-3px) scale(1.015);box-shadow:0 10px 28px var(--shadow)}
.kegiatan-img{height:160px;background:linear-gradient(135deg,var(--parchment),var(--cream));display:flex;align-items:center;justify-content:center;font-size:3rem;border-bottom:2px dashed rgba(160,120,80,.3)}
.kegiatan-info{padding:14px}
.kegiatan-info h4{font-weight:600;font-size:.88rem;color:var(--brown);margin-bottom:4px}
.kegiatan-info span{font-size:.74rem;color:var(--brown-lite)}

/* PENGUMUMAN */
.pengumuman-list{display:flex;flex-direction:column;gap:14px;margin-bottom:64px}
.pengumuman-item{background:var(--white);border-radius:var(--r-md);padding:16px 20px;display:flex;gap:16px;align-items:flex-start;box-shadow:0 2px 8px var(--shadow);border:1px solid rgba(61,43,31,.07);transition:var(--tr)}
.pengumuman-item:hover{transform:translateX(4px);border-left:3px solid var(--gold)}
.pengumuman-emoji{font-size:1.6rem;flex-shrink:0;margin-top:2px}
.pengumuman-body h4{font-weight:600;font-size:.9rem;color:var(--brown);margin-bottom:4px}
.pengumuman-body p{font-size:.8rem;color:var(--brown-lite);line-height:1.55}
.pengumuman-date{font-family:'DM Mono',monospace;font-size:.68rem;color:var(--brown-lite);white-space:nowrap;margin-left:auto;flex-shrink:0}

/* LIGHTBOX */
.lightbox{display:none;position:fixed;inset:0;z-index:9999;background:rgba(20,12,5,.9);backdrop-filter:blur(10px);align-items:center;justify-content:center;padding:24px}
.lightbox.active{display:flex}
.lightbox-inner{max-width:900px;max-height:90vh;width:100%;position:relative;animation:lbIn .25s ease}
@keyframes lbIn{from{transform:scale(.88);opacity:0}to{transform:scale(1);opacity:1}}
.lightbox-emoji-big{width:100%;min-height:280px;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:5rem;gap:16px;background:rgba(245,239,224,.05);border-radius:var(--r-md)}
.lightbox-emoji-big p{font-size:1rem;color:rgba(253,250,244,.8);text-align:center;max-width:360px}
.lightbox-close{position:absolute;top:-14px;right:-14px;width:40px;height:40px;background:var(--gold);color:var(--brown);border:none;border-radius:50%;font-size:1.1rem;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:700;transition:var(--tr);box-shadow:0 4px 12px rgba(0,0,0,.35)}
.lightbox-close:hover{background:var(--gold-lite);transform:rotate(90deg)}

/* FOOTER */
footer{position:relative;z-index:10;background:linear-gradient(160deg,var(--brown) 0%,#1c110a 100%);color:rgba(253,250,244,.75);overflow:hidden}
footer::before{content:'';position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M40 0 L80 40 L40 80 L0 40 Z' fill='rgba(200,146,42,0.05)'/%3E%3C/svg%3E") repeat;pointer-events:none}
.footer-inner{position:relative;max-width:1200px;margin:0 auto;padding:48px 24px 0}
.footer-top{display:grid;grid-template-columns:1.5fr 1fr 1fr;gap:40px;margin-bottom:40px}
.footer-brand h2{font-family:'Playfair Display',serif;font-size:1.25rem;color:var(--white);margin-bottom:10px}
.footer-brand p{font-size:.82rem;line-height:1.7;color:rgba(253,250,244,.6);max-width:300px}
.footer-col h4{font-size:.8rem;text-transform:uppercase;letter-spacing:.12em;color:var(--gold-lite);margin-bottom:14px;font-weight:600}
.footer-col ul{list-style:none;display:flex;flex-direction:column;gap:8px}
.footer-col ul li a{color:rgba(253,250,244,.6);text-decoration:none;font-size:.82rem;transition:var(--tr);display:inline-flex;align-items:center;gap:6px}
.footer-col ul li a:hover{color:var(--gold-lite);transform:translateX(3px)}
.quick-access{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:var(--r-lg);padding:28px;margin-bottom:28px}
.qa-title{font-size:.78rem;text-transform:uppercase;letter-spacing:.12em;color:var(--gold-lite);margin-bottom:18px;font-weight:600}
.qa-buttons{display:flex;flex-wrap:wrap;gap:10px}
.qa-btn{display:inline-flex;align-items:center;gap:8px;padding:10px 18px;border-radius:100px;border:none;font-family:'DM Sans',sans-serif;font-size:.82rem;font-weight:600;cursor:pointer;text-decoration:none;transition:var(--tr)}
.qa-btn.primary{background:var(--gold);color:var(--brown)}.qa-btn.primary:hover{background:var(--gold-lite);transform:translateY(-2px)}
.qa-btn.secondary{background:rgba(255,255,255,.08);color:var(--white);border:1px solid rgba(255,255,255,.14)}.qa-btn.secondary:hover{background:rgba(255,255,255,.15);transform:translateY(-2px)}
.qa-btn.green{background:rgba(45,80,22,.7);color:var(--green-lite);border:1px solid rgba(127,179,71,.25)}.qa-btn.green:hover{background:var(--green-mid);color:var(--white);transform:translateY(-2px)}
.qa-btn.teal{background:rgba(26,95,106,.6);color:#7dd3dc;border:1px solid rgba(26,95,106,.8)}.qa-btn.teal:hover{background:var(--teal);color:var(--white);transform:translateY(-2px)}
.footer-bottom{border-top:1px solid rgba(255,255,255,.08);padding:18px 0;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px}
.footer-bottom p{font-size:.75rem;color:rgba(253,250,244,.4)}
.footer-bottom p span{color:var(--gold-lite)}
.footer-badge{display:inline-flex;align-items:center;gap:6px;font-family:'DM Mono',monospace;font-size:.68rem;color:rgba(253,250,244,.35);border:1px solid rgba(255,255,255,.1);padding:4px 10px;border-radius:100px}

/* BACK TO TOP */
#backToTop{position:fixed;bottom:28px;right:24px;width:46px;height:46px;background:var(--green);color:var(--white);border:none;border-radius:50%;font-size:1.1rem;cursor:pointer;box-shadow:0 4px 16px rgba(0,0,0,.28);display:flex;align-items:center;justify-content:center;opacity:0;transform:translateY(10px);transition:var(--tr);z-index:999}
#backToTop.show{opacity:1;transform:translateY(0)}
#backToTop:hover{background:var(--green-mid)}

@keyframes fadeDown{from{transform:translateY(-14px);opacity:0}to{transform:translateY(0);opacity:1}}
.fade-in{animation:fadeUp .6s ease both}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

/* â•â•â•â•â•â•â•â•â•â•â• ADMIN PANEL â•â•â•â•â•â•â•â•â•â•â• */
#pinModal{display:none;position:fixed;inset:0;z-index:99999;background:rgba(20,12,5,.93);backdrop-filter:blur(12px);align-items:center;justify-content:center;padding:16px}
#pinModal.active{display:flex}
.pin-box{background:var(--white);border-radius:var(--r-lg);padding:32px 28px;width:min(340px,100%);text-align:center;box-shadow:0 32px 80px rgba(0,0,0,.5);animation:lbIn .25s ease}
.pin-box h2{font-family:'Playfair Display',serif;font-size:1.35rem;color:var(--brown);margin-bottom:6px}
.pin-box p{font-size:.82rem;color:var(--brown-lite);margin-bottom:22px}
.pin-dots{display:flex;justify-content:center;gap:14px;margin-bottom:22px}
.pin-dot{width:14px;height:14px;border-radius:50%;background:rgba(61,43,31,.15);transition:var(--tr)}
.pin-dot.filled{background:var(--green)}
.pin-pad{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:12px}
.pin-key{background:var(--parchment);border:1px solid rgba(61,43,31,.12);border-radius:var(--r-md);padding:15px;font-family:'Playfair Display',serif;font-size:1.3rem;font-weight:700;color:var(--brown);cursor:pointer;transition:var(--tr);-webkit-tap-highlight-color:transparent;touch-action:manipulation}
.pin-key:hover,.pin-key:active{background:var(--gold);color:var(--white)}
.pin-key.del{font-size:1rem;font-family:'DM Sans',sans-serif}
.pin-error{font-size:.8rem;color:#c0392b;min-height:20px;margin-bottom:4px}
.pin-close-btn{background:none;border:none;font-size:.8rem;color:var(--brown-lite);cursor:pointer;text-decoration:underline}

/* Admin Panel Drawer */
#adminPanel{position:fixed;top:0;right:0;width:min(480px,100vw);height:100vh;height:100dvh;background:#271a10;z-index:88888;transform:translateX(100%);transition:transform .38s cubic-bezier(.4,0,.2,1);box-shadow:-8px 0 40px rgba(0,0,0,.5);display:flex;flex-direction:column;overflow:hidden}
#adminPanel.open{transform:translateX(0)}
.ap-header{background:linear-gradient(135deg,var(--green),#1a3309);padding:13px 16px;display:flex;align-items:center;gap:10px;flex-shrink:0}
.ap-header h2{font-family:'Playfair Display',serif;color:var(--white);font-size:.92rem;flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.ap-hbtns{display:flex;gap:8px;flex-shrink:0}
.ap-close{background:rgba(255,255,255,.12);border:none;color:var(--white);width:36px;height:36px;border-radius:50%;cursor:pointer;font-size:1rem;display:flex;align-items:center;justify-content:center;touch-action:manipulation;transition:var(--tr)}
.ap-close:hover{background:rgba(255,255,255,.28)}
.ap-logout-btn{background:rgba(139,32,32,.45);border:1px solid rgba(139,32,32,.6);color:#ffb3b3;font-size:.72rem;padding:6px 12px;border-radius:100px;cursor:pointer;font-family:'DM Sans',sans-serif;touch-action:manipulation;transition:var(--tr);white-space:nowrap}
.ap-logout-btn:hover{background:var(--red);color:#fff}
.ap-tabs{display:flex;background:rgba(0,0,0,.3);flex-shrink:0;overflow-x:auto}
.ap-tabs::-webkit-scrollbar{display:none}
.ap-tab{flex:1;min-width:66px;padding:10px 4px;background:none;border:none;color:rgba(253,250,244,.45);font-family:'DM Sans',sans-serif;font-size:.72rem;font-weight:600;cursor:pointer;border-bottom:2px solid transparent;white-space:nowrap;touch-action:manipulation;transition:var(--tr)}
.ap-tab.active{color:var(--gold-lite);border-bottom-color:var(--gold-lite);background:rgba(200,146,42,.1)}

/* KEY: ap-body must scroll independently */
.ap-body{flex:1 1 0;min-height:0;overflow-y:auto;-webkit-overflow-scrolling:touch;overscroll-behavior:contain}
.ap-body::-webkit-scrollbar{width:4px}
.ap-body::-webkit-scrollbar-thumb{background:rgba(160,120,80,.5);border-radius:4px}
.ap-panel{display:none;padding:14px 14px 100px}
.ap-panel.active{display:block}
.ap-group{margin-bottom:13px}
.ap-label{display:block;font-size:.68rem;text-transform:uppercase;letter-spacing:.1em;color:var(--gold-lite);margin-bottom:5px;font-weight:600}
.ap-input{width:100%;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.14);border-radius:var(--r-sm);padding:11px 12px;color:var(--white);font-family:'DM Sans',sans-serif;font-size:16px;transition:var(--tr)}
.ap-input:focus{outline:none;border-color:var(--gold-lite);background:rgba(255,255,255,.12)}
.ap-input::placeholder{color:rgba(253,250,244,.28)}
textarea.ap-input{resize:vertical;min-height:70px}
.ap-row2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.ap-divider{height:1px;background:rgba(255,255,255,.08);margin:14px 0}
.ap-section-label{font-size:.7rem;font-weight:600;color:rgba(253,250,244,.5);text-transform:uppercase;letter-spacing:.08em;margin-bottom:10px}

/* Sticky save footer */
.ap-form-footer{position:sticky;bottom:0;padding:10px 14px 14px;background:linear-gradient(to top,#271a10 65%,transparent);display:flex;gap:10px;margin:0 -14px}
.ap-save-btn{flex:1;padding:15px;background:linear-gradient(135deg,var(--green),var(--green-mid));color:var(--white);border:none;border-radius:var(--r-md);font-family:'DM Sans',sans-serif;font-size:.9rem;font-weight:700;cursor:pointer;touch-action:manipulation;min-height:52px;transition:var(--tr)}
.ap-save-btn:active{opacity:.82}
.ap-cancel-btn{padding:15px 14px;background:rgba(255,255,255,.08);color:rgba(253,250,244,.7);border:1px solid rgba(255,255,255,.13);border-radius:var(--r-md);font-family:'DM Sans',sans-serif;font-size:.86rem;cursor:pointer;touch-action:manipulation;min-height:52px;white-space:nowrap;transition:var(--tr)}
.ap-cancel-btn:hover{background:rgba(255,255,255,.15)}
.ap-add-btn{width:100%;padding:12px;background:rgba(200,146,42,.1);border:1px dashed rgba(200,146,42,.4);border-radius:var(--r-md);color:var(--gold-lite);font-family:'DM Sans',sans-serif;font-size:.84rem;cursor:pointer;transition:var(--tr);margin-bottom:12px;min-height:46px;touch-action:manipulation}
.ap-add-btn:hover{background:rgba(200,146,42,.2)}
.ap-list-item{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:var(--r-sm);padding:10px 12px;margin-bottom:8px;display:flex;gap:10px;align-items:center}
.ap-list-body{flex:1;min-width:0}
.ap-list-body strong{display:block;font-size:.83rem;color:var(--white);margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.ap-list-body span{font-size:.7rem;color:rgba(253,250,244,.45)}
.ap-list-actions{display:flex;gap:5px;flex-shrink:0}
.ap-edit,.ap-del{padding:7px 10px;border:none;border-radius:var(--r-sm);font-size:.72rem;font-weight:600;cursor:pointer;font-family:'DM Sans',sans-serif;min-height:34px;touch-action:manipulation;transition:var(--tr)}
.ap-edit{background:rgba(200,146,42,.2);color:var(--gold-lite)}.ap-edit:hover{background:var(--gold);color:var(--brown)}
.ap-del{background:rgba(139,32,32,.2);color:#ffb3b3}.ap-del:hover{background:var(--red);color:#fff}

#toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(12px);background:var(--green);color:var(--white);padding:10px 24px;border-radius:100px;font-size:.84rem;font-weight:600;z-index:99999;opacity:0;transition:all .3s ease;pointer-events:none;white-space:nowrap;box-shadow:0 4px 20px rgba(0,0,0,.3)}
#toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
#adminBadge{display:none;position:fixed;top:12px;left:50%;transform:translateX(-50%);z-index:88887;background:rgba(200,146,42,.95);color:var(--brown);padding:5px 18px;border-radius:100px;font-size:.72rem;font-weight:700;box-shadow:0 2px 12px rgba(0,0,0,.3);white-space:nowrap}
#adminBadge.visible{display:flex;align-items:center;gap:6px}

@media(max-width:900px){.photo-wall{columns:3 180px}.footer-top{grid-template-columns:1fr 1fr}.footer-brand{grid-column:1/-1}}
main section:nth-child(1){animation-delay:.05s}
main section:nth-child(2){animation-delay:.15s}
main section:nth-child(3){animation-delay:.25s}
main section:nth-child(4){animation-delay:.3s}
main section:nth-child(5){animation-delay:.35s}
@media(max-width:600px){.header-inner{padding:24px 16px 32px}.header-stats-bar{gap:12px}.stat-chip{padding:8px 14px}.stat-chip .num{font-size:1.2rem}.photo-wall{columns:2 140px;gap:10px}.reports-grid{grid-template-columns:1fr}.dashboard-row{grid-template-columns:1fr 1fr}.footer-top{grid-template-columns:1fr;gap:24px}.qa-buttons{gap:8px}.qa-btn{font-size:.78rem;padding:9px 14px}main{padding:24px 14px 48px}.footer-inner{padding:32px 16px 0}.ap-row2{grid-template-columns:1fr}}
@media(max-width:400px){.photo-wall{columns:2 120px;gap:8px}.dashboard-row{grid-template-columns:1fr}}
</style>
</head>
<body>

<header role="banner">
  <button id="adminTrigger" aria-hidden="true" tabindex="-1"></button>
  <div class="header-inner">
    <div class="header-badge">ğŸ‡®ğŸ‡© &nbsp; Kalurahan Kedungsari &nbsp;Â·&nbsp; Pemerintahan Desa</div>
    <div class="header-logo">ğŸ›ï¸</div>
    <h1 class="header-title">Rumah Data<span>Kependudukan</span></h1>
    <p class="header-subtitle">Pusat informasi data kependudukan, demografi, dan layanan administrasi warga Kalurahan Kedungsari yang transparan, terbuka, dan mudah diakses.</p>
    <div class="header-stats-bar">
      <div class="stat-chip"><span class="num" id="hP">3.847</span><span class="label">Total Penduduk</span></div>
      <div class="stat-chip"><span class="num" id="hK">1.142</span><span class="label">Kepala Keluarga</span></div>
      <div class="stat-chip"><span class="num" id="hD">5</span><span class="label">Dusun</span></div>
      <div class="stat-chip"><span class="num" id="hT">2025</span><span class="label">Tahun Data</span></div>
    </div>
  </div>
</header>

<div class="ticker-bar" aria-hidden="true">
  <div class="ticker-content">
    <span>ğŸ“… Data diperbarui: <span id="tk1">Januari 2025</span></span>
    <span>ğŸ‘¥ Laki-laki: <span id="tk2">1.921</span> | Perempuan: <span id="tk3">1.926</span></span>
    <span>ğŸ“Š Kepadatan: <span id="tk4">485</span> jiwa/kmÂ²</span>
    <span>ğŸ“ Melek Huruf: <span id="tk5">98,4</span>%</span>
    <span>ğŸ’¼ Partisipasi Kerja: <span id="tk6">72,1</span>%</span>
    <span>ğŸ“… Data diperbarui: <span id="tk1b">Januari 2025</span></span>
    <span>ğŸ‘¥ Laki-laki: <span id="tk2b">1.921</span> | Perempuan: <span id="tk3b">1.926</span></span>
    <span>ğŸ“Š Kepadatan: <span id="tk4b">485</span> jiwa/kmÂ²</span>
    <span>ğŸ“ Melek Huruf: <span id="tk5b">98,4</span>%</span>
    <span>ğŸ’¼ Partisipasi Kerja: <span id="tk6b">72,1</span>%</span>
  </div>
</div>

<main id="main">
  <section class="fade-in">
    <div class="section-header"><h2 class="section-title">ğŸ“ˆ Statistik Kependudukan</h2><div class="section-line"></div><span class="section-tag">Live Data</span></div>
    <div class="dashboard-row">
      <div class="dash-card dc-green" data-emoji="ğŸ‘¨"><div class="dc-label">Penduduk Laki-laki</div><div class="dc-value" id="d1">1.921</div><div class="dc-sub" id="d1s">49,9% dari total</div></div>
      <div class="dash-card dc-red"   data-emoji="ğŸ‘©"><div class="dc-label">Penduduk Perempuan</div><div class="dc-value" id="d2">1.926</div><div class="dc-sub" id="d2s">50,1% dari total</div></div>
      <div class="dash-card dc-gold"  data-emoji="ğŸ§’"><div class="dc-label">Usia 0â€“14 tahun</div><div class="dc-value" id="d3">812</div><div class="dc-sub" id="d3s">21,1% dari total</div></div>
      <div class="dash-card dc-teal"  data-emoji="ğŸ‘´"><div class="dc-label">Usia 60+ tahun</div><div class="dc-value" id="d4">348</div><div class="dc-sub" id="d4s">9,0% dari total</div></div>
      <div class="dash-card dc-green" data-emoji="ğŸ’"><div class="dc-label">Status Kawin</div><div class="dc-value" id="d5">2.104</div><div class="dc-sub" id="d5s">warga berstatus menikah</div></div>
      <div class="dash-card dc-gold"  data-emoji="ğŸ“"><div class="dc-label">Lulus SMA/SMK</div><div class="dc-value" id="d6">1.238</div><div class="dc-sub" id="d6s">pendidikan terakhir</div></div>
    </div>
  </section>

  <section id="foto" class="fade-in">
    <div class="section-header"><h2 class="section-title">ğŸ–¼ï¸ Dinding Foto</h2><div class="section-line"></div><span class="section-tag">Klik untuk Perbesar</span></div>
    <div class="photo-wall">
      <div class="photo-frame" onclick="openLB('ğŸ›ï¸','Balai Kalurahan','Pusat administrasi dan pelayanan warga')"><div class="emoji-frame"><span class="big-emoji">ğŸ›ï¸</span><span class="frame-caption">Balai Kalurahan Kedungsari</span></div><div class="frame-label"><strong>Balai Kalurahan</strong><span>Pusat Administrasi</span></div></div>
      <div class="photo-frame frame-tall" onclick="openLB('ğŸ¤','Musyawarah Kalurahan','Musrenbang perencanaan pembangunan warga')"><div class="emoji-frame"><span class="big-emoji">ğŸ¤</span><span class="frame-caption">Musyawarah Perencanaan</span></div><div class="frame-label"><strong>Musrenbang 2025</strong><span>Maret 2025</span></div></div>
      <div class="photo-frame" onclick="openLB('ğŸ‘¶','Kegiatan Posyandu','Pemeriksaan rutin balita dan ibu hamil')"><div class="emoji-frame"><span class="big-emoji">ğŸ‘¶</span><span class="frame-caption">Posyandu Balita</span></div><div class="frame-label"><strong>Posyandu Aktif</strong><span>4 pos tersebar</span></div></div>
      <div class="photo-frame" onclick="openLB('ğŸ› ï¸','Gotong Royong','Kebersihan lingkungan bersama warga')"><div class="emoji-frame"><span class="big-emoji">ğŸ› ï¸</span><span class="frame-caption">Gotong Royong Rutin</span></div><div class="frame-label"><strong>Kerja Bakti</strong><span>Setiap Minggu Ke-3</span></div></div>
      <div class="photo-frame frame-tall" onclick="openLB('ğŸ—ºï¸','Peta Wilayah','Pemetaan wilayah dan batas administrasi')"><div class="emoji-frame"><span class="big-emoji">ğŸ—ºï¸</span><span class="frame-caption">Peta Wilayah</span></div><div class="frame-label"><strong>Peta Desa</strong><span>5 Dusun</span></div></div>
      <div class="photo-frame" onclick="openLB('ğŸ«','Sarana Pendidikan','SD, SMP, dan PAUD di wilayah kalurahan')"><div class="emoji-frame"><span class="big-emoji">ğŸ«</span><span class="frame-caption">Sarana Pendidikan</span></div><div class="frame-label"><strong>Sekolah & PAUD</strong><span>3 unit pendidikan</span></div></div>
      <div class="photo-frame" onclick="openLB('ğŸªª','Pelayanan KTP','Layanan pembuatan dan perpanjangan KTP')"><div class="emoji-frame"><span class="big-emoji">ğŸªª</span><span class="frame-caption">Layanan KTP & KK</span></div><div class="frame-label"><strong>Adminduk Online</strong><span>Senin â€“ Jumat</span></div></div>
      <div class="photo-frame frame-tall" onclick="openLB('ğŸŒ¾','Lahan Pertanian','Lahan pertanian produktif kalurahan')"><div class="emoji-frame"><span class="big-emoji">ğŸŒ¾</span><span class="frame-caption">Lahan Pertanian Desa</span></div><div class="frame-label"><strong>Pertanian Aktif</strong><span>Â±12 ha lahan produktif</span></div></div>
      <div class="photo-frame" onclick="openLB('ğŸ›’','UMKM Warga','Pameran dan pemberdayaan UMKM lokal')"><div class="emoji-frame"><span class="big-emoji">ğŸ›’</span><span class="frame-caption">UMKM Kalurahan</span></div><div class="frame-label"><strong>85 UMKM Aktif</strong><span>Berbagai sektor usaha</span></div></div>
      <div class="photo-frame" onclick="openLB('âš½','Karang Taruna','Kegiatan kepemudaan dan olahraga')"><div class="emoji-frame"><span class="big-emoji">âš½</span><span class="frame-caption">Karang Taruna</span></div><div class="frame-label"><strong>Karang Taruna</strong><span>Kegiatan Kepemudaan</span></div></div>
      <div class="photo-frame frame-tall" onclick="openLB('ğŸ•Œ','Sarana Ibadah','Masjid dan mushola pusat kegiatan keagamaan')"><div class="emoji-frame"><span class="big-emoji">ğŸ•Œ</span><span class="frame-caption">Sarana Ibadah</span></div><div class="frame-label"><strong>7 Masjid/Mushola</strong><span>Tiap dusun</span></div></div>
      <div class="photo-frame" onclick="openLB('ğŸ’°','BUMKal Kedungsari','Badan Usaha Milik Kalurahan')"><div class="emoji-frame"><span class="big-emoji">ğŸ’°</span><span class="frame-caption">BUMKal Kedungsari</span></div><div class="frame-label"><strong>BUMKal Aktif</strong><span>Pengelola Aset Desa</span></div></div>
    </div>
  </section>

  <section id="laporan" class="fade-in">
    <div class="section-header"><h2 class="section-title">ğŸ“‹ Laporan & Dokumen</h2><div class="section-line"></div><span class="section-tag">Unduh</span></div>
    <div class="reports-grid" id="reportsGrid"></div>
  </section>

  <section id="kegiatan" class="fade-in">
    <div class="section-header"><h2 class="section-title">ğŸ‰ Kegiatan Kalurahan</h2><div class="section-line"></div><span class="section-tag">Terbaru</span></div>
    <div class="kegiatan-strip" id="kegiatanStrip"></div>
  </section>

  <section id="pengumuman" class="fade-in">
    <div class="section-header"><h2 class="section-title">ğŸ“¢ Pengumuman</h2><div class="section-line"></div><span class="section-tag">Terkini</span></div>
    <div class="pengumuman-list" id="pengumumanList"></div>
  </section>
</main>

<footer id="kontak">
  <div class="footer-inner">
    <div class="quick-access">
      <div class="qa-title">âš¡ Akses Cepat &amp; Layanan</div>
      <div class="qa-buttons">
        <a href="https://script.google.com/macros/s/AKfycbyDuaaBnxqMASEUBfbtD_UgL-JGyX9sHhTqQMa4LN9NHhRX-80Dsiwy71VIg8wx_VA/exec" class="qa-btn primary">ğŸ“Š Laporan Data</a>
        <a href="#foto" class="qa-btn secondary">ğŸ–¼ï¸ Galeri Foto</a>
        <a href="#pengumuman" class="qa-btn secondary">ğŸ“¢ Pengumuman</a>
        <a href="#kegiatan" class="qa-btn secondary">ğŸ‰ Kegiatan</a>
        <a href="https://dukcapil.jogjaprov.go.id/" target="_blank" rel="noopener" class="qa-btn green">ğŸªª Adminduk Online</a>
        <a href="https://sid.kemendesa.go.id/" target="_blank" rel="noopener" class="qa-btn green">ğŸ—‚ï¸ SID Kemendes</a>
        <a href="https://wa.me/628123456789" target="_blank" rel="noopener" class="qa-btn teal">ğŸ’¬ WhatsApp Desa</a>
        <a href="mailto:kedungsari@desa.id" class="qa-btn teal">âœ‰ï¸ Surel Kalurahan</a>
      </div>
    </div>
    <div class="footer-top">
      <div class="footer-brand">
        <h2>ğŸ›ï¸ Rumah Data Kependudukan<br>Kalurahan Kedungsari</h2>
        <p>Kami berkomitmen menyajikan data kependudukan yang akurat, transparan, dan mudah diakses demi terwujudnya pemerintahan desa yang bersih dan melayani.</p>
      </div>
      <div class="footer-col">
        <h4>Navigasi</h4>
        <ul>
          <li><a href="#">ğŸ  Beranda</a></li>
          <li><a href="#foto">ğŸ–¼ï¸ Galeri Foto</a></li>
          <li><a href="#laporan">ğŸ“‹ Laporan</a></li>
          <li><a href="#kegiatan">ğŸ‰ Kegiatan</a></li>
          <li><a href="#pengumuman">ğŸ“¢ Pengumuman</a></li>
          <li><a href="#kontak">ğŸ“ Kontak</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <h4>Info Kontak</h4>
        <ul>
          <li><a href="#">ğŸ“ Jl. Raya Kedungsari No.1, Yogyakarta</a></li>
          <li><a href="tel:+6274123456">ğŸ“ (0274) 123-4567</a></li>
          <li><a href="mailto:kedungsari@desa.id">âœ‰ï¸ kedungsari@desa.id</a></li>
          <li><a href="#">ğŸ• Seninâ€“Kamis, 08.00â€“14.00</a></li>
          <li><a href="#">ğŸŒ kalurahan-kedungsari.github.io</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>Â© 2025 Kalurahan Kedungsari Â· Dibuat dengan â¤ï¸ untuk <span>transparansi data</span> desa</p>
      <div class="footer-badge">ğŸ‡®ğŸ‡© &nbsp; Open Data &nbsp;Â·&nbsp; v2.1</div>
    </div>
  </div>
</footer>

<button id="backToTop" aria-label="Kembali ke atas">â†‘</button>

<div class="lightbox" id="lightbox" onclick="closeLB(event)">
  <div class="lightbox-inner">
    <button class="lightbox-close" onclick="closeLB()">âœ•</button>
    <div class="lightbox-emoji-big">
      <span id="lbEmoji"></span>
      <p id="lbCaption"></p>
    </div>
  </div>
</div>

<div id="adminBadge">âš™ï¸ Mode Admin Aktif</div>
<div id="toast"></div>

<div id="pinModal" role="dialog" aria-modal="true">
  <div class="pin-box">
    <h2>ğŸ” Admin Panel</h2>
    <p>Masukkan PIN 4 digit untuk masuk</p>
    <div class="pin-dots">
      <div class="pin-dot" id="pd0"></div><div class="pin-dot" id="pd1"></div>
      <div class="pin-dot" id="pd2"></div><div class="pin-dot" id="pd3"></div>
    </div>
    <div class="pin-pad">
      <button class="pin-key" onclick="pk('1')">1</button>
      <button class="pin-key" onclick="pk('2')">2</button>
      <button class="pin-key" onclick="pk('3')">3</button>
      <button class="pin-key" onclick="pk('4')">4</button>
      <button class="pin-key" onclick="pk('5')">5</button>
      <button class="pin-key" onclick="pk('6')">6</button>
      <button class="pin-key" onclick="pk('7')">7</button>
      <button class="pin-key" onclick="pk('8')">8</button>
      <button class="pin-key" onclick="pk('9')">9</button>
      <button class="pin-key del" onclick="pk('clr')">Hapus</button>
      <button class="pin-key" onclick="pk('0')">0</button>
      <button class="pin-key del" onclick="pk('back')">âŒ«</button>
    </div>
    <div class="pin-error" id="pinErr"></div>
    <button class="pin-close-btn" onclick="closePIN()">Batal</button>
  </div>
</div>

<div id="adminPanel">
  <div class="ap-header">
    <h2>âš™ï¸ Panel Pengelola Data</h2>
    <div class="ap-hbtns">
      <button class="ap-logout-btn" onclick="adminLogout()">Keluar</button>
      <button class="ap-close" onclick="closeAdmin()">âœ•</button>
    </div>
  </div>
  <div class="ap-tabs">
    <button class="ap-tab active" onclick="swTab('statistik',this)">ğŸ“Š Statistik</button>
    <button class="ap-tab" onclick="swTab('pengumuman',this)">ğŸ“¢ Pengumuman</button>
    <button class="ap-tab" onclick="swTab('laporan',this)">ğŸ“‹ Laporan</button>
    <button class="ap-tab" onclick="swTab('kegiatan',this)">ğŸ‰ Kegiatan</button>
  </div>
  <div class="ap-body">

    <div class="ap-panel active" id="tab-statistik">
      <div class="ap-section-label">Header Utama</div>
      <div class="ap-row2">
        <div class="ap-group"><label class="ap-label">Total Penduduk</label><input class="ap-input" id="f_p" type="text" inputmode="numeric"></div>
        <div class="ap-group"><label class="ap-label">Total KK</label><input class="ap-input" id="f_kk" type="text" inputmode="numeric"></div>
      </div>
      <div class="ap-row2">
        <div class="ap-group"><label class="ap-label">Jumlah Dusun</label><input class="ap-input" id="f_ds" type="text" inputmode="numeric"></div>
        <div class="ap-group"><label class="ap-label">Tahun Data</label><input class="ap-input" id="f_thn" type="text" inputmode="numeric"></div>
      </div>
      <div class="ap-divider"></div>
      <div class="ap-section-label">Kartu Dashboard</div>
      <div class="ap-row2">
        <div class="ap-group"><label class="ap-label">Laki-laki</label><input class="ap-input" id="f_d1" type="text"></div>
        <div class="ap-group"><label class="ap-label">Keterangan</label><input class="ap-input" id="f_d1s" type="text"></div>
      </div>
      <div class="ap-row2">
        <div class="ap-group"><label class="ap-label">Perempuan</label><input class="ap-input" id="f_d2" type="text"></div>
        <div class="ap-group"><label class="ap-label">Keterangan</label><input class="ap-input" id="f_d2s" type="text"></div>
      </div>
      <div class="ap-row2">
        <div class="ap-group"><label class="ap-label">Usia 0â€“14 th</label><input class="ap-input" id="f_d3" type="text"></div>
        <div class="ap-group"><label class="ap-label">Keterangan</label><input class="ap-input" id="f_d3s" type="text"></div>
      </div>
      <div class="ap-row2">
        <div class="ap-group"><label class="ap-label">Usia 60+ th</label><input class="ap-input" id="f_d4" type="text"></div>
        <div class="ap-group"><label class="ap-label">Keterangan</label><input class="ap-input" id="f_d4s" type="text"></div>
      </div>
      <div class="ap-row2">
        <div class="ap-group"><label class="ap-label">Status Kawin</label><input class="ap-input" id="f_d5" type="text"></div>
        <div class="ap-group"><label class="ap-label">Keterangan</label><input class="ap-input" id="f_d5s" type="text"></div>
      </div>
      <div class="ap-row2">
        <div class="ap-group"><label class="ap-label">Lulus SMA/SMK</label><input class="ap-input" id="f_d6" type="text"></div>
        <div class="ap-group"><label class="ap-label">Keterangan</label><input class="ap-input" id="f_d6s" type="text"></div>
      </div>
      <div class="ap-divider"></div>
      <div class="ap-section-label">Ticker Berjalan</div>
      <div class="ap-group"><label class="ap-label">Tanggal Pembaruan</label><input class="ap-input" id="f_tk1" type="text"></div>
      <div class="ap-row2">
        <div class="ap-group"><label class="ap-label">Laki-laki</label><input class="ap-input" id="f_tk2" type="text"></div>
        <div class="ap-group"><label class="ap-label">Perempuan</label><input class="ap-input" id="f_tk3" type="text"></div>
      </div>
      <div class="ap-row2">
        <div class="ap-group"><label class="ap-label">Kepadatan /kmÂ²</label><input class="ap-input" id="f_tk4" type="text"></div>
        <div class="ap-group"><label class="ap-label">Melek Huruf %</label><input class="ap-input" id="f_tk5" type="text"></div>
      </div>
      <div class="ap-group"><label class="ap-label">Partisipasi Kerja %</label><input class="ap-input" id="f_tk6" type="text"></div>
      <div class="ap-form-footer">
        <button class="ap-save-btn" onclick="saveStat()">ğŸ’¾ Simpan Semua</button>
      </div>
    </div>

    <div class="ap-panel" id="tab-pengumuman">
      <button class="ap-add-btn" onclick="addP()">ï¼‹ Tambah Pengumuman</button>
      <div id="pList"></div>
      <div id="pForm" style="display:none">
        <div class="ap-divider"></div>
        <div class="ap-section-label" id="pLbl">Tambah Pengumuman</div>
        <input type="hidden" id="pIdx" value="-1">
        <div class="ap-row2">
          <div class="ap-group"><label class="ap-label">Emoji</label><input class="ap-input" id="pE" type="text" placeholder="ğŸ“£" maxlength="4"></div>
          <div class="ap-group"><label class="ap-label">Tanggal</label><input class="ap-input" id="pT" type="text" placeholder="06 Jan 2025"></div>
        </div>
        <div class="ap-group"><label class="ap-label">Judul</label><input class="ap-input" id="pJ" type="text" placeholder="Judul pengumuman..."></div>
        <div class="ap-group"><label class="ap-label">Isi</label><textarea class="ap-input" id="pI" rows="3" placeholder="Deskripsi..."></textarea></div>
        <div class="ap-form-footer">
          <button class="ap-save-btn" onclick="saveP()">ğŸ’¾ Simpan</button>
          <button class="ap-cancel-btn" onclick="cancelP()">Batal</button>
        </div>
      </div>
    </div>

    <div class="ap-panel" id="tab-laporan">
      <button class="ap-add-btn" onclick="addL()">ï¼‹ Tambah Laporan</button>
      <div id="lList"></div>
      <div id="lForm" style="display:none">
        <div class="ap-divider"></div>
        <div class="ap-section-label" id="lLbl">Tambah Laporan</div>
        <input type="hidden" id="lIdx" value="-1">
        <div class="ap-row2">
          <div class="ap-group"><label class="ap-label">Emoji</label><input class="ap-input" id="lE" type="text" placeholder="ğŸ“Š" maxlength="4"></div>
          <div class="ap-group"><label class="ap-label">Tanggal</label><input class="ap-input" id="lT" type="text" placeholder="Des 2024"></div>
        </div>
        <div class="ap-group"><label class="ap-label">Judul</label><input class="ap-input" id="lJ" type="text" placeholder="Judul laporan..."></div>
        <div class="ap-group"><label class="ap-label">Deskripsi</label><textarea class="ap-input" id="lD" rows="3" placeholder="Deskripsi singkat..."></textarea></div>
        <div class="ap-row2">
          <div class="ap-group"><label class="ap-label">Label Tombol</label><input class="ap-input" id="lB" type="text" placeholder="Unduh PDF"></div>
          <div class="ap-group"><label class="ap-label">URL (opsional)</label><input class="ap-input" id="lU" type="text" placeholder="https://..."></div>
        </div>
        <div class="ap-form-footer">
          <button class="ap-save-btn" onclick="saveL()">ğŸ’¾ Simpan</button>
          <button class="ap-cancel-btn" onclick="cancelL()">Batal</button>
        </div>
      </div>
    </div>

    <div class="ap-panel" id="tab-kegiatan">
      <button class="ap-add-btn" onclick="addK()">ï¼‹ Tambah Kegiatan</button>
      <div id="kList"></div>
      <div id="kForm" style="display:none">
        <div class="ap-divider"></div>
        <div class="ap-section-label" id="kLbl">Tambah Kegiatan</div>
        <input type="hidden" id="kIdx" value="-1">
        <div class="ap-row2">
          <div class="ap-group"><label class="ap-label">Emoji</label><input class="ap-input" id="kE" type="text" placeholder="ğŸŒ¾" maxlength="4"></div>
          <div class="ap-group"><label class="ap-label">Tanggal/Ket.</label><input class="ap-input" id="kT" type="text" placeholder="April 2025 Â· Kelompok Tani"></div>
        </div>
        <div class="ap-group"><label class="ap-label">Nama Kegiatan</label><input class="ap-input" id="kJ" type="text" placeholder="Panen Raya Bersama"></div>
        <div class="ap-form-footer">
          <button class="ap-save-btn" onclick="saveK()">ğŸ’¾ Simpan</button>
          <button class="ap-cancel-btn" onclick="cancelK()">Batal</button>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
/* DATA DEFAULT */
const DEF={
  s:{p:'3.847',kk:'1.142',ds:'5',thn:'2025',d1:'1.921',d1s:'49,9% dari total',d2:'1.926',d2s:'50,1% dari total',d3:'812',d3s:'21,1% dari total',d4:'348',d4s:'9,0% dari total',d5:'2.104',d5s:'warga berstatus menikah',d6:'1.238',d6s:'pendidikan terakhir',tk1:'Januari 2025',tk2:'1.921',tk3:'1.926',tk4:'485',tk5:'98,4',tk6:'72,1'},
  p:[
    {e:'ğŸ“£',j:'Jadwal Pelayanan Adminduk Terbaru 2025',i:'Mulai Januari 2025, pelayanan administrasi kependudukan dapat dilakukan setiap Seninâ€“Kamis pukul 08.00â€“14.00 WIB.',t:'06 Jan 2025'},
    {e:'ğŸ’°',j:'Penyaluran BLT Dana Desa Tahap I 2025',i:'Penyaluran BLT Dana Desa tahap pertama dijadwalkan mulai 15 Januari 2025.',t:'03 Jan 2025'},
    {e:'ğŸš°',j:'Pembangunan Air Bersih Dusun Karangan',i:'Proyek jaringan air bersih di Dusun Karangan diperkirakan selesai akhir Februari 2025.',t:'29 Des 2024'},
    {e:'ğŸ“‹',j:'Pemutakhiran Data DTKS Semester I 2025',i:'Warga yang ingin mengusulkan perubahan DTKS dapat menghubungi Petugas RT/RW hingga 31 Maret 2025.',t:'27 Des 2024'}
  ],
  l:[
    {e:'ğŸ“Š',j:'Laporan Kependudukan Tahunan',d:'Rekapitulasi data kependudukan Kalurahan Kedungsari tahun 2024.',t:'Des 2024',b:'Unduh PDF',u:''},
    {e:'ğŸ˜ï¸',j:'Profil Kalurahan 2025',d:'Dokumen profil lengkap meliputi potensi wilayah dan data sosial ekonomi.',t:'Jan 2025',b:'Unduh PDF',u:''},
    {e:'ğŸ’µ',j:'APBKal Tahun 2025',d:'Anggaran Pendapatan dan Belanja Kalurahan tahun 2025 secara transparan.',t:'Jan 2025',b:'Lihat Detail',u:''},
    {e:'ğŸ¥',j:'Data DTKS 2024',d:'Data Terpadu Kesejahteraan Sosial â€“ daftar warga penerima manfaat.',t:'Nov 2024',b:'Unduh',u:''},
    {e:'ğŸ—“ï¸',j:'RPJMKal 2022â€“2028',d:'Rencana Pembangunan Jangka Menengah Kalurahan periode 2022â€“2028.',t:'2022',b:'Lihat',u:''},
    {e:'ğŸ“',j:'Monografi Kalurahan',d:'Rekaman sejarah dan perkembangan Kalurahan Kedungsari dari masa ke masa.',t:'2024',b:'Baca',u:''}
  ],
  k:[
    {e:'ğŸŒ¾',j:'Panen Raya Bersama',t:'April 2025 Â· Kelompok Tani'},
    {e:'ğŸ’‰',j:'Vaksinasi Polio',t:'Maret 2025 Â· Puskesmas'},
    {e:'ğŸ­',j:'Festival Budaya Desa',t:'Feb 2025 Â· Tahunan'},
    {e:'ğŸ“š',j:'Sosialisasi Adminduk',t:'Jan 2025 Â· Online'},
    {e:'ğŸ“',j:'Pelatihan UMKM Digital',t:'Des 2024 Â· Balai Desa'},
    {e:'ğŸ†',j:'Lomba Desa Sehat',t:'Nov 2024 Â· Kecamatan'}
  ]
};

const SKEY='rudata_kedungsari_v3';
function load(){try{const r=localStorage.getItem(SKEY);return r?JSON.parse(r):JSON.parse(JSON.stringify(DEF));}catch(e){return JSON.parse(JSON.stringify(DEF));}}
function store(d){localStorage.setItem(SKEY,JSON.stringify(d));showToast('âœ… Data berhasil disimpan!');}
let D=load();

function esc(s){return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');}
function g(id){return document.getElementById(id);}
function t(id,v){const e=g(id);if(e)e.textContent=String(v||'');}
function showToast(m){const e=g('toast');e.textContent=m;e.classList.add('show');setTimeout(()=>e.classList.remove('show'),2500);}
function scrollToForm(id){requestAnimationFrame(()=>{const f=g(id),b=document.querySelector('.ap-body');if(f&&b)b.scrollTo({top:f.offsetTop-8,behavior:'smooth'});});}

/* RENDER ALL */
function renderAll(){renderStat();renderPengumuman();renderLaporan();renderKegiatan();}

function renderStat(){
  const s=D.s;
  t('hP',s.p);t('hK',s.kk);t('hD',s.ds);t('hT',s.thn);
  t('d1',s.d1);t('d1s',s.d1s);t('d2',s.d2);t('d2s',s.d2s);
  t('d3',s.d3);t('d3s',s.d3s);t('d4',s.d4);t('d4s',s.d4s);
  t('d5',s.d5);t('d5s',s.d5s);t('d6',s.d6);t('d6s',s.d6s);
  for(let n=1;n<=6;n++){t('tk'+n,s['tk'+n]);t('tk'+n+'b',s['tk'+n]);}
}

function renderPengumuman(){
  const el=g('pengumumanList');
  if(!el)return;
  el.innerHTML=D.p.map(p=>`<div class="pengumuman-item" tabindex="0"><div class="pengumuman-emoji">${p.e}</div><div class="pengumuman-body"><h4>${esc(p.j)}</h4><p>${esc(p.i)}</p></div><span class="pengumuman-date">${esc(p.t)}</span></div>`).join('');
  renderPList();
}

function renderLaporan(){
  const el=g('reportsGrid');
  if(!el)return;
  el.innerHTML=D.l.map(l=>`<div class="report-card" tabindex="0"${l.u?' onclick="window.open(\''+l.u+'\',\'_blank\')"':''}>
    <div class="report-icon">${l.e}</div><h3>${esc(l.j)}</h3><p>${esc(l.d)}</p>
    <div class="report-meta"><span class="report-date">${esc(l.t)}</span><button class="report-btn">${esc(l.b)}</button></div></div>`).join('');
  renderLList();
}

function renderKegiatan(){
  const el=g('kegiatanStrip');
  if(!el)return;
  el.innerHTML=D.k.map(k=>`<div class="kegiatan-card" onclick="openLB('${k.e}','${esc(k.j)}','${esc(k.t)}')">
    <div class="kegiatan-img">${k.e}</div><div class="kegiatan-info"><h4>${esc(k.j)}</h4><span>${esc(k.t)}</span></div></div>`).join('');
  renderKList();
}

function renderPList(){const c=g('pList');if(!c)return;c.innerHTML=D.p.map((p,i)=>`<div class="ap-list-item"><span style="font-size:1.3rem;flex-shrink:0">${p.e}</span><div class="ap-list-body"><strong>${esc(p.j)}</strong><span>${esc(p.t)}</span></div><div class="ap-list-actions"><button class="ap-edit" onclick="editP(${i})">Edit</button><button class="ap-del" onclick="delP(${i})">Hapus</button></div></div>`).join('');}
function renderLList(){const c=g('lList');if(!c)return;c.innerHTML=D.l.map((l,i)=>`<div class="ap-list-item"><span style="font-size:1.3rem;flex-shrink:0">${l.e}</span><div class="ap-list-body"><strong>${esc(l.j)}</strong><span>${esc(l.t)}</span></div><div class="ap-list-actions"><button class="ap-edit" onclick="editL(${i})">Edit</button><button class="ap-del" onclick="delL(${i})">Hapus</button></div></div>`).join('');}
function renderKList(){const c=g('kList');if(!c)return;c.innerHTML=D.k.map((k,i)=>`<div class="ap-list-item"><span style="font-size:1.3rem;flex-shrink:0">${k.e}</span><div class="ap-list-body"><strong>${esc(k.j)}</strong><span>${esc(k.t)}</span></div><div class="ap-list-actions"><button class="ap-edit" onclick="editK(${i})">Edit</button><button class="ap-del" onclick="delK(${i})">Hapus</button></div></div>`).join('');}

/* SAVE STATISTIK */
function saveStat(){
  const flds=['p','kk','ds','thn','d1','d1s','d2','d2s','d3','d3s','d4','d4s','d5','d5s','d6','d6s','tk1','tk2','tk3','tk4','tk5','tk6'];
  flds.forEach(k=>{const e=g('f_'+k);if(e&&e.value.trim())D.s[k]=e.value.trim();});
  store(D);renderStat();
}

/* PENGUMUMAN */
function addP(){g('pIdx').value=-1;g('pE').value='ğŸ“£';g('pJ').value='';g('pI').value='';g('pT').value='';g('pLbl').textContent='Tambah Pengumuman';g('pForm').style.display='block';scrollToForm('pForm');}
function editP(i){const p=D.p[i];g('pIdx').value=i;g('pE').value=p.e;g('pJ').value=p.j;g('pI').value=p.i;g('pT').value=p.t;g('pLbl').textContent='Edit Pengumuman';g('pForm').style.display='block';scrollToForm('pForm');}
function saveP(){const o={e:g('pE').value||'ğŸ“£',j:g('pJ').value,i:g('pI').value,t:g('pT').value};if(!o.j){alert('Judul tidak boleh kosong');return;}const idx=parseInt(g('pIdx').value);if(idx===-1)D.p.unshift(o);else D.p[idx]=o;store(D);renderPengumuman();g('pForm').style.display='none';}
function delP(i){if(!confirm('Hapus pengumuman ini?'))return;D.p.splice(i,1);store(D);renderPengumuman();}
function cancelP(){g('pForm').style.display='none';}

/* LAPORAN */
function addL(){g('lIdx').value=-1;g('lE').value='ğŸ“„';g('lJ').value='';g('lD').value='';g('lT').value='';g('lB').value='Unduh PDF';g('lU').value='';g('lLbl').textContent='Tambah Laporan';g('lForm').style.display='block';scrollToForm('lForm');}
function editL(i){const l=D.l[i];g('lIdx').value=i;g('lE').value=l.e;g('lJ').value=l.j;g('lD').value=l.d;g('lT').value=l.t;g('lB').value=l.b;g('lU').value=l.u||'';g('lLbl').textContent='Edit Laporan';g('lForm').style.display='block';scrollToForm('lForm');}
function saveL(){const o={e:g('lE').value||'ğŸ“„',j:g('lJ').value,d:g('lD').value,t:g('lT').value,b:g('lB').value||'Lihat',u:g('lU').value};if(!o.j){alert('Judul tidak boleh kosong');return;}const idx=parseInt(g('lIdx').value);if(idx===-1)D.l.push(o);else D.l[idx]=o;store(D);renderLaporan();g('lForm').style.display='none';}
function delL(i){if(!confirm('Hapus laporan ini?'))return;D.l.splice(i,1);store(D);renderLaporan();}
function cancelL(){g('lForm').style.display='none';}

/* KEGIATAN */
function addK(){g('kIdx').value=-1;g('kE').value='ğŸ‰';g('kJ').value='';g('kT').value='';g('kLbl').textContent='Tambah Kegiatan';g('kForm').style.display='block';scrollToForm('kForm');}
function editK(i){const k=D.k[i];g('kIdx').value=i;g('kE').value=k.e;g('kJ').value=k.j;g('kT').value=k.t;g('kLbl').textContent='Edit Kegiatan';g('kForm').style.display='block';scrollToForm('kForm');}
function saveK(){const o={e:g('kE').value||'ğŸ‰',j:g('kJ').value,t:g('kT').value};if(!o.j){alert('Nama kegiatan tidak boleh kosong');return;}const idx=parseInt(g('kIdx').value);if(idx===-1)D.k.unshift(o);else D.k[idx]=o;store(D);renderKegiatan();g('kForm').style.display='none';}
function delK(i){if(!confirm('Hapus kegiatan ini?'))return;D.k.splice(i,1);store(D);renderKegiatan();}
function cancelK(){g('kForm').style.display='none';}

/* PIN */
const PIN='1234'; /* â† Ganti PIN di sini */
let pinBuf='';
function openPIN(){pinBuf='';updDots();g('pinErr').textContent='';g('pinModal').classList.add('active');}
function closePIN(){g('pinModal').classList.remove('active');pinBuf='';}
function pk(v){
  if(v==='back'){pinBuf=pinBuf.slice(0,-1);updDots();return;}
  if(v==='clr'){pinBuf='';updDots();return;}
  if(pinBuf.length>=4)return;
  pinBuf+=v;updDots();
  if(pinBuf.length===4)setTimeout(checkPIN,160);
}
function updDots(){for(let i=0;i<4;i++)g('pd'+i).classList.toggle('filled',i<pinBuf.length);}
function checkPIN(){
  if(pinBuf===PIN){closePIN();openAdmin();}
  else{
    g('pinErr').textContent='âŒ PIN salah, coba lagi';
    const b=document.querySelector('.pin-box');
    b.style.transition='none';b.style.transform='translateX(-8px)';
    setTimeout(()=>{b.style.transition='transform .1s';b.style.transform='translateX(8px)';},80);
    setTimeout(()=>{b.style.transform='translateX(0)';pinBuf='';updDots();},180);
  }
}

/* ADMIN PANEL */
function openAdmin(){
  const s=D.s;
  ['p','kk','ds','thn','d1','d1s','d2','d2s','d3','d3s','d4','d4s','d5','d5s','d6','d6s','tk1','tk2','tk3','tk4','tk5','tk6'].forEach(k=>{const e=g('f_'+k);if(e)e.value=s[k]||'';});
  renderPList();renderLList();renderKList();
  g('adminPanel').classList.add('open');
  g('adminBadge').classList.add('visible');
  document.body.style.overflow='hidden';
}
function closeAdmin(){g('adminPanel').classList.remove('open');document.body.style.overflow='';}
function adminLogout(){closeAdmin();g('adminBadge').classList.remove('visible');showToast('ğŸ‘‹ Keluar dari mode admin');}
function swTab(name,btn){
  document.querySelectorAll('.ap-tab').forEach(t=>t.classList.remove('active'));
  document.querySelectorAll('.ap-panel').forEach(p=>p.classList.remove('active'));
  btn.classList.add('active');g('tab-'+name).classList.add('active');
  document.querySelector('.ap-body').scrollTop=0;
}

/* HIDDEN TRIGGER: ketuk 5Ã— pojok kanan atas header */
let tc=0,tt=null;
function triggerHit(){
  tc++;clearTimeout(tt);tt=setTimeout(()=>tc=0,2500);
  if(tc>=5){tc=0;openPIN();}
}
g('adminTrigger').addEventListener('click',triggerHit);
g('adminTrigger').addEventListener('touchstart',function(e){e.preventDefault();triggerHit();},{passive:false});

/* LIGHTBOX */
function openLB(e,ti,d){g('lbEmoji').textContent=e;g('lbCaption').innerHTML='<strong style="color:#FDFAF4;font-size:1rem">'+ti+'</strong><br>'+d;g('lightbox').classList.add('active');document.body.style.overflow='hidden';}
function closeLB(ev){if(!ev||ev.target===g('lightbox')||(ev.currentTarget&&ev.currentTarget.classList.contains('lightbox-close'))){g('lightbox').classList.remove('active');document.body.style.overflow='';}}

/* BACK TO TOP */
const btt=g('backToTop');
window.addEventListener('scroll',()=>btt.classList.toggle('show',scrollY>320));
btt.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));

/* ESC KEY */
document.addEventListener('keydown',e=>{if(e.key==='Escape'){closeLB({target:g('lightbox')});closePIN();closeAdmin();}});

/* Stagger animasi per section */
/* PHOTO FRAME KEYBOARD */
document.querySelectorAll('.photo-frame').forEach(f=>{
  f.setAttribute('tabindex','0');f.setAttribute('role','button');
  f.addEventListener('keydown',e=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();f.click();}});
});

/* INIT */
renderAll();
</script>
</body>
</html>
