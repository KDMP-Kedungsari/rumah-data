<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Rumah Data Kependudukan â€“ Kalurahan Kedungsari</title>
  <meta name="description" content="Rumah Data Kependudukan Kalurahan Kedungsari â€“ Pusat informasi data kependudukan, demografi, dan layanan administrasi warga secara transparan dan terbuka."/>
  <meta name="keywords" content="Rumah Data, Kependudukan, Kalurahan Kedungsari, Data Demografi, Administrasi Desa, Yogyakarta, Open Data"/>
  <meta name="author" content="Kalurahan Kedungsari"/>
  <meta name="robots" content="index, follow"/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500;600&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet"/>
<style>
:root{
  --cream:#F5EFE0;--parchment:#EDE3CC;--brown:#3D2B1F;--brown-mid:#6B4C35;
  --brown-lite:#A07850;--green:#2D5016;--green-mid:#4A7C28;--green-lite:#7FB347;
  --gold:#C8922A;--gold-lite:#E8B84B;--red:#8B2020;--teal:#1A5F6A;
  --white:#FDFAF4;--shadow:rgba(61,43,31,.18);
  --r-sm:6px;--r-md:12px;--r-lg:20px;--tr:all .28s cubic-bezier(.4,0,.2,1);
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:'DM Sans',sans-serif;background:var(--cream);color:var(--brown);overflow-x:hidden;min-height:100vh}
body::before{content:'';position:fixed;inset:0;background-image:radial-gradient(circle at 15% 15%,rgba(200,146,42,.08) 0%,transparent 55%),radial-gradient(circle at 85% 80%,rgba(45,80,22,.07) 0%,transparent 55%),url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23C8922A' fill-opacity='0.04'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/svg%3E");pointer-events:none;z-index:0}

/* HEADER */
header{position:relative;z-index:10;background:linear-gradient(135deg,var(--green) 0%,#1e3a0e 60%,var(--brown) 100%);overflow:hidden}
header::after{content:'';position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M40 0 L80 40 L40 80 L0 40 Z' fill='rgba(255,255,255,0.03)'/%3E%3C/svg%3E") repeat;pointer-events:none}
#adminTrigger{position:fixed;top:0;right:0;width:80px;height:80px;z-index:500;background:transparent;border:none;outline:none;cursor:default;-webkit-tap-highlight-color:transparent;user-select:none;touch-action:manipulation}
.header-inner{position:relative;z-index:2;max-width:1200px;margin:0 auto;padding:32px 24px 40px;display:flex;flex-direction:column;align-items:center;text-align:center;gap:16px}
.header-badge{display:inline-flex;align-items:center;gap:8px;background:rgba(200,146,42,.25);border:1px solid rgba(200,146,42,.5);border-radius:100px;padding:6px 16px;font-family:'DM Mono',monospace;font-size:.72rem;color:var(--gold-lite);letter-spacing:.1em;text-transform:uppercase;animation:fadeDown .6s ease both}
.header-logo{font-size:3.2rem;animation:fadeDown .5s .1s ease both}
.header-title{font-family:'Playfair Display',serif;font-weight:900;font-size:clamp(1.9rem,5vw,3.4rem);color:var(--white);line-height:1.12;animation:fadeDown .5s .2s ease both}
.header-title span{color:var(--gold-lite);display:block}
.header-subtitle{font-size:.95rem;color:rgba(253,250,244,.72);max-width:520px;line-height:1.65;animation:fadeDown .5s .3s ease both}
.header-stats-bar{display:flex;gap:24px;flex-wrap:wrap;justify-content:center;margin-top:8px;animation:fadeDown .5s .4s ease both}
.stat-chip{background:rgba(255,255,255,.1);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.15);border-radius:var(--r-md);padding:10px 18px;text-align:center}
.stat-chip .num{font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:700;color:var(--gold-lite);display:block}
.stat-chip .label{font-size:.72rem;color:rgba(253,250,244,.7);text-transform:uppercase;letter-spacing:.08em}

/* HERO IMAGE */
.hero-image{width:100%;max-width:1200px;margin:0 auto;position:relative;overflow:hidden;border-radius:0 0 var(--r-lg) var(--r-lg)}
.hero-image img{width:100%;height:auto;display:block;object-fit:cover;max-height:400px}

/* TICKER */
.ticker-bar{position:relative;z-index:10;background:var(--gold);padding:7px 0;overflow:hidden}
.ticker-content{display:flex;gap:64px;white-space:nowrap;animation:tickerScroll 28s linear infinite;font-family:'DM Mono',monospace;font-size:.75rem;color:var(--brown);font-weight:500;padding:0 24px}
@keyframes tickerScroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

/* MAIN */
main{position:relative;z-index:1;max-width:1280px;margin:0 auto;padding:40px 20px 60px}
.section-header{display:flex;align-items:baseline;gap:14px;margin-bottom:28px}
.section-title{font-family:'Playfair Display',serif;font-size:clamp(1.25rem,3vw,1.6rem);font-weight:700;color:var(--brown)}
.section-line{flex:1;height:2px;background:linear-gradient(to right,var(--brown-lite),transparent);border-radius:2px}
.section-tag{font-family:'DM Mono',monospace;font-size:.68rem;color:var(--brown-lite);text-transform:uppercase;letter-spacing:.12em}

/* DASHBOARD */
.dashboard-row{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;margin-bottom:64px}
.dash-card{background:var(--white);border-radius:var(--r-md);padding:22px 20px;border:1px solid rgba(61,43,31,.08);box-shadow:0 2px 8px var(--shadow);transition:var(--tr);position:relative;overflow:hidden}
.dash-card::after{content:attr(data-emoji);position:absolute;right:12px;bottom:8px;font-size:2.8rem;opacity:.12;pointer-events:none}
.dash-card:hover{transform:translateY(-2px);box-shadow:0 8px 24px var(--shadow)}
.dash-card .dc-label{font-size:.72rem;text-transform:uppercase;letter-spacing:.1em;color:var(--brown-lite);margin-bottom:6px}
.dash-card .dc-value{font-family:'Playfair Display',serif;font-size:2rem;font-weight:700;color:var(--brown);line-height:1}
.dash-card .dc-sub{font-size:.74rem;color:var(--brown-lite);margin-top:4px}
.dc-green{border-left:3px solid var(--green-mid)}.dc-gold{border-left:3px solid var(--gold)}.dc-red{border-left:3px solid var(--red)}.dc-teal{border-left:3px solid var(--teal)}

/* PHOTO WALL - MODEL PRODUCT.HTML */
.photo-wall{columns:4 240px;gap:16px;margin-bottom:64px}
.photo-frame{break-inside:avoid;margin-bottom:16px;background:var(--white);border-radius:var(--r-md);overflow:hidden;box-shadow:0 2px 12px var(--shadow);cursor:pointer;transition:var(--tr);position:relative}
.photo-frame:hover{transform:translateY(-4px) scale(1.015);box-shadow:0 12px 32px var(--shadow),0 0 0 1px rgba(200,146,42,.25)}
.photo-frame:hover .frame-overlay{opacity:1}
.photo-frame img{width:100%;height:auto;display:block;object-fit:cover}

/* IMAGE PLACEHOLDER dengan emoji fallback */
.product-image-placeholder{
  width:100%;
  aspect-ratio:4/3;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg,var(--parchment),var(--cream));
  border:2px dashed rgba(160,120,80,.35);
  font-size:4rem;
  color:#adb5bd;
}

/* GALERI BUTTON - seperti product.html */
.photo-gallery-btn{
  position:absolute;
  top:10px;
  left:10px;
  background:rgba(200,146,42,.95);
  backdrop-filter:blur(8px);
  color:var(--white);
  border:none;
  padding:8px 14px;
  border-radius:100px;
  font-family:'DM Sans',sans-serif;
  font-size:.75rem;
  font-weight:600;
  cursor:pointer;
  transition:var(--tr);
  box-shadow:0 2px 8px rgba(0,0,0,.3);
  z-index:5;
  display:flex;
  align-items:center;
  gap:6px;
}
.photo-gallery-btn:hover{
  background:var(--gold-lite);
  transform:scale(1.05);
  box-shadow:0 4px 12px rgba(0,0,0,.4);
}

/* VIDEO BUTTON IN CARD */
.card-video-btn{
  position:absolute;
  top:10px;
  right:10px;
  background:rgba(26,95,106,.95);
  backdrop-filter:blur(8px);
  color:var(--white);
  border:none;
  padding:8px 14px;
  border-radius:100px;
  font-family:'DM Sans',sans-serif;
  font-size:.75rem;
  font-weight:600;
  cursor:pointer;
  transition:var(--tr);
  box-shadow:0 2px 8px rgba(0,0,0,.3);
  z-index:5;
  display:flex;
  align-items:center;
  gap:6px;
}
.card-video-btn:hover{
  background:var(--teal);
  transform:scale(1.05);
  box-shadow:0 4px 12px rgba(0,0,0,.4);
}
.card-video-btn:active{transform:scale(0.98)}

/* PDF BADGE - Posisi di bawah tombol video jika video ada */
.pdf-badge{
  position:absolute;
  top:52px;  /* Di bawah tombol video */
  right:10px;
  background:rgba(139,32,32,.95);
  backdrop-filter:blur(8px);
  color:var(--white);
  border:none;
  padding:8px 14px;
  border-radius:100px;
  font-family:'DM Sans',sans-serif;
  font-size:.75rem;
  font-weight:600;
  cursor:pointer;  /* Pointer untuk menunjukkan clickable */
  transition:var(--tr);
  box-shadow:0 2px 8px rgba(0,0,0,.3);
  z-index:5;
  display:flex;
  align-items:center;
  gap:6px;
  user-select:none;  /* Tidak bisa diselect */
}
.pdf-badge:hover{
  background:var(--red);
  transform:scale(1.05);
  box-shadow:0 4px 12px rgba(0,0,0,.4);
}
.pdf-badge:active{
  transform:scale(0.98);
}

/* PDF Badge tanpa video - posisi normal di atas */
.pdf-badge.solo{
  top:10px;
}

.emoji-frame{aspect-ratio:4/3;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;background:linear-gradient(135deg,var(--parchment),var(--cream));border:2px dashed rgba(160,120,80,.35)}
.emoji-frame .big-emoji{font-size:2.8rem;line-height:1}
.emoji-frame .frame-caption{font-size:.78rem;color:var(--brown-lite);text-align:center;padding:0 12px;font-style:italic}
.frame-overlay{position:absolute;inset:0;background:linear-gradient(to top,rgba(61,43,31,.82),transparent 55%);opacity:0;transition:var(--tr);display:flex;align-items:flex-end;padding:14px}
.frame-label{padding:10px 12px 12px;border-top:1px solid rgba(61,43,31,.06)}
.frame-label strong{display:block;font-size:.82rem;font-weight:600;color:var(--brown);margin-bottom:2px}
.frame-label span{font-size:.72rem;color:var(--brown-lite)}

/* REPORTS */
.reports-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-bottom:64px}
.report-card{background:var(--white);border-radius:var(--r-md);border:1px solid rgba(61,43,31,.09);padding:20px;display:flex;flex-direction:column;gap:12px;box-shadow:0 2px 8px var(--shadow);transition:var(--tr);position:relative;overflow:hidden;cursor:pointer}
.report-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--green),var(--gold));transform:scaleX(0);transform-origin:left;transition:transform .3s ease}
.report-card:hover::before{transform:scaleX(1)}
.report-card:hover{transform:translateY(-3px);box-shadow:0 10px 28px var(--shadow)}
.report-card .img-container{position:relative}
.report-card img{width:100%;height:auto;border-radius:var(--r-sm);margin-bottom:8px;object-fit:cover;max-height:180px}
.report-icon{font-size:1.9rem}
.report-card h3{font-family:'Playfair Display',serif;font-size:1.05rem;color:var(--brown);font-weight:700}
.report-card p{font-size:.82rem;color:var(--brown-lite);line-height:1.6;flex:1}
.report-meta{display:flex;justify-content:space-between;align-items:center;padding-top:12px;border-top:1px solid rgba(61,43,31,.07)}
.report-date{font-family:'DM Mono',monospace;font-size:.7rem;color:var(--brown-lite)}
.report-btn{font-size:.74rem;font-weight:600;color:var(--white);background:var(--green);border:none;padding:5px 12px;border-radius:100px;cursor:pointer;transition:var(--tr)}
.report-btn:hover{background:var(--green-mid)}

/* KEGIATAN */
.kegiatan-strip{display:flex;gap:16px;overflow-x:auto;padding-bottom:12px;margin-bottom:64px;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch}
.kegiatan-strip::-webkit-scrollbar{height:5px}.kegiatan-strip::-webkit-scrollbar-track{background:rgba(61,43,31,.07);border-radius:4px}.kegiatan-strip::-webkit-scrollbar-thumb{background:var(--brown-lite);border-radius:4px}
.kegiatan-card{flex:0 0 260px;scroll-snap-align:start;background:var(--white);border-radius:var(--r-md);overflow:hidden;box-shadow:0 2px 10px var(--shadow);transition:var(--tr);position:relative;cursor:pointer}
.kegiatan-card:hover{transform:translateY(-3px) scale(1.015);box-shadow:0 10px 28px var(--shadow)}
.kegiatan-card .img-container{position:relative}
.kegiatan-card img{width:100%;height:160px;object-fit:cover;display:block}
.kegiatan-img{height:160px;background:linear-gradient(135deg,var(--parchment),var(--cream));display:flex;align-items:center;justify-content:center;font-size:3rem;border-bottom:2px dashed rgba(160,120,80,.3)}
.kegiatan-info{padding:14px}
.kegiatan-info h4{font-weight:600;font-size:.88rem;color:var(--brown);margin-bottom:4px}
.kegiatan-info span{font-size:.74rem;color:var(--brown-lite)}

/* GALLERY MODAL */
.gallery-modal{
  display:none;
  position:fixed;
  inset:0;
  z-index:99999;
  background:rgba(20,12,5,.95);
  backdrop-filter:blur(10px);
  align-items:center;
  justify-content:center;
  padding:24px;
}
.gallery-modal.active{display:flex}
.gallery-modal-content{
  max-width:1000px;
  max-height:90vh;
  width:100%;
  background:var(--white);
  border-radius:var(--r-lg);
  overflow:hidden;
  position:relative;
  animation:lbIn .25s ease;
}
.gallery-modal-header{
  background:var(--green);
  color:var(--white);
  padding:16px 20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.gallery-modal-header h3{
  font-family:'Playfair Display',serif;
  font-size:1.2rem;
}
.gallery-close-btn{
  background:rgba(255,255,255,.2);
  border:none;
  color:var(--white);
  width:36px;
  height:36px;
  border-radius:50%;
  cursor:pointer;
  font-size:1.2rem;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:var(--tr);
}
.gallery-close-btn:hover{
  background:rgba(255,255,255,.35);
  transform:rotate(90deg);
}
.gallery-modal-body{
  padding:20px;
  max-height:calc(90vh - 80px);
  overflow-y:auto;
}
.gallery-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(200px,1fr));
  gap:16px;
}
.gallery-item{
  position:relative;
  cursor:pointer;
  border-radius:var(--r-sm);
  overflow:hidden;
  transition:var(--tr);
}
.gallery-item:hover{
  transform:scale(1.05);
  box-shadow:0 8px 24px var(--shadow);
}
.gallery-item img{
  width:100%;
  height:200px;
  object-fit:cover;
  display:block;
}
.gallery-caption{
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  background:linear-gradient(to top,rgba(0,0,0,.8),transparent);
  color:white;
  padding:10px;
  font-size:.75rem;
  opacity:0;
  transition:var(--tr);
}
.gallery-item:hover .gallery-caption{
  opacity:1;
}

/* LIGHTBOX */
.lightbox{display:none;position:fixed;inset:0;z-index:99998;background:rgba(20,12,5,.9);backdrop-filter:blur(10px);align-items:center;justify-content:center;padding:24px}
.lightbox.active{display:flex}
.lightbox-inner{max-width:900px;max-height:90vh;width:100%;position:relative;animation:lbIn .25s ease}
@keyframes lbIn{from{transform:scale(.88);opacity:0}to{transform:scale(1);opacity:1}}
.lightbox-content{width:100%;background:var(--white);border-radius:var(--r-md);overflow:hidden}
.lightbox-content img{width:100%;height:auto;display:block;max-height:70vh;object-fit:contain}
.lightbox-content iframe{width:100%;height:70vh;border:none;display:block}
.lightbox-emoji-big{width:100%;min-height:280px;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:5rem;gap:16px;background:rgba(245,239,224,.05);border-radius:var(--r-md)}
.lightbox-caption{padding:20px;background:var(--white);color:var(--brown)}
.lightbox-caption strong{display:block;font-size:1.1rem;margin-bottom:8px}
.lightbox-close{position:absolute;top:-14px;right:-14px;width:40px;height:40px;background:var(--gold);color:var(--brown);border:none;border-radius:50%;font-size:1.1rem;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:700;transition:var(--tr);box-shadow:0 4px 12px rgba(0,0,0,.35)}
.lightbox-close:hover{background:var(--gold-lite);transform:rotate(90deg)}

/* FOOTER */
footer{position:relative;z-index:10;background:linear-gradient(160deg,var(--brown) 0%,#1c110a 100%);color:rgba(253,250,244,.75);overflow:hidden}
footer::before{content:'';position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M40 0 L80 40 L40 80 L0 40 Z' fill='rgba(200,146,42,0.05)'/%3E%3C/svg%3E") repeat;pointer-events:none}
.footer-inner{position:relative;max-width:1200px;margin:0 auto;padding:48px 24px 0}
.footer-top{display:grid;grid-template-columns:1.5fr 1fr 1fr;gap:40px;margin-bottom:40px}
.footer-brand h2{font-family:'Playfair Display',serif;font-size:1.25rem;color:var(--white);margin-bottom:10px}
.footer-brand p{font-size:.82rem;line-height:1.7;color:rgba(253,250,244,.6);max-width:300px}
.footer-col h4{font-size:.8rem;text-transform:uppercase;letter-spacing:.12em;color:var(--gold-lite);margin-bottom:14px;font-weight:600}
.footer-col ul{list-style:none;display:flex;flex-direction:column;gap:8px}
.footer-col ul li a{color:rgba(253,250,244,.6);text-decoration:none;font-size:.82rem;transition:var(--tr);display:inline-flex;align-items:center;gap:6px}
.footer-col ul li a:hover{color:var(--gold-lite);transform:translateX(3px)}
.quick-access{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:var(--r-lg);padding:28px;margin-bottom:28px}
.qa-title{font-size:.78rem;text-transform:uppercase;letter-spacing:.12em;color:var(--gold-lite);margin-bottom:18px;font-weight:600}
.qa-buttons{display:flex;flex-wrap:wrap;gap:10px}
.qa-btn{display:inline-flex;align-items:center;gap:8px;padding:10px 18px;border-radius:100px;border:none;font-family:'DM Sans',sans-serif;font-size:.82rem;font-weight:600;cursor:pointer;text-decoration:none;transition:var(--tr)}
.qa-btn.primary{background:var(--gold);color:var(--brown)}.qa-btn.primary:hover{background:var(--gold-lite);transform:translateY(-2px)}
.qa-btn.secondary{background:rgba(255,255,255,.08);color:var(--white);border:1px solid rgba(255,255,255,.14)}.qa-btn.secondary:hover{background:rgba(255,255,255,.15);transform:translateY(-2px)}
.qa-btn.green{background:rgba(45,80,22,.7);color:var(--green-lite);border:1px solid rgba(127,179,71,.25)}.qa-btn.green:hover{background:var(--green-mid);color:var(--white);transform:translateY(-2px)}
.qa-btn.teal{background:rgba(26,95,106,.6);color:#7dd3dc;border:1px solid rgba(26,95,106,.8)}.qa-btn.teal:hover{background:var(--teal);color:var(--white);transform:translateY(-2px)}
.footer-bottom{border-top:1px solid rgba(255,255,255,.08);padding:18px 0;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px}
.footer-bottom p{font-size:.75rem;color:rgba(253,250,244,.4)}
.footer-bottom p span{color:var(--gold-lite)}
.footer-badge{display:inline-flex;align-items:center;gap:6px;font-family:'DM Mono',monospace;font-size:.68rem;color:rgba(253,250,244,.35);border:1px solid rgba(255,255,255,.1);padding:4px 10px;border-radius:100px}

/* BACK TO TOP */
#backToTop{position:fixed;bottom:28px;right:24px;width:46px;height:46px;background:var(--green);color:var(--white);border:none;border-radius:50%;font-size:1.1rem;cursor:pointer;box-shadow:0 4px 16px rgba(0,0,0,.28);display:flex;align-items:center;justify-content:center;opacity:0;transform:translateY(10px);transition:var(--tr);z-index:999}
#backToTop.show{opacity:1;transform:translateY(0)}
#backToTop:hover{background:var(--green-mid)}

@keyframes fadeDown{from{transform:translateY(-14px);opacity:0}to{transform:translateY(0);opacity:1}}
.fade-in{animation:fadeUp .6s ease both}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

#toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(100px);background:var(--brown);color:var(--white);padding:12px 24px;border-radius:100px;font-family:'DM Sans',sans-serif;font-size:.82rem;box-shadow:0 4px 16px rgba(0,0,0,.3);z-index:9998;opacity:0;transition:var(--tr)}
#toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

@media(max-width:768px){
  .header-stats-bar{gap:12px}
  .stat-chip{padding:8px 14px}
  .stat-chip .num{font-size:1.3rem}
  .dashboard-row{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}
  .photo-wall{columns:2 200px}
  .reports-grid{grid-template-columns:1fr}
  .kegiatan-card{flex:0 0 220px}
  .footer-top{grid-template-columns:1fr}
  .footer-bottom{justify-content:center;text-align:center}
  .gallery-grid{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}
}
</style>
</head>
<body>

<button id="adminTrigger" aria-label="Admin Trigger"></button>

<header>
  <div class="header-inner">
    <div class="header-badge">Open Data Portal</div>
    <div class="header-logo">ğŸ›ï¸</div>
    <h1 class="header-title">Rumah Data Kependudukan<span>Kalurahan Kedungsari</span></h1>
    <p class="header-subtitle">Portal data kependudukan dan informasi desa yang transparan, terbuka, dan mudah diakses untuk meningkatkan partisipasi warga.</p>
    <div class="header-stats-bar">
      <div class="stat-chip"><span class="num" id="hPenduduk">â€”</span><span class="label">Penduduk</span></div>
      <div class="stat-chip"><span class="num" id="hKK">â€”</span><span class="label">KK</span></div>
      <div class="stat-chip"><span class="num" id="hDusun">â€”</span><span class="label">Dusun</span></div>
      <div class="stat-chip"><span class="num" id="hTahun">â€”</span><span class="label">Tahun Data</span></div>
    </div>
  </div>
</header>

<div class="hero-image" id="heroImage"></div>

<div class="ticker-bar">
  <div class="ticker-content" id="tickerContent"></div>
</div>

<main>
  <section>
    <div class="section-header"><div class="section-tag">Statistik</div><h2 class="section-title">Dashboard Data Kependudukan</h2><div class="section-line"></div></div>
    <div class="dashboard-row" id="dashboardRow"></div>
  </section>

  <section id="foto">
    <div class="section-header"><div class="section-tag">Galeri</div><h2 class="section-title">ğŸ“· Dinding Foto Desa</h2><div class="section-line"></div></div>
    <div class="photo-wall" id="photoWall"></div>
  </section>

  <section id="laporan">
    <div class="section-header"><div class="section-tag">Dokumen</div><h2 class="section-title">ğŸ“‹ Laporan & Foto Publikasi</h2><div class="section-line"></div></div>
    <div class="reports-grid" id="reportsGrid"></div>
  </section>

  <section id="kegiatan">
    <div class="section-header"><div class="section-tag">Aktivitas</div><h2 class="section-title">ğŸ‰ Kegiatan & Foto Terkini</h2><div class="section-line"></div></div>
    <div class="kegiatan-strip" id="kegiatanStrip"></div>
  </section>
</main>

<footer>
  <div class="footer-inner">
    <div class="quick-access">
      <div class="qa-title">âš¡ Akses Cepat Layanan</div>
      <div class="qa-buttons">
        <a href="https://script.google.com/macros/s/AKfycbwGNxDdRmvIUG11oiqNjZX7TQm3Z5TcWm1zPSzX-ib1RIlS3sQbyuLlWUN52WG6tC-k/exec" target="_blank" rel="noopener" class="qa-btn primary">ğŸªª Data Penduduk</a>
        <a href="https://script.google.com/macros/s/AKfycbx1sHcIqwr3t60xxI2D83-t29gDbq5_AkDyTAopl3Yi5xu4T4VWxWUr9IS_yYQaSng/exec" target="_blank" rel="noopener" class="qa-btn green">ğŸªª Laundry</a>
        <a href="https://sid.kemendesa.go.id/" target="_blank" rel="noopener" class="qa-btn green">ğŸ—‚ï¸ SID Kemendes</a>
        <a href="https://wa.me/628123456789" target="_blank" rel="noopener" class="qa-btn teal">ğŸ’¬ WhatsApp Desa</a>
        <a href="/cdn-cgi/l/email-protection#a8c1c6cec7e8c3cdccddc6cfdbc9dac186c1cc" class="qa-btn teal">âœ‰ï¸ Surel Kalurahan</a>
      </div>
    </div>
    <div class="footer-top">
      <div class="footer-brand">
        <h2>ğŸ›ï¸ Rumah Data Kependudukan<br>Kalurahan Kedungsari</h2>
        <p>Kami berkomitmen menyajikan data kependudukan yang akurat, transparan, dan mudah diakses demi terwujudnya pemerintahan desa yang bersih dan melayani.</p>
      </div>
      <div class="footer-col">
        <h4>Navigasi</h4>
        <ul>
          <li><a href="#">ğŸ  Beranda</a></li>
          <li><a href="#foto">ğŸ–¼ï¸ Galeri Foto</a></li>
          <li><a href="#laporan">ğŸ“‹ Laporan</a></li>
          <li><a href="#kegiatan">ğŸ‰ Kegiatan</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <h4>Info Kontak</h4>
        <ul>
          <li><a href="#">ğŸ“ Jl. Raya Jogja - Wates Km 23, Pengasih, Kulon Progo</a></li>
          <li><a href="tel:+6274123456">ğŸ“ (0274) 123-4567</a></li>
          <li><a href="/cdn-cgi/l/email-protection#51383f373e113a3435243f36223023387f3835">âœ‰ï¸ <span class="__cf_email__" data-cfemail="4d24232b220d26282938232a3e2c3f24632429">[email&#160;protected]</span></a></li>
          <li><a href="#">ğŸ• Seninâ€“Kamis, 08.00â€“14.00</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>Â© 2025 Kalurahan Kedungsari Â· Dibuat dengan â¤ï¸ untuk <span>transparansi data</span> desa</p>
      <div class="footer-badge">ğŸ‡®ğŸ‡© &nbsp; Open Data &nbsp;Â·&nbsp; v2.3</div>
    </div>
  </div>
</footer>

<button id="backToTop" aria-label="Kembali ke atas">â†‘</button>

<div class="lightbox" id="lightbox" onclick="closeLB(event)">
  <div class="lightbox-inner">
    <button class="lightbox-close" onclick="closeLB()">âœ•</button>
    <div class="lightbox-content" id="lbContent"></div>
    <div class="lightbox-caption" id="lbCaption"></div>
  </div>
</div>

<!-- GALLERY MODAL -->
<div class="gallery-modal" id="galleryModal">
  <div class="gallery-modal-content">
    <div class="gallery-modal-header">
      <h3 id="galleryTitle">Galeri Foto</h3>
      <button class="gallery-close-btn" onclick="closeGallery()">âœ•</button>
    </div>
    <div class="gallery-modal-body">
      <div class="gallery-grid" id="galleryGrid"></div>
    </div>
  </div>
</div>

<div id="toast"></div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATA HARDCODED - SEPERTI PRODUCT.HTML
   Edit bagian ini untuk mengubah foto, video, dan galeri
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

// DATA STATISTIK
const DATA_STATISTIK = {
  penduduk: '4,502',
  kk: '1,499',
  dusun: '9',
  tahun: 'PK22',
  dash1_val: '2,195',
  dash1_sub: 'Laki-laki',
  dash2_val: '2,307',
  dash2_sub: 'Perempuan',
  dash3_val: '2,603',
  dash3_sub: 'Usia Kerja',
  dash4_val: '798',
  dash4_sub: 'Wajib Sekolah',
  dash5_val: '683',
  dash5_sub: '>60 tahun',
  dash6_val: '115',
  dash6_sub: '0-5 tahun',
  ticker: [
    'ğŸŒŸ Data BKKBN PK22',
    'âœ¨ Transparansi untuk kemajuan desa',
    'ğŸ›ï¸ Open Data Kependudukan'
  ]
};

// DATA FOTO DINDING - Format seperti product.html
const DATA_FOTO_DINDING = [
  {
    id: 'foto-1',
    title: 'Balai Desa Kedungsari',
    description: 'Gedung pemerintahan kalurahan yang melayani warga',
    image: 'assets/images/dinding/balai-desa.jpg',
    fallbackEmoji: 'ğŸ›ï¸',
    videoUrl: 'https://www.youtube.com/watch?v=ay6HP5t_wCI',
    hasVideo: true,
    pdfUrl: 'assets/images/laporan/laporan1.pdf',  // URL PDF jika ada
    isPdf: false,  // Set true jika ini file PDF
    photos: [
      { url: 'assets/images/dinding/balai-desa1.jpg', caption: 'Pak Lurah' },
      { url: 'assets/images/dinding/balai-desa2.jpg', caption: 'Pak Carik' },
      { url: 'assets/images/dinding/balai-desa3.jpg', caption: 'Rapat' }
    ]
  },
  {
    id: 'foto-2',
    title: 'Sawah Hijau Membentang',
    description: 'Pemandangan sawah yang asri di musim tanam',
    image: 'https://raw.githubusercontent.com/KDMP-Kedungsari/rumah-data/main/imges/dinding/sawah.jpg',
    fallbackEmoji: 'ğŸŒ¾',
    videoUrl: 'https://www.youtube.com/watch?v=MhJdGzrB3FQ&t=108s',
    hasVideo: true,
    pdfUrl: '',
    isPdf: false,
    photos: []
  },
  {
    id: 'foto-3',
    title: 'Posyandu Desa',
    description: 'Kegiatan pelayanan kesehatan ibu dan anak',
    image: '',  // Kosongkan untuk tampil emoji saja
    fallbackEmoji: 'ğŸ¥',
    videoUrl: '',
    hasVideo: false,
    pdfUrl: '',
    isPdf: false,
    photos: []
  },
  // CONTOH FOTO PDF
  {
    id: 'foto-4',
    title: 'Dokumen Profil Desa',
    description: 'Profil lengkap Kalurahan Kedungsari',
    image: '',
    fallbackEmoji: 'ğŸ“„',
    videoUrl: '',
    hasVideo: false,
    pdfUrl: 'https://raw.githubusercontent.com/KDMP-Kedungsari/rumah-data/main/docs/profil-desa.pdf',  // URL PDF
    isPdf: true,  // Set true untuk menampilkan sebagai PDF
    photos: []
  }
];

// DATA LAPORAN - Format seperti product.html
const DATA_LAPORAN = [
  {
    id: 'lap-1',
    title: 'Laporan Keuangan Q1 2025',
    description: 'Ringkasan keuangan desa kuartal pertama tahun 2025',
    date: '15 Januari 2025',
    buttonText: 'Lihat Foto',
    url: '#',
    image: 'https://raw.githubusercontent.com/KDMP-Kedungsari/rumah-data/main/imges/laporan/keuangan-q1.jpg',
    fallbackEmoji: 'ğŸ“„',
    videoUrl: '',
    hasVideo: false,
    pdfUrl: '',  // URL PDF jika ada
    isPdf: false,  // Set true jika ini file PDF
    photos: [
      { url: 'https://raw.githubusercontent.com/KDMP-Kedungsari/rumah-data/main/imges/laporan/detail1.jpg', caption: 'Halaman 1' },
      { url: 'https://raw.githubusercontent.com/KDMP-Kedungsari/rumah-data/main/imges/laporan/detail2.jpg', caption: 'Halaman 2' }
    ]
  },
  {
    id: 'lap-2',
    title: 'Data Demografi 2025',
    description: 'Statistik lengkap kependudukan Kalurahan Kedungsari',
    date: '10 Januari 2025',
    buttonText: 'Lihat Foto',
    url: '#',
    image: '',
    fallbackEmoji: 'ğŸ“Š',
    videoUrl: 'https://youtube.com/watch?v=...',
    hasVideo: false,
    pdfUrl: '',
    isPdf: false,
    photos: []
  },
  // CONTOH LAPORAN PDF
  {
    id: 'lap-3',
    title: 'APBDes 2025 (PDF)',
    description: 'Anggaran Pendapatan dan Belanja Desa tahun 2025',
    date: '5 Januari 2025',
    buttonText: 'Lihat PDF',
    url: '#',
    image: '',
    fallbackEmoji: 'ğŸ’°',
    videoUrl: '',
    hasVideo: false,
    pdfUrl: 'https://raw.githubusercontent.com/KDMP-Kedungsari/rumah-data/main/docs/apbdes-2025.pdf',
    isPdf: true,
    photos: []
  }
];

// DATA KEGIATAN - Format seperti product.html
const DATA_KEGIATAN = [
  {
    id: 'keg-1',
    title: 'Gotong Royong Desa',
    date: '20 Januari 2025',
    image: 'https://raw.githubusercontent.com/KDMP-Kedungsari/rumah-data/main/imges/kegiatan/gotong-royong.jpg',
    fallbackEmoji: 'ğŸ‰',
    videoUrl: 'https://youtube.com/watch?v=...',
    hasVideo: true,
    pdfUrl: '',
    isPdf: false,
    photos: [
      { url: 'https://raw.githubusercontent.com/KDMP-Kedungsari/rumah-data/main/imges/kegiatan/gotong1.jpg', caption: 'Warga bergotong royong' },
      { url: 'https://raw.githubusercontent.com/KDMP-Kedungsari/rumah-data/main/imges/kegiatan/gotong2.jpg', caption: 'Hasil kerja bersama' }
    ]
  },
  {
    id: 'keg-2',
    title: 'Pelatihan UMKM',
    date: '18 Januari 2025',
    image: '',
    fallbackEmoji: 'ğŸ“',
    videoUrl: '',
    hasVideo: false,
    pdfUrl: '',
    isPdf: false,
    photos: []
  }
];

// HERO IMAGE
const HERO_IMAGE = 'https://raw.githubusercontent.com/KDMP-Kedungsari/rumah-data/main/imges/hero.jpg';

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HELPER FUNCTIONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

const g = id => document.getElementById(id);
const esc = s => {
  const d = document.createElement('div');
  d.textContent = s || '';
  return d.innerHTML;
};

function showToast(msg) {
  const t = g('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 3000);
}

// ANIMASI COUNTER - Menghitung angka dari 0
function animateCounter(element, target, duration = 2000) {
  if (!element) return; // Safety check
  
  // Hapus koma dan konversi ke angka
  const cleanTarget = String(target).replace(/,/g, '');
  const targetNumber = parseInt(cleanTarget);
  
  // Jika angka tidak valid atau 0, langsung set
  if (isNaN(targetNumber) || targetNumber === 0) {
    element.textContent = target;
    return;
  }
  
  const startTime = performance.now();
  
  function update(currentTime) {
    const elapsed = currentTime - startTime;
    const progress = Math.min(elapsed / duration, 1);
    
    // Easing function untuk smooth animation
    const easeOutQuart = 1 - Math.pow(1 - progress, 4);
    const currentValue = Math.floor(targetNumber * easeOutQuart);
    
    // Format dengan koma jika > 999
    if (currentValue > 999) {
      element.textContent = currentValue.toLocaleString('id-ID');
    } else {
      element.textContent = currentValue;
    }
    
    if (progress < 1) {
      requestAnimationFrame(update);
    } else {
      // Set nilai final dengan format asli
      element.textContent = target;
    }
  }
  
  requestAnimationFrame(update);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RENDER FUNCTIONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

function renderStatistik() {
  try {
    const s = DATA_STATISTIK;
    
    // Animasi counter untuk header stats
    setTimeout(() => {
      const hPenduduk = g('hPenduduk');
      const hKK = g('hKK');
      const hDusun = g('hDusun');
      
      if (hPenduduk) animateCounter(hPenduduk, s.penduduk, 4000);
      if (hKK) animateCounter(hKK, s.kk, 4000);
      if (hDusun) animateCounter(hDusun, s.dusun, 3500);
    }, 500);
    
    const hTahun = g('hTahun');
    if (hTahun) hTahun.textContent = s.tahun;
    
    const dashRow = g('dashboardRow');
    if (dashRow) {
      dashRow.innerHTML = `
        <div class="dash-card dc-green" data-emoji="ğŸ‘¨"><div class="dc-label">Jenis Kelamin</div><div class="dc-value">${s.dash1_val}</div><div class="dc-sub">${s.dash1_sub}</div></div>
        <div class="dash-card dc-gold" data-emoji="ğŸ‘©"><div class="dc-label">Jenis Kelamin</div><div class="dc-value">${s.dash2_val}</div><div class="dc-sub">${s.dash2_sub}</div></div>
        <div class="dash-card dc-teal" data-emoji="ğŸ’¼"><div class="dc-label">Demografi</div><div class="dc-value">${s.dash3_val}</div><div class="dc-sub">${s.dash3_sub}</div></div>
        <div class="dash-card dc-red" data-emoji="ğŸ’"><div class="dc-label">Pendidikan</div><div class="dc-value">${s.dash4_val}</div><div class="dc-sub">${s.dash4_sub}</div></div>
        <div class="dash-card dc-gold" data-emoji="ğŸ‘´"><div class="dc-label">Lansia</div><div class="dc-value">${s.dash5_val}</div><div class="dc-sub">${s.dash5_sub}</div></div>
        <div class="dash-card dc-teal" data-emoji="ğŸ‘¶"><div class="dc-label">Balita</div><div class="dc-value">${s.dash6_val}</div><div class="dc-sub">${s.dash6_sub}</div></div>
      `;
    }
    
    const ticker = g('tickerContent');
    if (ticker) {
      ticker.innerHTML = (s.ticker.join(' &nbsp;â€¢&nbsp; ') + ' &nbsp;â€¢&nbsp; ').repeat(3);
    }
  } catch (error) {
    console.error('Error in renderStatistik:', error);
  }
}

function renderFotoDinding() {
  try {
    const container = g('photoWall');
    if (!container) {
      console.error('photoWall element not found');
      return;
    }
    
    container.innerHTML = DATA_FOTO_DINDING.map((f, i) => {
      const hasGallery = f.photos && f.photos.length > 0;
      const hasVideo = f.hasVideo && f.videoUrl;
      const galleryBtn = hasGallery ? `<button class="photo-gallery-btn" onclick="event.stopPropagation();openGallery('foto', ${i})" title="Lihat Galeri Foto">ğŸ“· Galeri</button>` : '';
      const videoBtn = hasVideo ? `<button class="card-video-btn" onclick="event.stopPropagation();window.open('${esc(f.videoUrl)}','_blank')">â–¶ï¸ Video</button>` : '';
      const pdfBadge = f.isPdf ? `<span class="pdf-badge ${hasVideo ? '' : 'solo'}" onclick="event.stopPropagation();openPdfDirect(${i}, 'foto')" title="Buka PDF">ğŸ“„ PDF</span>` : '';
      
      if (f.image) {
        return `<div class="photo-frame" onclick="openPhotoLB(${i}, 'foto')">
          ${galleryBtn}
          ${videoBtn}
          ${pdfBadge}
          <img src="${f.image}" alt="${esc(f.title)}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"/>
          <div class="product-image-placeholder" style="display:none">${f.fallbackEmoji}</div>
          <div class="frame-label"><strong>${esc(f.title)}</strong><span>${esc(f.description)}</span></div>
        </div>`;
      } else {
        return `<div class="photo-frame" onclick="openPhotoLB(${i}, 'foto')">
          ${galleryBtn}
          ${videoBtn}
          ${pdfBadge}
          <div class="emoji-frame"><span class="big-emoji">${f.fallbackEmoji}</span><span class="frame-caption">${esc(f.description)}</span></div>
          <div class="frame-label"><strong>${esc(f.title)}</strong><span>${esc(f.description)}</span></div>
        </div>`;
      }
    }).join('');
  } catch (error) {
    console.error('Error in renderFotoDinding:', error);
  }
}

function renderLaporan() {
  try {
    const container = g('reportsGrid');
    if (!container) {
      console.error('reportsGrid element not found');
      return;
    }
    
    container.innerHTML = DATA_LAPORAN.map((l, i) => {
      const hasGallery = l.photos && l.photos.length > 0;
      const hasVideo = l.hasVideo && l.videoUrl;
      const galleryBtn = hasGallery ? `<button class="photo-gallery-btn" onclick="event.stopPropagation();openGallery('laporan', ${i})" title="Lihat Galeri Foto">ğŸ“· Galeri</button>` : '';
      const videoBtn = hasVideo ? `<button class="card-video-btn" onclick="event.stopPropagation();window.open('${esc(l.videoUrl)}','_blank')">â–¶ï¸ Video</button>` : '';
      const pdfBadge = l.isPdf ? `<span class="pdf-badge ${hasVideo ? '' : 'solo'}" onclick="event.stopPropagation();openPdfDirect(${i}, 'laporan')" title="Buka PDF">ğŸ“„ PDF</span>` : '';
      
      let imgTag = '';
      if (l.image) {
        imgTag = `<div class="img-container">${galleryBtn}${videoBtn}${pdfBadge}<img src="${l.image}" alt="${esc(l.title)}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"/><div class="product-image-placeholder" style="display:none;height:180px">${l.fallbackEmoji}</div></div>`;
      } else {
        imgTag = `<div style="position:relative"><div class="report-icon">${l.fallbackEmoji}</div>${pdfBadge}</div>`;
      }
      
      return `<div class="report-card" onclick="openPhotoLB(${i}, 'laporan')">
        ${imgTag}
        <h3>${esc(l.title)}</h3>
        <p>${esc(l.description)}</p>
        <div class="report-meta">
          <span class="report-date">${esc(l.date)}</span>
          <button class="report-btn" onclick="event.stopPropagation();">${esc(l.buttonText)}</button>
        </div>
      </div>`;
    }).join('');
  } catch (error) {
    console.error('Error in renderLaporan:', error);
  }
}

function renderKegiatan() {
  try {
    const container = g('kegiatanStrip');
    if (!container) {
      console.error('kegiatanStrip element not found');
      return;
    }
    
    container.innerHTML = DATA_KEGIATAN.map((k, i) => {
      const hasGallery = k.photos && k.photos.length > 0;
      const galleryBtn = hasGallery ? `<button class="photo-gallery-btn" onclick="event.stopPropagation();openGallery('kegiatan', ${i})" title="Lihat Galeri Foto">ğŸ“· Galeri</button>` : '';
      const videoBtn = k.hasVideo && k.videoUrl ? `<button class="card-video-btn" onclick="event.stopPropagation();window.open('${esc(k.videoUrl)}','_blank')">â–¶ï¸ Video</button>` : '';
      
      if (k.image) {
        return `<div class="kegiatan-card" onclick="openPhotoLB(${i}, 'kegiatan')">
          <div class="img-container">${galleryBtn}${videoBtn}<img src="${k.image}" alt="${esc(k.title)}" onerror="this.style.display='none'; this.parentElement.nextElementSibling.style.display='flex';"/></div>
          <div class="kegiatan-img" style="display:none">${k.fallbackEmoji}</div>
          <div class="kegiatan-info"><h4>${esc(k.title)}</h4><span>${esc(k.date)}</span></div>
        </div>`;
      } else {
        return `<div class="kegiatan-card" onclick="openPhotoLB(${i}, 'kegiatan')">
          ${galleryBtn}
          ${videoBtn}
          <div class="kegiatan-img">${k.fallbackEmoji}</div>
          <div class="kegiatan-info"><h4>${esc(k.title)}</h4><span>${esc(k.date)}</span></div>
        </div>`;
      }
    }).join('');
  } catch (error) {
    console.error('Error in renderKegiatan:', error);
  }
}

function renderHero() {
  g('heroImage').innerHTML = `<img src="${HERO_IMAGE}" alt="Hero Kalurahan Kedungsari" onerror="this.style.display='none'"/>`;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GALLERY & LIGHTBOX FUNCTIONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

let currentGalleryPhotos = [];
let currentGalleryTitle = '';

function openGallery(type, index) {
  let item;
  if (type === 'foto') {
    item = DATA_FOTO_DINDING[index];
  } else if (type === 'laporan') {
    item = DATA_LAPORAN[index];
  } else if (type === 'kegiatan') {
    item = DATA_KEGIATAN[index];
  }
  
  currentGalleryPhotos = item.photos || [];
  currentGalleryTitle = item.title;
  
  g('galleryTitle').textContent = `Galeri: ${currentGalleryTitle}`;
  const grid = g('galleryGrid');
  
  if (currentGalleryPhotos.length === 0) {
    grid.innerHTML = '<p style="text-align:center;color:var(--brown-lite);padding:40px;">Belum ada foto di galeri</p>';
  } else {
    grid.innerHTML = currentGalleryPhotos.map((photo, idx) => {
      return `<div class="gallery-item" onclick="openGalleryImage('${idx}')">
        <img src="${photo.url}" alt="${esc(photo.caption)}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"/>
        <div class="product-image-placeholder" style="display:none;height:200px;">ğŸ–¼ï¸</div>
        <div class="gallery-caption">${esc(photo.caption)}</div>
      </div>`;
    }).join('');
  }
  
  g('galleryModal').classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closeGallery() {
  g('galleryModal').classList.remove('active');
  document.body.style.overflow = '';
}

function openGalleryImage(idx) {
  const photo = currentGalleryPhotos[idx];
  g('lbContent').innerHTML = `<img src="${photo.url}" alt="${esc(photo.caption)}"/>`;
  g('lbCaption').innerHTML = `<strong>${esc(photo.caption)}</strong><br>Foto ${parseInt(idx) + 1} dari ${currentGalleryPhotos.length}`;
  g('lightbox').classList.add('active');
}

function openPhotoLB(idx, type) {
  try {
    // Convert string to number if needed
    const index = typeof idx === 'string' ? parseInt(idx) : idx;
    
    let item;
    if (type === 'foto') {
      item = DATA_FOTO_DINDING[index];
    } else if (type === 'laporan') {
      item = DATA_LAPORAN[index];
    } else if (type === 'kegiatan') {
      item = DATA_KEGIATAN[index];
    }
    
    if (!item) {
      console.error('Item not found:', type, index);
      return;
    }
    
    // PRIORITAS: Jika ada gambar, tampilkan gambar (zoom foto)
    if (item.image) {
      g('lbContent').innerHTML = `<img src="${item.image}" alt="${esc(item.title)}"/>`;
    } 
    // Jika tidak ada gambar tapi ada PDF, tampilkan PDF
    else if (item.isPdf && item.pdfUrl) {
      g('lbContent').innerHTML = `<iframe src="${item.pdfUrl}" title="${esc(item.title)}"></iframe>`;
    } 
    // Jika tidak ada keduanya, tampilkan emoji
    else {
      g('lbContent').innerHTML = `<div class="lightbox-emoji-big"><span>${item.fallbackEmoji}</span></div>`;
    }
    
    const desc = type === 'kegiatan' ? item.date : item.description;
    const pdfNote = (!item.image && item.isPdf) ? '<br><small style="color:var(--brown-lite)">ğŸ’¡ Tip: Scroll untuk melihat seluruh dokumen PDF</small>' : '';
    g('lbCaption').innerHTML = `<strong>${esc(item.title)}</strong><br>${esc(desc)}${pdfNote}`;
    g('lightbox').classList.add('active');
    document.body.style.overflow = 'hidden';
  } catch (error) {
    console.error('Error in openPhotoLB:', error);
  }
}

// Fungsi khusus untuk membuka PDF dari badge
function openPdfDirect(idx, type) {
  try {
    const index = typeof idx === 'string' ? parseInt(idx) : idx;
    
    let item;
    if (type === 'foto') {
      item = DATA_FOTO_DINDING[index];
    } else if (type === 'laporan') {
      item = DATA_LAPORAN[index];
    } else if (type === 'kegiatan') {
      item = DATA_KEGIATAN[index];
    }
    
    if (!item || !item.isPdf || !item.pdfUrl) {
      console.error('PDF not found:', type, index);
      return;
    }
    
    // Tampilkan PDF di lightbox
    g('lbContent').innerHTML = `<iframe src="${item.pdfUrl}" title="${esc(item.title)}"></iframe>`;
    const desc = type === 'kegiatan' ? item.date : item.description;
    g('lbCaption').innerHTML = `<strong>${esc(item.title)}</strong><br>${esc(desc)}<br><small style="color:var(--brown-lite)">ğŸ’¡ Tip: Scroll untuk melihat seluruh dokumen PDF</small>`;
    g('lightbox').classList.add('active');
    document.body.style.overflow = 'hidden';
  } catch (error) {
    console.error('Error in openPdfDirect:', error);
  }
}

function closeLB(ev) {
  if (!ev || ev.target === g('lightbox') || (ev.currentTarget && ev.currentTarget.classList.contains('lightbox-close'))) {
    g('lightbox').classList.remove('active');
    document.body.style.overflow = '';
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BACK TO TOP & ESC KEY
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

const btt = g('backToTop');
window.addEventListener('scroll', () => btt.classList.toggle('show', scrollY > 320));
btt.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

document.addEventListener('keydown', e => {
  if (e.key === 'Escape') {
    closeLB({ target: g('lightbox') });
    closeGallery();
  }
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

function init() {
  try {
    console.log('ğŸš€ Initializing Rumah Data...');
    
    renderStatistik();
    console.log('âœ… Statistik rendered');
    
    renderFotoDinding();
    console.log('âœ… Foto Dinding rendered');
    
    renderLaporan();
    console.log('âœ… Laporan rendered');
    
    renderKegiatan();
    console.log('âœ… Kegiatan rendered');
    
    renderHero();
    console.log('âœ… Hero rendered');
    
    console.log('ğŸ‰ Initialization complete!');
  } catch (error) {
    console.error('âŒ Error in init:', error);
    alert('Terjadi kesalahan saat memuat halaman. Silakan refresh (F5).');
  }
}

// Pastikan DOM sudah siap
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', init);
} else {
  init();
}
</script>
</body>
</html>
